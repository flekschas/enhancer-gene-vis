(this["webpackJsonpenhancer-gene-vis"]=this["webpackJsonpenhancer-gene-vis"]||[]).push([[0],{245:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABjYAAAD/CAMAAABlyR/QAAAAkFBMVEVHcEzv7+/f39+/v7+vr6+fn5+QkJB/f39vb29gYGBQUFBAQEAgICAAAAAwMDDPz88QEBCgoKBfX19PT0+AgICwsLCPj49wcHBxcXG+vr4BAQHe3t6urq7Ozs7u7u7///+Ojo6enp4hISFBQUERERFeXl5RUVECAgIxMTGxsbH9/f1hYWHNzc3d3d3AwMChoaHQftsbAAAAAXRSTlMAQObYZgAAH+FJREFUeAHs3eli4rizBXCpZO0rXGbm/d/0Yqf/reAYYjpukOzz+zT74g46lEoqMwAAuI/THAOAAwMgIiEGKZXWxlrrvPdhFL8RrpL33lmrtZZyEAKRAgCwO5yyGDNiDIg0hsPGQvDeGi0HkTkDAIAOEQkptbHOjzHxSmOEaDUIYgAA0DbKwxgVP06KEub+MECcViIzAABoCCch1ZgV5alcmBoURmslpRyEEDRi36ArcTVIqbW21vk1ERW81UPm7H0AAIDy+rAoIfkxI5QcRCb6C/8tQkilrXv4n1O8UeKl4QEAADwPytgUvk8K7+yUE0TspUgMUlufyvvCAwAASEht3Te1RUhTVIhMrAVZjPmxmHDJ6b+QHQAAQFlq68PjusIaJQci1qgslPFpIeU2zQ4AAGxGPaouSnJWy4E460UelPNf/oeSPWX25wAAkBdSP+hdlDCmhSDOOpWFdmn+P+WUYH8AAAB5Ue62LaxR+znFKqTxs+jwClUHAMCP86JMcUGc7VCW5zRrdpyI3QKgqyx+yUTE2WEB0NS/iIuCs0ru/44cF/q235GMYBPAuAMfwoOrSN4arTAHDVBgxBKckQOxI8nqJjyLO3F2QECDrJeSnh1js+P8AATGnQKjBGtkJnZQWboSK3+o7SqoH4ufKN7p4QiHugGBEdzYvmAglEdyHA0XyqZVb3mZpBBCidXBJhEAAqMki7y4xYdzQHIcBUmTHow7GMTd9jf/fg5a8WbIbDcAgRGcudfvBvF5LXED2yMgZcvC9ygtBT3/MZvG2CwmkDc9XScFnJKyi4FhERjfI+U/PTFi92VniUE7xIqc59KWbb9H1cltLi1lR9tFPQDPyqSyFBhaElsJSNbPf7p7tIqHGP+PNQMuMfpvcuXiZ5+LrRsRWSjn40zAKII2AQ3aha0CA0iF70oOijEW1gwoMUZ60P82ZdZ+4OwvyQsfRo/hmY1BF8OXrXsYIM6h9sfvLVPNPGDIj2Jc2HIzTUa85DrpPDs8LpTC+3Gx1MUofpvAAOnjL2EhOFKM8R/WCPg33ts0vKkzvBYv3QSYf6WrkdUGwKZU2PZYLdDvkiP8R+zWOcb4L2sEjBG/EO50qct2sZK/fxRBLBiABu84cu4KSozXlxyWvny9tawhaG3kL3dxan+6mHc2F0ieEwagwbsSwxeUGC9G58XgEOOnn8G71V+NcLfQKC2s0jScA4qOd0NilGQxyuAVSIevwcEbOkoFel77CV/3pkRDH2MXYpV0ZvACSIy6KcXgZeTX4Aj1xGdb0NrgKtQeNG9u7LKPVdg41ABoWE4MYu+C4AgX9sHFGCVrAfD4KcP5792ponMHA9CKHRjARqdrXWgyMRAcJzYyMUbDWoHWRpqHhm/67SlZebzpBTYdEmJbTgwER6Lxd2Ir40VgjHB7GxodbP7QzatekBywwUTnBhMD/g2/Wxy5Ht6BN6p3L2toFM17mkZQk4MBPIXXRkaziQFk4iSceGxpvAhaG7y/0KjJ8fyxL4CFbalkmz4rhXscrt4wg/capqMK5Xegs95kE352tgpQZISm72PAEOKkkfEicI5xPj6s7+QwxFYBFBl1onPjQMdfDGsDWhuTctrD1GW8lng9FBmpm0YGkI8Tz+DtKN72NHaSHI+vcwCKjOC62ZYC+vSe9sKagNbGSAu2A8P5y2uJAbf4fOn0tBTwQdlUbvKewdvJ+mFyKrPu8Tp2ud5ZhIPi0qRue99AvsS5Ihm8HXe3lfsO2gKkAs7kAikbuu5kwLnZgfVA8hziJ2EHfQFxLvV4GDE43nSp2b5Uh50McHhPe8vmQ8ntrt4RFg9VciAy5uelgu2zyIAc8IaT1mXlyq4OK1C9zRHQ5TjIEdu0ozsZwHvIexDKxyvHdmJwtctBDPZ9RjO8Z18KAITRfE+rSagHq9guAUkb5s3TzABgk0RIZarcBTsQUTtrF2KwuwNTs1bGZuelAOsZyHA7fuo4SAe0x48QGQmtDKxnsCFK8UYgdiT1YFXCT9geI6N4g1YG1jPY1KnEmTIcbWh/iR+CIga7igy9dWQA1jMY4qiY8ZZlHs5xcmLHwmtZi3NV+4kMJdj+AL17PQMq8crx29dlFWKLuI//7b497gfWGSCJyDgKH0N+fj2DLYUvr8XS8SqxJTT+1XK/e1WhwzYacGkDIuMwRI2B59cz2G7MrWY3/r1X1lHYecFHMqDJ0dvtb0TGseTa5n5+PYNNhKU5U255dr0oB8ht6dHk6GfGVEJkHI+uufH8egYbFXyR2Awf80GwmVMcnfn+z1W1HxwgLn52YgqRgdx4vJ7BRsw8nOsfNuzWJS7Uf3tvcnjBoDl59lI+HLI94LIVE39+PYNN+BjjP8uH2NLxUqMiie54H6ds0wGv8sG55sb69Qy2Mn4CM/uC5iPSuY0jyY6j+eBA/zscdWAI+Hhln1/PYAvxasUf5yleFcEORfh2gwPNDCsRGcdUVyT7/HoGL4sNCgcd7ZLPLQzIBbptZhSH49FHx0O8+g+x8a5NKlo+Gl2QGleE4Hj/Zb6CI1OwfIns8ux6BhtI91tIfnZdg7PXw3lcvP0b/W94nBvr1zPYwP2TaedPf/gUJ95qLQeRiR0O6YDgeP/OFJoZLaORuJIjPTJ24vyH8El8KFT+FzvRIyWlHMTVUOogkfXrGWw034UvHDyo12NCnAveW6OlEHScQXnvDA6cmSoezYxGsiFPwaA+QsF7n0IIJb7Taf16BhsOF3FL4RzqduEDJXln1HCAAHlXcODM1DtesgScaAqIKR+mdCixTWX9egYbkbM6b3S5yXAZVynJjxUIIThggwb4a3em4CMk1JQRKYTYkbB+PYOtpC99JTX7tdBxpKTW1vkU4jeCdz+IDwQHyoy/vzMFnLIYS4nNUqKEq99dCPPRhJgM4gN9wh6iSvwiR0qPfvdLUpzI9esZbIXK7TrI3ZfXmujbk1SchBh/4L6JkOSNEhnBAavw26EhYfudKQTFMJUTLv3xflMIIU3BYH53pjMRcfYW/9UXvq5fz2AbMk7skBmjwZQ4Gr5OgLFsAc9CauN8eJweHMHxANxOQC9WITI2TArrfAh/UD1MATHlw5QOnLXFxquS169nsKWhxJkil27yX9gjJAZ1Pz/KcnggOIArV2L1s9t8wEkMUpu6F7BOCMlbaz4yokZEm2oVEfLz6xlseW+mSrR8k//C1hjrD+fLnfAYBIIDbrsZaIBv0NCWyli3PirKr5iQchBEvc6kCvT0egbbr4OjsM3rYHketF1Mj+T6Lzxk2HjkCA5Nocx4El+fFTUotKo50TGqqbF+PYPNCTMu8SUZ8ahzLth6NT1c2mF21OBgL4MyAyhPe1AplFVJ4aaKQhDtcH8k0Kr17I1A/OhAQhbKpcXs2EFwnNiTMGkKZcZzOP0Ki3VRMdYUmXa8q97LlDyQPx+Du1h5eDPQEYMDk6ZQZqwoLZS2PpRvs8Jbo8eo4IfpxXrOoJsXv/Off9dU53l2BKdyn88EwfEMYQLKjDVpMTYtUlibFexQ8hSiZwYd5YZnm/iaHcUp0fF03CDYeuiAF7d0NwM7Ucb68H1YKCmIH3mMHubZ9vbid7YdoVyYndBVudv3cXhi92Fr6tEVcBQX1oWCsFiD4pVm0A2eto95GoyfVR2n3F1wrL/Gga0pRWwEJKR+XFyUsb0th89hAb631AAp2d8gbm8Kx2AHvpfgwNYUOuDr46KmBUqLe1qadAfiir1Plrc7Vn3tV5GLH+7d/8PWVDp6B5x/bEbdT4uA2qK39Qxq4+Kd0VF6LToEDlUtX+jDEHQalHGp3C8urFFDRlq0up61D485Kx8/8SfCNY6+L/SVxfRHeRGSNSguEBt4zH9lkHYyubfgEGhn1FNTh8wLbVN4aVwAYgOPmW72q4IVvdz/O3ZvnCt/1FNTNS/K3U63UYgLxAYe88uKjvaTA4eq8k07wx3p1BQnqe7mRUhWS/QuXgSxgcdM0neWHDU4LvywtzOKEfxI/e4QFwWUF2+B2MBj5tKVvpKDfO2NH7AFHrQ4+IZUCW7sXrC9w3oG9oo1ajiHT8mRcaiqIXyw5TjtjFpgIC+wnrUOxOfkUNRLcDja+bEpXz7fzuC7Dwybyv39KNYuACSHP3HWNK533xvnyh9mcAhJbcOdy3roX7QMYDiX+D9W9NEbL5edTg45RAucZ2lcuFNg4HwUQBekqx9cQ+1Pqtpji4Mu/vZG32EqjFpgMADoxs2pXH/qozeedzptymux0x5GQAdjVwDIhHqyinoIDks7yYzwOTNof2eJa9MbO1I7AyDOpYuSg3S9/rerzFB8f00MBAbAM/RVd6c/uyg56LyHFocwZZ+ZUfekEBhYz+AAtyrpHHooOXLvLQ5h9nY9o5YYvsS54nccGFjPAI9Z+vu3ANHi2D4zJN9PFyPglBTWMzjiY74pOaxo/vrfBZnxbjQYFxb3pBAYWM/gMI+5lhzphBbHZsSl7OwlfbS0KVWSUdiTwnoGh3vMdC6t71XVFgf1dm6q2P6vgWdpUvlaYmjsSWE9g8M+Zi5D3GgOFFoctKfM4FnZVBa6GIIzwHoGx37MwsVfvGi7xREuncwOKV7w3hNj8aAU+ynAegbyinWvtsfDCS2On8617bsHnqX5mhjoe89hPQMgWYODWIuGulOFzHhd5zs4HK0FgO/OVQVLTbc4LtTorfuO74HTsJAYVj08BgYAkM/PdcexU8WFL71nBhfKfa0x0PgGgCcP5Lb57nHyLR3GFab3zMhf73wHhxrj/9k7DyZHUhiMGnBHUBtfOWz+//9y8zLVx95k09Lce5Wm4iTDK6RP8DwAaHLEQBj3sc4Y/FsoS+U40scAgOfvzFpnx/+EcS9KBjTSEOxfLJUjWanXAABxpKPmFsdZQXBqDObTUsvUt6tIAkD8zu4NEuJfxUEY1+0rZxjuZGT7rW9gP2OqUlGsSrM4Ln/CuM0bGjYHwV3pZFCWuhnsZ8Cf2a/EQRg3nGwGp3w3JVmRKEsB2qhwV/7Mb14cpVLVuqERBzPOCP1cHTJunK9173YGAbQRkvBn1iKOBmPj7ubRI4MNDRdOMbc/ZLxPH3b2ALRxFdGvDcShv1JVNzSmYKaVISuWRp2Mq4g9bQDa8Iv8b7SBOBb5yexvtQGfFvmDjVsKXTemf9Wlhlbd+4+LGNQGoI0+izZtII4Glaqrv+01hXFwBrvfuWnzu89iTxuANnwUaakN/53dDnFoeMPpeMPi1BjsKSNNbRO2H6OIem0A+1nFPktbbSgAcfhZfrL4mxSncgzmlLGUvFQzPmVBG2AxdiuiXxuIQ/8FhyFWExpmlJHjGNyWaw9tgK3YbRttII4YtF5weHzVsb48BOXt7ylt0v2uY7eCNsBm7LaZNhDH7LWGcf1rjfXlGJQnphQoo6w9tAEmY7dNtYE4Jv/2KlVhzCaKUy6MiwZllNgt2gCbsVvV2kAc+itVro8mklPhFJUoo6w9tAE2Y7fttEFg7RBrcVivVIX57qCh91VU368vDNlUGSV2izYI4FqO3RYY92sTP0gnb7xSVcVtB6e3/53XIdtNlVFit2iDcT/bsVu00Xx/VpfGHXL5uZ5x0Ag2mhlp3Dslaw9toA3LsVu0gThWlarDEw8aSelB47CuTOVJy91Y75OgDbRhOXaLNhDHEx6NraJTeQ4GKlM59l7z2kMbaEM/h0XQxob4IclPolf5aGw6PTI6tQxOf2Yqqho+/LwI2kAb5mO3aIM0bl2pOu/+g4Pug4brp1w1M7StPbSBNuzHbtEG4igc7q1Uhag5OhXGRV1lqordog20YY9jlu21Eb/z+0vEkU9O56OxdRtcZ3SqdDOUVqYKXRZ72gD2MzfJvexgizGOo4FHY8M/We1BI5xilZlSx5dJBG2A3X0KbRCqug9fVar28W4YnGPGM2O3aANsTvgp1QbiiF5npcqV6pTGW6d8r/+YUdaePW0AHJLo0wb4QWVv3I9/zkGHMesc7AtjUn7MKHxOYlAbAL0I2iBU9fzIXQzKSlPqjxmFiwjaAPOxW7Shswl9UlepKtWpg9bSVKoLZ4pjt2gD7E/41doAQlVV4HZxOlNTOfbe4NrTrw0AN4uo0kb3nR38PVQV1ElDj87CuCpN7Z3JtYc29MN+VsduNU6JwyXpaXH4MqURtfxUbj9lKaSqA24ydos2mBLXHP1DG/rxo5LeeIhlss/f6ey64U/lVregx95bXXtoA23Yj92iDXrj90jD1WPj2zhDCnmuUlOGY7doA21oj92iDf34pWzRG0sj9a4K4qVz+z/IqgVevehqMXaLNtCG/dgt2qA3XkkjhvtfG2/vjCppazd2izbQhv3YLdrQKY7Ju35OcnOW+XivNFavjcvU6mcKp1QPgdtfe2gDbSiP/qEN273xLI1Ix/ukURovTbHXAi98mUXQBtqwH7vVpI3hOzsoaNiir5U0avyyiTPczhjvk6ANe7Cf1dE/lVPioGmLrqRRE7+xcwc4ahtRHIdtA4WQecTZtBt1yYY2vf8dK7hA5Up4/F993wlGT5r5CekZzVhw92SDsLXb8Gxw6B+N/mfaD3HeW8kGgX6vko10rX80+p9pHocwxyrZIH/tVjaCf2y03Xh7tn2rh9eAM0Wu3coG+at/AdngXHdtvK1gbHX3LeBMaXcvIBswfq4EA//hUnf72yp2ddcSz7QhPz9X5WUDdnN9iGxQD7d1jPWQeKbt+HMu2SBy7TbEp0/DdsjGrR62eCZ3LwHJX/gZs2zIRqcv/JCNQN+NWTZkw92jA18VLyAbsiEb10shG6Frt8YsG7Lh7tFB5hd+xiwbstHpCz8Y8uxnY5YN2ejhx1xQ1m6NWTZkY8HdA2u3K9jthh5kQzas3SIb3w1ZNmTD3aMra7eGLBuyYe2WBazdGrJsyMaCuwfWbg1ZNmTD2i0LWLs1ZNmQDWu3LGDt1pBlQzYW3D2wdmvIsiEb1m5ZwE+NFbQ2rEU2ZMPdQza+XIy5B9mQjfdL8Wzes4L/7baS9DPBB/ImG8iGbIBssALZ6AJkA9mQDZANZEM2QDZANmQD2XiGqVlX68ECrgXca6tMeNGOhiwbsuHu4UXz5yJ5ZMOfi8CQYXoxZNmQDXcPL9oCh2bIsiEb7l5/DDGmsyHLhmz0cE29e3jRXg1ZNmSji78qE160qRmybMiGVVy8aAscDVk2ZMPdw4u2wJdmyLIhGz28t4qEF218MWTZkI0efr5UJrxoh2bIsiEb7h5etCd9f2TIsiEbvv3Di/Y6G7JsyIa7hxftSau4hiwbsmEVFy/a0ZBlQza2ffeQDT84ZEM2ZMMPDoZc48mQZUM23D28aOutAw5sKxtjvyc64ExWcZGN/uuAA1vR6m53W8UfdXdJO5NVXGSj/zrgwFac666NtxWMre6+BZzpw969twE6mlp+Nnith7a/Pdu4a/XwdZNninJtodmAY3w2GOdaWdvkmdIcQ7MBU0vPBvta2deAMwW4tsxswHhKzwanWtUx9Uz5d082CFwHlA2fHp9yz5R/92SDtHVA2fAlwLxPOlPA3QvNBhzm8GxwOF/q6dr5tzHgTFH+njOzAdOlRzaA6yU0G3Dskg3gGJoNmFqPbADXFpoNOHXJBnAKzQbsW49sAD9aZjZgeumTDXD3QrMBh9YjG8DhV2Y2YPqnRzaA6XNoNuD41icb4O5lZgOmXz2yAVz/be/8uxTFsTAcEjEieYVypmUJJacFtsbd2h/f/9tNK5dUbGNrax3s1vv8o+F6EFHyCLyB5pfRBlPrFECeKHETZZoDpqj4T899tMEwvO2xNkZibQBYC9g/b/pCaS7m8b2hGvyYM34ubzf9KhXPB8Oo5lfRBo/B7Ip4OrewK3E1G6DT8bQBnqBDk4nFjzjjZ+hbdw9zQDDMEyKX9v7aYP4Jm0R0yzEbiWsxgPz2EBlAPX0cUISQ5Oc3C3wV11Muc4C1wXAU917aYCqgoaf6hr/BJZAMt9efPX0UV4RYAs7PuN7PUwAda4PhKC5r425sgIKeKmAuiHpd1vSU2upANuVaHPAV9kv/lQLJ05+dEwEkYG70M71tp6OUtcHwmXHWxr1YwjohNE07hKIAIK32jdTMa517Z8z3LRhq9mj7l3LaePoorggQA7MPP/9x2s9l0M+Ol2kkBGvjpyFr/yboM8d6OYp7T20wKawM9HDWWqDLdi0Ds8CuSWfM6wWVg3pQgH76Pz1hP+NCP0Mf+pmaHgFtMKmHvIs2yjQTl/KSfvAyvjZ0CiCNH2LbG18bzAL2yOQ5uj9lNgOaXhuw7UQtgS6iqxi3Sk4a2BdxzApQTx8HDPsZIT/vhZyvD/yM3s9R2M9hbTDwuIM26tUCUFfdfEiPrA365wegeIRtb3xtMAY2kK360vvBql4bb7vmsp9cAVuSSxucXyMczxrFDfv5aLLM0WmZFYAhP6OdqATI934uBj/jhbVxHgDtQDSyNmjH8Oe0sW2JeGxtLIHtNE4ssHqMKO79tcHaMNj2OgdmuyYdxor7o1Qb2H8Nh7ei0M/9heOA4RWNwNY76f2MQz9j52cJbEkuKWvjhpMXI2hjAsDmP6kNda9zGwrYRv1j/mjbHmtjTG1Emz27Xmzt9l2BuSeWst+bng+20LBZMM77ZMg3e6U2DBaHfgb5Gav+4cvgiOiX1gZrI0ZXKP27aINOs9GB098ZObd31AZro8KeZtDDjn8bNMfaSKkpNrBxoG9U4ulY2cu1QX5+/fY0c9kq4A9PLGrwMwY/I7tOG6yNqqz9cr1ee8W6Kiuv6crhkBs1Hf5rJzoS4nZtuPenMi19OFXnFihc/u6z1WXkHS/N3c1W1YNte6yNUbVhv9Fr4xWOkDYWcBxpowA0XxX3h9qQ2GMGPVDNHGvDqWEDxD+rDdbG1Jj1q+lzalSui9wLptWzHK4pjZlW6a79Olhh18IiFsHMW1rRvqHjRm0YM+vfP3blVQ4gqYb+cYGP5tykQu/KxWHorqgPmrFbEwdbZmObx4n5Vg1rY3wMHXOSUtIRpg0ASwS0YT6q30epNsCWxx+d0UbvZ0MHxImANjw/X6EN1oYGUvTrOqKy8XNqlUFf1mTzZV+mjvQVVP7qMukHmTeDz9UGkLr3P1j6tK8n8D9Mijzxs1DSUHkRHTT1MK9wXmsGZI+17bE2xh+34bSRxMSXkDa6mHiR3wd3GymelKw5r43BzzRgPD7yM2nj2M/XaIO1gW6q4oY8AQBvfU5t+D4KlcUdkPXagC0mky2QUsdrdbYvy77cTaVKvMxb9/4efao2gPeJegNSKqOZqrgDFGmrmUjVApq+f2wnqgD9qJZA65WX/WdrAEXzsm/vk9Bv0jzatsfaGAOK1fraePWvhBs6SNWJEHQVw6clSuzF4zacNpyfJyFt5PGAvEIbrA0jvSH5+Ohxs35yQuOMVqSN3WOU91aZ9U1KK7jM2/Ij80bOuEEb5Xfa0GSkqC830ru2gEEu+8Uz9CG29LK4X/qGRvrkkbtSw/DRNZBnpy8k9wBEM8vaGJUVMDvUxpqmEOEkFcEnNoJxwLCf4fzsDlJ5fg4cpMpFGNZGCOBA23pYu9TTglbnqu9p47ZV4iOXIIF0+JqkW/ku7ZaHM283acMRe9Kj40YuyB6R9Nq28Ef/pID0lmdFr949ydw8hk+hgeLkVasfbdtjbYxCDXT1gTZqID2pDRoEGPbPm3hu3Ni/8342rsciwkkq1sYt2ojdkRivX45pOiGBxD24vj9y28A/mi19U64Xp1l+tjZSNxP34KY7UqcNf+nngydU03zZVXPhHEhrIrwI+uFuw8HaGIelu+7tf2hXNx3EsC4C2lDuh1z4e77/zWEk77t1J7URAbkfBnV9U1gblI5kbVwMkGviUm1UZbkJaYOaDgV8dWeuP00bie7JzmrDBW7LRUAb1AycstBAdlIba6B5vG2PtTEOdQOYl3VV6hy2oI0kX61FpXM7PdaGSIG0rOsyRRN9zMUAsw1BOnneKG6wlDg/r+GOUJfk54A2PD+vWRtXnNs4o41qlgNAUBsZNYkYH5jbtRF68Vlt6AV6zmsDHuqUNioDKx/uqrisjfGDzzY5TLTZRga0Qa93V1Knood+9lsBBAtRA5i49zOcn7/u/YzVsTZE6/xsos/WBmtjnQO2adugNtSxNizR3EUbdQrYZtvmF2rDDpzUxhxYPeC2x9oYC7ls7I72f4KI9xO6d9kPDvqr780seUIu7Y7t/8UHynro516dDU4WTvgZjQxow73e6s/d22BtUMKWUkfn9zb8zNv42qCE7W5Cepk2Fl4GL6wNDbw/4l9g1saIZEplUXhCiEgpJQUTJipOnjInP6sTfraDgjW9vvfzi/iell56LayNmP5syzPnNkKn0cfXRkRLf5k28vCa8CmBJnqmbY9h2M/MjdqgnFpYG5SY2qE2MeVc76kNBehT2qDEVN/ebORu8fIz2qgMOikYhmEuhbXhOt4spA2v502xoMzbPbVB+0antLEaxgRNALW3SPZjbaQ0P4ZhmAthbSwpxZaEtTGjcgUkB5k3fa+9jTll8ELaUN5gxWhnEcrs1fMqqA1Ne08MwzA8bqNHntXGCjCv5SZFWBuyQx5XdWkASZm3eF1T5u2Tx23oyVltRB1QlK8aAKJjbYgWSNaiKoCCMntJWVevCyyigDYUgM1AJBiGYfhe4uqsNqIGe96ARUAb7j4OVgcyb5+jDUdyPkm1ondfAFlAGy50t91bIOvglj6gjSU8pHhOGIZhrMdOG9bG/t0lbP8gYpou3+w3CtHZLvrWsvad/ECXSJg0u3ozCWfempAJrP0JbdiB/p2tbd1M3IM/vbPWtlJbu3JJOrfYQ+iu05Ggpovs0Zrw6YvEhdpgGIZhpFLRmXoWzrzdBbc0YSK3eNSkT/e0MMzfzPfQHIF0ffwAAAAASUVORK5CYII="},246:function(e,t,a){e.exports=a.p+"static/media/enhancer-view-2.5240166b.png"},247:function(e,t,a){e.exports=a.p+"static/media/enhancer-view-3.bf2e34ef.png"},248:function(e,t){e.exports="data:image/png;base64,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"},249:function(e,t,a){e.exports=a.p+"static/media/enhancer-view-5.cf1c5548.png"},250:function(e,t,a){e.exports=a.p+"static/media/gene-view-1.0cd2047f.png"},251:function(e,t,a){e.exports=a.p+"static/media/gene-view-2.a8614234.png"},339:function(e,t,a){e.exports=a(451)},434:function(e,t,a){},446:function(e,t,a){},447:function(e,t,a){},448:function(e,t,a){},449:function(e,t,a){},451:function(e,t,a){"use strict";a.r(t);var n=a(77),i=a(0),o=a.n(i),r=a(17),s=a.n(r),c=(a(344),a(4)),l=a(12),u=a(100),h=a(18),d=a(255),m=a(505),p=a(490),f=a(492),g=a(488),b=Object(g.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#bbb",backgroundColor:"#fff"}}})),v=function(){var e=b();return o.a.createElement("div",{className:"full-wh"},o.a.createElement(p.a,{className:e.backdrop,open:!0},o.a.createElement(f.a,{color:"inherit"})))},y=(a(434),function(){return o.a.createElement("div",{className:"full-wh app-error"},o.a.createElement("span",null,"Failed to initialize!"))}),w=Object(i.createContext)();function x(e){var t=e.children,a=e.chromInfo;return o.a.createElement(w.Provider,{value:a},t)}function A(){var e=o.a.useContext(w);if(void 0===e)throw new Error("useChromInfo must be used within a ChromInfoContext");return e}var E=a(25),k=a.n(E),O=a(45),C=a(504),j=a(495),S=a(19),N=a(507),M=a(457),T=a(500),I=a(514),D=a(512),z=a(494),G=a(513),R=a(260),P=a(104),L=a.n(P),B=a(14),F=a(511),H=a(190),_=a.n(H),W=a(189),U=a.n(W),Z=a(240),Y=a.n(Z),V=a(191),Q=a.n(V),X=a(493),q=a(496),K=a(454);function J(e,t){var a=Object(i.useState)(e),n=Object(c.a)(a,2),o=n[0],r=n[1];return Object(i.useEffect)((function(){var a=setTimeout((function(){r(e)}),t);return function(){clearTimeout(a)}}),[e,t]),o}var $=Object(g.a)((function(e){return{root:{position:"relative"},filterBar:{position:"sticky",zIndex:1,top:"8px","&:before":{content:'""',position:"absolute",zIndex:0,top:"-9px",right:"-8px",left:"-8px",bottom:0,background:"white"}},checkbox:{marginTop:-6,marginBottom:-6},checkboxLabel:{fontSize:"0.8rem",marginLeft:-6},nestedCheckbox:{marginLeft:4},visible:{transition:".3s ease transform, .3s ease height",transform:"scale(1, 1)",height:"1.625rem"},invisible:{transition:".3s ease transform, .3s ease height",transform:"scale(1, 0)",height:"0rem"}}})),ee=o.a.memo((function(e){var t=e.filterState,a=e.name,n=e.stateWithName,r=e.group,s=e.stateWithGroup,u=e.colorCheckbox,h=e.colorText,d=Object(l.e)(t),m=Object(l.d)(n(a)),p=Object(c.a)(m,2),f=p[0],g=p[1],b=Object(l.d)(s(r)),v=Object(c.a)(b,2),y=v[0],w=v[1],x=Object(i.useMemo)((function(){return a.toLowerCase()}),[a]),A=Object(i.useCallback)((function(e){g((function(t){return Object(B.a)(Object(B.a)({},t),{},{checked:e.target.checked})})),w((function(t){var a=Object(B.a)(Object(B.a)({},t),{},{n:t.n+(e.target.checked?1:-1)});switch(a.n){case t.N:a.checked=!0;break;case 0:a.checked=!1;break;default:a.checked=void 0}return a}))}),[g,w]);Object(i.useEffect)((function(){!0===y.checked?g((function(e){return Object(B.a)(Object(B.a)({},e),{},{checked:!0})})):!1===y.checked&&g((function(e){return Object(B.a)(Object(B.a)({},e),{},{checked:!1})}))}),[y,g]),Object(i.useEffect)((function(){g((function(e){return Object(B.a)(Object(B.a)({},e),{},{visible:!d.length||x.includes(d)})}))}),[d,x,g]);var E=$();return o.a.createElement("div",{className:f.visible?E.visible:E.invisible},o.a.createElement(X.a,{key:a,className:"".concat(E.checkbox," ").concat(E.nestedCheckbox),control:o.a.createElement(F.a,{style:{color:u},icon:o.a.createElement(U.a,{fontSize:"small"}),checkedIcon:o.a.createElement(_.a,{fontSize:"small"}),checked:f.checked,onChange:A,name:a}),label:o.a.createElement(K.a,{className:E.checkboxLabel,noWrap:!0,style:{color:h}},a)}))})),te=o.a.memo((function(e){var t=e.group,a=e.stateWithGroup,n=e.colorCheckbox,r=e.colorText,s=Object(l.d)(a(t)),u=Object(c.a)(s,2),h=u[0],d=u[1],m=Object(i.useCallback)((function(e){d((function(t){return Object(B.a)(Object(B.a)({},t),{},{checked:e.target.checked,n:e.target.checked?t.N:0})}))}),[d]),p=$();return o.a.createElement(X.a,{className:p.checkbox,control:o.a.createElement(F.a,{style:{color:n},icon:!1===h.checked?o.a.createElement(U.a,{fontSize:"small"}):o.a.createElement(Y.a,{fontSize:"small"}),checkedIcon:o.a.createElement(_.a,{fontSize:"small"}),checked:!0===h.checked,onChange:m,name:t.name}),label:o.a.createElement(K.a,{className:p.checkboxLabel,noWrap:!0,style:{color:r}},o.a.createElement("strong",null,t.name)," ",o.a.createElement("span",null,"(",h.n,"/",h.N,")"))})})),ae=o.a.memo((function(e){var t=e.filterState,a=e.optionWithName,n=e.optionGroupWithGroup,r=e.filterLabel,s=void 0===r?"Filter":r,u=e.groupedOptions,h=void 0===u?[]:u,d=(e.optionToGroup,e.groupColors),m=void 0===d?[]:d,p=e.groupColorsDark,f=void 0===p?[]:p,g=Object(l.d)(t),b=Object(c.a)(g,2),v=b[0],y=b[1],w=Object(i.useState)(v),x=Object(c.a)(w,2),A=x[0],E=x[1],k=J(A,350),O=Object(i.useCallback)((function(e){E(e.target.value.toLowerCase())}),[E]);Object(i.useEffect)((function(){y(k)}),[k,y]);var C=$();return o.a.createElement("div",{className:C.root},o.a.createElement("div",{className:C.filterBarBg}),o.a.createElement(D.a,{className:C.filterBar,variant:"outlined",margin:"dense",fullWidth:!0},o.a.createElement(z.a,{htmlFor:"filter"},o.a.createElement(j.a,{container:!0,direction:"row",alignItems:"center"},o.a.createElement(Q.a,{fontSize:"small"}),o.a.createElement("span",{style:{marginLeft:3}},s))),o.a.createElement(G.a,{id:"filter",label:o.a.createElement(j.a,{container:!0,direction:"row",alignItems:"center"},o.a.createElement(Q.a,{fontSize:"small"}),o.a.createElement("span",{style:{marginLeft:3}},s)),onChange:O,value:A})),o.a.createElement(q.a,null,h.map((function(e,i){return o.a.createElement(o.a.Fragment,{key:e.name},o.a.createElement(te,{key:e.name,group:e,stateWithGroup:n,colorCheckbox:m[i%m.length]||"inherit",colorText:f[i%f.length]||"inherit"}),e.options.map((function(r){return o.a.createElement(ee,{filterState:t,key:r,name:r,stateWithName:a,group:e,stateWithGroup:n,colorCheckbox:m[i%m.length]||"inherit",colorText:f[i%f.length]||"inherit"})})))}))))})),ne=Object(g.a)((function(e){return{logo:{height:"100%",padding:"0.1em",alignItems:"center",fontSize:"1em",lineHeight:"1em",fontWeight:"bold"},logoAbc:{fontSize:"2.75em",letterSpacing:"-0.075rem",paddingRight:"0.125em",fontWeight:900},logoEnhancer:{alignItems:"flex-start"}}})),ie=function(e){var t=ne();return o.a.createElement(j.a,{container:!0,className:t.logo,style:e.styles},o.a.createElement(j.a,{item:!0,className:t.logoAbc},"ABC"),o.a.createElement(j.a,{item:!0},o.a.createElement(j.a,{container:!0,direction:"column",className:t.logoEnhancer},o.a.createElement(j.a,{item:!0},"Enhancer-Gene"),o.a.createElement(j.a,{item:!0},"Connections"))))};ie.defaultProps={styles:{}};var oe=ie,re=a(39),se=a(508),ce=a(498),le=a(497),ue=a(242),he=a.n(ue),de=a(241),me=a.n(de),pe=o.a.memo(o.a.forwardRef((function(e,t){var a=e.onChange,n=e.onClear,r=e.className,s=void 0===r?"":r,l=e.label,u=void 0===l?"Select":l,h=e.accept,d=void 0===h?"*":h,m=e.color,p=void 0===m?"default":m,f=e.Icon,g=void 0===f?me.a:f,b=Object(B.a)({},e);delete b.onChange,delete b.onClear,delete b.className,delete b.file,delete b.label,delete b.accept,delete b.color,delete b.Icon;var v=Object(i.useState)(e.file||null),y=Object(c.a)(v,2),w=y[0],x=y[1],A=Object(i.useCallback)((function(e){var t=e.target.files;x(t[0]),a&&a(t[0],e)}),[a]),E=Object(i.useCallback)((function(){x(null),n&&n()}),[n]);return o.a.createElement(le.a,Object.assign({},b,{className:"r",ref:t}),o.a.createElement(M.a,{variant:w?"outlined":"contained",component:"label",className:s,color:p,disableElevation:!0,startIcon:o.a.createElement(g,null)},o.a.createElement("input",{accept:d,type:"file",onChange:A,hidden:!0}),w?w.name:u),o.a.createElement(M.a,{variant:"contained",disabled:!w,onClick:E,disableElevation:!0},o.a.createElement(he.a,{fontSize:"inherit"})))}))),fe=a(44),ge=a(146),be=a(151),ve=a.n(be),ye=function(e,t){var a=Math.max(2,Math.ceil(Math.sqrt(t.length))),n=new Float32Array(4*Math.pow(a,2));return t.forEach((function(e,t){n[4*t]=e[0],n[4*t+1]=e[1],n[4*t+2]=e[2],n[4*t+3]=e[3]})),[e.Texture.fromBuffer(n,a,a),a]},we=function(e,t,a,n,i){for(var o=a-t,r=Math.sign(o),s=Math.abs(o),c=2*i,l=Math.ceil(s/c),u=0;u<l;u++)e.moveTo(t+u*c*r,n),e.lineTo(t+(u*c+i)*r,n)},xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.c;return t(ve.a.parse(window.location.search)[e])},Ae=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.c,n=ve.a.parse(window.location.search),i=ve.a.stringify(Object(B.a)(Object(B.a)({},n),{},Object(re.a)({},e,a(t))),{strict:!1}),o="".concat(window.location.origin).concat(window.location.pathname,"?").concat(i);window.history.pushState({path:o},"",o)},Ee=function(e,t){var a;if(e.indexOf&&e.indexOf(":")>=0){var n=e.split(":"),i=Object(c.a)(n,2),o=i[0],r=i[1];a=t.chrPositions[o].pos+ +r}else a=+e;return a},ke=function(e,t,a){var n=e.toFixed(t);if(!a){for(;"0"===n[n.length-1];)n=n.substring(0,n.length-1);"."===n[n.length-1]&&(n=n.substring(0,n.length-1))}return n},Oe=function(){var e=[],t=null,a=1,n=[0,1],i=n[1]-n[0],o=[],r=!1,s=0,c=function(e,t){return e+t},l=function(){return t||a},u=function(){i=n[1]-n[0];var t=o.reduce(c,0);a=(i-t)/e.length,s=t+e.length*l()},h=function(t){var a=e.indexOf(t);if(-1!==a)return a*l()+o.slice(0,a+r).reduce(c,0)};return h.domain=function(t){return t?(e=Object(S.a)(t),u(),h):e},h.range=function(e){return e?(n=Object(S.a)(e),u(),h):n},h.bandwidth=function(){return l()},h.fixedBandwidth=function(e){return e?(t=e,u(),h):e},h.totalWidth=function(){return s},h.rangeSize=function(){return i},h.paddingInner=function(e){return e?(o=e,u(),h):o},h.paddingInnerZeroBased=function(e){return e?(r=e,u(),h):r},h},Ce=function(e){return void 0===e?void 0:"true"===e},je=function(e){return e.match(/^chr(\d+)[:.](\d+)(([-~+])(\d+))?(-chr(\d+)[:.](\d+))?$/)},Se=function(e){return e?e.replace(".",":"):e},Ne=function(e){return e?e.replace(":","."):e},Me=function(e,t){if(!e)return e;var a=e.split(":"),n=Object(c.a)(a,2),i=n[0],o=n[1];return"".concat(i,":").concat(+o+ +t)},Te=function(e){if(!e)return e;var t,a=e.split("-"),n=Object(c.a)(a,2),i=n[0],o=n[1],r=Se(i).split("~"),s=Object(c.a)(r,2);return i=s[0],t=s[1],[i,o=o?Se(o):Me(i,t||1)]},Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.c,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"+";if(!e)return e;var n=e[0].split(":"),i=Object(c.a)(n,2),o=i[0],r=i[1],s=e[1].split(":"),l=Object(c.a)(s,2),u=l[0],d=l[1];if(o===u){var m=Math.abs(+d-+r);return m<2?t(e[0]):m<1e5?"".concat(t(e[0])).concat(a).concat(m):"".concat(t(e[0]),"-").concat(d)}return e.map(t).join("-")},De=function(e){return Ie(e,Ne,"~")};function ze(){return(ze=Object(O.a)(k.a.mark((function e(t,a){var n,i,o,r,s,c,l,u,h,d,m,p,f,g=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.length>2&&void 0!==g[2]?g[2]:{},i=n.header,o=void 0===i||i,r=n.columnImportance,s=void 0===r?7:r,c=new ge.a,e.next=4,t.text();case 4:for(l=e.sent,u=l.split(/\r\n|\n/),h=+o;h<u.length;h++)d=u[h].split("\t"),m=Ee("".concat(d[0],":0"),a),p=Ee("".concat(d[0],":").concat(d[1]),a),f=Ee("".concat(d[0],":").concat(d[2]),a),c.insert([p,f],{chrOffset:m,xStart:p,xEnd:f,importance:+d[s],uid:"".concat(t.name,"-").concat(h),name:d[3],fields:d});return e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ge=function(e,t,a,n,i){var o=function(e,t){return ze.apply(this,arguments)}(e,a,i),r=fe.b.subscribe("localBed:requestTile",(function(e){var a=e.fileId,i=e.z,r=e.x,s=e.requestId;a===t&&o.then((function(e){var t=n.max_width/Math.pow(2,i),a=t*r,o=a+t,c=e.search([a,o]);fe.b.publish("localBed:tile:".concat(s),c)}))})),s=fe.b.subscribe("localBed:requestTilesetInfo",(function(e){var a=e.fileId,i=e.requestId;a===t&&fe.b.publish("localBed:tilesetInfo:".concat(i),n)}));return{destroy:function(){fe.b.unsubscribe(r),fe.b.unsubscribe(s)}}},Re=a(506);function Pe(e,t,a){var n=Object(l.d)(t),o=Object(c.a)(n,2),r=o[0],s=o[1];return[r,Object(i.useCallback)((function(t){s(t),Ae(e,t,a)}),[e,a,s])]}function Le(e,t,a){var n=Object(l.e)(t);Object(i.useMemo)((function(){Ae(e,n,a)}),[e,a,n])}var Be=1e-6,Fe=["#c76526","#6fb2e4","#eee462","#469b76","#3170ad","#dca237","#000000","#999999"],He=["#a65420","#4a7798","#999026","#3a8162","#295d90","#b7872e","#000000","#666666"],_e=["#f6e5db","#e7f2fb","#f2eda9","#e0eee8","#dde7f1","#f5e4c4","#d5d5d5","#ffffff"],We="https://higlass.io/api/v1/suggest/?d=OHJakQICQD6gTD7skx4EWA",Ue="https://resgen.io/api/v1/suggest/?d=VF5-RDXWTxidGMJU7FeaxA",Ze="e3lpYv5LSIiik7CFtuAMTw",Ye={categoryField:6,axisShowGroupSeparator:!0,axisNoGroupColor:!1,groups:[{label:"Mononuclear Phagocytes",categories:["THP1_LPS_4hr-Engreitz","THP_pmaLPS_ATAC_6h","CD14-positive_monocyte_treated_with_LPS_4h-Novakovic2016","CD14-positive_monocyte_treated_with_BG_1h-Novakovic2016","CD14-positive_monocyte_treated_with_RPMI_d6-Novakovic2016","THP1-Engreitz","THP_pmaLPS_ATAC_96h","CD14-positive_monocyte_treated_with_BG_d1-Novakovic2016","THP_pmaLPS_ATAC_72h","THP-1_monocyte-VanBortle2017","CD14-positive_monocyte_treated_with_LPS_d1-Novakovic2016","CD14-positive_monocyte-ENCODE","THP_pmaLPS_ATAC_2h","dendritic_cell_treated_with_Lipopolysaccharide_0_ng-mL_for_0_hour-Garber2017","CD14-positive_monocyte_treated_with_RPMI_1h-Novakovic2016","U937_LPS_4hr-Engreitz","CD14-positive_monocyte-Novakovic2016","dendritic_cell_treated_with_Lipopolysaccharide_100_ng-mL_for_6_hour-Garber2017","CD14-positive_monocyte_treated_with_BG_4h-Novakovic2016","THP_pmaLPS_ATAC_0h","HAP1","THP-1_macrophage-VanBortle2017","dendritic_cell_treated_with_Lipopolysaccharide_100_ng-mL_for_1_hour-Garber2017","U937-Engreitz","CD14-positive_monocyte_treated_with_RPMI_d1-Novakovic2016","CD14-positive_monocyte_treated_with_RPMI_4h-Novakovic2016","CD14-positive_monocyte_treated_with_LPS_d6-Novakovic2016","CD14-positive_monocyte_treated_with_LPS_1h-Novakovic2016","THP_pmaLPS_ATAC_24h","THP_pmaLPS_ATAC_1h","dendritic_cell_treated_with_Lipopolysaccharide_100_ng-mL_for_2_hour-Garber2017","CD14-positive_monocyte_treated_with_BG_d6-Novakovic2016","dendritic_cell_treated_with_Lipopolysaccharide_100_ng-mL_for_30_minute-Garber2017","THP_pmaLPS_ATAC_120h","dendritic_cell_treated_with_Lipopolysaccharide_100_ng-mL_for_4_hour-Garber2017","THP_pmaLPS_ATAC_48h","CD14-positive_monocytes-Roadmap","THP_pmaLPS_ATAC_12h"]},{label:"B Cells",categories:["Karpas-422-ENCODE","BJAB-Engreitz","BJAB_anti-IgM_anti-CD40_4hr-Engreitz","B_cell-ENCODE","OCI-LY7-ENCODE","GM12878-Roadmap","MM.1S-ENCODE","CD19-positive_B_cell-Roadmap","CD8-positive_alpha-beta_T_cell-ENCODE"]},{label:"T Cells",categories:["Jurkat_anti-CD3_PMA_4hr-Engreitz","Jurkat-Engreitz","CD3-positive_T_cell-Roadmap","CD4-positive_helper_T_cell-ENCODE","CD8-positive_alpha-beta_T_cell-Corces2016","thymus_fetal-Roadmap","CD4-positive_helper_T_cell-Corces2016","T-cell-ENCODE"]},{label:"Other haematopoietic cells",categories:["spleen-ENCODE","K562-Roadmap","CD56-positive_natural_killer_cells-Roadmap","erythroblast-Corces2016","CD34-positive_mobilized-Roadmap","megakaryocyte-erythroid_progenitor-Corces2016","natural_killer_cell-Corces2016","IMR90-Roadmap"]},{label:"Fibroblasts",categories:["foreskin_fibroblast-Roadmap","fibroblast_of_dermis-Roadmap","fibroblast_of_arm-ENCODE","astrocyte-ENCODE","fibroblast_of_lung-Roadmap"]},{label:"Epithelial",categories:["small_intestine_fetal-Roadmap","epithelial_cell_of_prostate-ENCODE","HCT116-ENCODE","MCF-7-ENCODE","adrenal_gland_fetal-ENCODE","H7","keratinocyte-Roadmap","MCF10A-Ji2017","pancreas-Roadmap","mammary_epithelial_cell-Roadmap","stomach-Roadmap","LoVo","A549_treated_with_ethanol_0.02_percent_for_1_hour-Roadmap","PC-9-ENCODE","H1-hESC-Roadmap","thyroid_gland-ENCODE","HT29","MDA-MB-231","iPS_DF_19.11_Cell_Line-Roadmap","large_intestine_fetal-Roadmap","Panc1-ENCODE","adrenal_gland-ENCODE","MCF10A_treated_with_TAM24hr-Ji2017","trophoblast_cell-ENCODE","H1_BMP4_Derived_Trophoblast_Cultured_Cells-Roadmap","uterus-ENCODE","body_of_pancreas-ENCODE","stomach_fetal-Roadmap","H9-Roadmap","transverse_colon-ENCODE","H1_BMP4_Derived_Mesendoderm_Cultured_Cells-Roadmap","breast_epithelium-ENCODE","induced_pluripotent_stem_cell-ENCODE","LNCAP","H1_Derived_Mesenchymal_Stem_Cells-Roadmap","ovary-Roadmap","sigmoid_colon-ENCODE","skeletal_muscle_myoblast-Roadmap","bipolar_neuron_from_iPSC-ENCODE","coronary_artery_smooth_muscle_cell-Miller2016","SK-N-SH-ENCODE","muscle_of_trunk_fetal-Roadmap"]},{label:"Other",categories:["adipose_tissue-ENCODE","HeLa-S3-Roadmap","hepatocyte-ENCODE","heart_ventricle-ENCODE","spinal_cord_fetal-ENCODE","coronary_artery-ENCODE","HepG2-Roadmap","muscle_of_leg_fetal-Roadmap","gastrocnemius_medialis-ENCODE","brite_adipose-Loft2014","placenta-Roadmap","liver-ENCODE","A673-ENCODE","white_adipose-Loft2014","cardiac_muscle_cell-ENCODE","osteoblast-ENCODE","H1_Derived_Neuronal_Progenitor_Cultured_Cells-Roadmap","endothelial_cell_of_umbilical_vein-Roadmap","NCCIT","myotube_originated_from_skeletal_muscle_myoblast-Roadmap","psoas_muscle-Roadmap","endothelial_cell_of_umbilical_vein_vegf_stim_4_hours-zhang2013","endothelial_cell_of_umbilical_vein_vegf_stim_12_hours-zhang2013"]}]},Ve=Ye.groups.map((function(e){return{name:e.label,options:e.categories}})),Qe=Ve.reduce((function(e,t){return t.options.forEach((function(a){e[a]=t.name})),e}),{}),Xe=Ve.flatMap((function(e){return e.options})),qe=Xe.reduce((function(e,t,a){return e[t]=a,e}),{}),Ke={rg:"https://resgen.io/api/v1",hg:"https://higlass.io/api/v1"},Je=Object.entries(Ke).reduce((function(e,t){var a=Object(c.a)(t,2),n=a[0];return e[a[1]]=n,e}),{}),$e=Je["https://resgen.io/api/v1"],et={type:"point-annotation",height:32,options:{axisPositionHorizontal:"right",markColor:"black",markColorFocus:"#cc0078",markSize:2,markOpacity:.33,markOpacityFocus:.66,valueColumn:7,name:"Variants",labelPosition:"topLeft",labelColor:"black",labelOpacity:.33,showMousePosition:!0,showGlobalMousePosition:!0,mousePositionColor:"black",toolTip:{name:{field:3},value:{field:6,numDecimals:2},other:[{label:"Post. Prob.",field:7,numDecimals:2}]}}},tt={zoom_step:1,max_length:3137161265,assembly:"hg19",chrom_names:"chr1\tchr2\tchr3\tchr4\tchr5\tchr6\tchr7\tchr8\tchr9\tchr10\tchr11\tchr12\tchr13\tchr14\tchr15\tchr16\tchr17\tchr18\tchr19\tchr20\tchr21\tchr22\tchrX\tchrY\tchrM\tchr6_ssto_hap7\tchr6_mcf_hap5\tchr6_cox_hap2\tchr6_mann_hap4\tchr6_apd_hap1\tchr6_qbl_hap6\tchr6_dbb_hap3\tchr17_ctg5_hap1\tchr4_ctg9_hap1\tchr1_gl000192_random\tchrUn_gl000225\tchr4_gl000194_random\tchr4_gl000193_random\tchr9_gl000200_random\tchrUn_gl000222\tchrUn_gl000212\tchr7_gl000195_random\tchrUn_gl000223\tchrUn_gl000224\tchrUn_gl000219\tchr17_gl000205_random\tchrUn_gl000215\tchrUn_gl000216\tchrUn_gl000217\tchr9_gl000199_random\tchrUn_gl000211\tchrUn_gl000213\tchrUn_gl000220\tchrUn_gl000218\tchr19_gl000209_random\tchrUn_gl000221\tchrUn_gl000214\tchrUn_gl000228\tchrUn_gl000227\tchr1_gl000191_random\tchr19_gl000208_random\tchr9_gl000198_random\tchr17_gl000204_random\tchrUn_gl000233\tchrUn_gl000237\tchrUn_gl000230\tchrUn_gl000242\tchrUn_gl000243\tchrUn_gl000241\tchrUn_gl000236\tchrUn_gl000240\tchr17_gl000206_random\tchrUn_gl000232\tchrUn_gl000234\tchr11_gl000202_random\tchrUn_gl000238\tchrUn_gl000244\tchrUn_gl000248\tchr8_gl000196_random\tchrUn_gl000249\tchrUn_gl000246\tchr17_gl000203_random\tchr8_gl000197_random\tchrUn_gl000245\tchrUn_gl000247\tchr9_gl000201_random\tchrUn_gl000235\tchrUn_gl000239\tchr21_gl000210_random\tchrUn_gl000231\tchrUn_gl000229\tchrUn_gl000226\tchr18_gl000207_random",chrom_sizes:"249250621\t243199373\t198022430\t191154276\t180915260\t171115067\t159138663\t146364022\t141213431\t135534747\t135006516\t133851895\t115169878\t107349540\t102531392\t90354753\t81195210\t78077248\t59128983\t63025520\t48129895\t51304566\t155270560\t59373566\t16571\t4928567\t4833398\t4795371\t4683263\t4622290\t4611984\t4610396\t1680828\t590426\t547496\t211173\t191469\t189789\t187035\t186861\t186858\t182896\t180455\t179693\t179198\t174588\t172545\t172294\t172149\t169874\t166566\t164239\t161802\t161147\t159169\t155397\t137718\t129120\t128374\t106433\t92689\t90085\t81310\t45941\t45867\t43691\t43523\t43341\t42152\t41934\t41933\t41001\t40652\t40531\t40103\t39939\t39929\t39786\t38914\t38502\t38154\t37498\t37175\t36651\t36422\t36148\t34474\t33824\t27682\t27386\t19913\t15008\t4262",tile_size:1024,max_zoom:22,max_width:4294967296,min_pos:[1],max_pos:[3137161265],header:"chrom1\tstart1\tend1\tchrom2\tstart2\tend2\ttargetGene\tscore\tstrand1\tstrand2\tcellType",version:2,coordSystem:""},at={editable:!1,trackSourceServers:["//higlass.io/api/v1"],views:[{uid:"context",genomePositionSearchBox:{autocompleteServer:"//higlass.io/api/v1",autocompleteId:"OHJakQICQD6gTD7skx4EWA",chromInfoServer:"//higlass.io/api/v1",chromInfoId:"hg19",visible:!0},chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",tracks:{top:[{type:"combined",uid:"chroms-viewport",height:12,contents:[{type:"horizontal-chromosome-labels",options:{color:"#999999",stroke:"white",fontSize:10,fontIsLeftAligned:!0,showMousePosition:!1,mousePositionColor:"#000000"},tilesetUid:"ADfY_RtsQR6oKOMyrq6qhw",height:12,server:"https://resgen.io/api/v1",uid:"chroms"},{uid:"viewport-details-chroms",type:"viewport-projection-horizontal",fromViewUid:"details",height:12,options:{projectionFillColor:"#cc0078",projectionStrokeColor:"#cc0078",projectionFillOpacity:.3,projectionStrokeOpacity:.3,strokeWidth:1}}]},{type:"combined",uid:"genes-tss-viewport",height:48,contents:[{type:"horizontal-gene-annotations",uid:"genes",height:48,server:"https://resgen.io/api/v1",tilesetUid:"NCifnbrKQu6j-ohVWJLoJw",options:{fontSize:9,plusStrandColor:"black",minusStrandColor:"black",geneAnnotationHeight:10,geneLabelPosition:"outside",geneStrandSpacing:.5,showMousePosition:!0,showGlobalMousePosition:!0,mousePositionColor:"black"}},{type:"tss",uid:"tss",height:48,server:"https://resgen.io/api/v1",tilesetUid:"QRtec09sQjuVmUaB_uUFEw",options:{fontSize:9,plusStrandColor:"black",minusStrandColor:"black",geneAnnotationHeight:12,geneLabelPosition:"outside",geneStrandSpacing:2,maxPerTile:25}},{uid:"viewport-details-genes",type:"viewport-projection-horizontal",fromViewUid:"details",height:48,options:{projectionFillColor:"#cc0078",projectionStrokeColor:"#cc0078",projectionFillOpacity:.3,projectionStrokeOpacity:.3,strokeWidth:1}}]},{type:"combined",uid:"variants",height:32,contents:[{type:"point-annotation",uid:"ibd-snps",server:"https://resgen.io/api/v1",tilesetUid:"VF5-RDXWTxidGMJU7FeaxA",height:32,options:{axisPositionHorizontal:"right",markColor:"black",markColorFocus:"#cc0078",markSize:2,markOpacity:.33,markOpacityFocus:.66,valueColumn:7,focusRegion:[1761419571,1761419621],name:"IBD Variants",labelPosition:"topLeft",labelColor:"#757575",showMousePosition:!0,showGlobalMousePosition:!0,mousePositionColor:"black",toolTip:{name:{field:3},value:{field:6,numDecimals:2},other:[{label:"Post. Prob.",field:7,numDecimals:2}]}}}]},{type:"combined",uid:"arcs-stacked-bars",height:72,contents:[{type:"1d-arcs",uid:"arcs",server:"https://resgen.io/api/v1",tilesetUid:Ze,height:72,options:{labelPosition:"hidden",strokeColor:"#808080",strokeWidth:1,strokeOpacity:.05,arcStyle:"circle",startField:1,endField:4,filter:{set:Xe,field:6}}},{type:"stacked-bar",server:"https://resgen.io/api/v1",tilesetUid:Ze,height:72,uid:"stacked-bars",options:{binSize:4,axisAlign:"right",axisPositionHorizontal:"right",labelPosition:"topLeft",markColor:"black",markColorFocus:"#cc0078",markSize:4,markOpacity:.33,labelColor:"black",offsetField:0,startField:4,endField:4,importanceField:5,importanceDomain:[0,1],focusRegion:[1761419571,1761419621],name:"Enhancer regions",stratification:Ye,showMousePosition:!0,showGlobalMousePosition:!0,mousePositionColor:"black"}}]},{type:"stratified-bed",server:"https://resgen.io/api/v1",tilesetUid:Ze,height:413,uid:"indicatorByCellTypes",options:{axisAlign:"right",legendAlign:"left",labelPosition:"hidden",markColor:"black",markColorHighlight:"#bf0071",markColorDehighlight:"#bbbbbb",markSize:4,markMinWidth:4,markHeight:3,rowHeight:3,markOpacity:.33,arcStyle:"indicator",indicatorStyle:"category-rect",labelColor:"black",geneField:3,importanceField:5,importanceDomain:[0,1],name:"By Celltype",axisPositionHorizontal:"right",stratification:Ye,showMousePosition:!0,showGlobalMousePosition:!0,mousePositionColor:"black"}}]},overlays:[{uid:"region-focus",includes:["genes-tss-viewport","variants","arcs-stacked-bars","indicatorByCellTypes"],options:{extent:[[1761419596,1761419597]],minWidth:3,fill:"#cc0078",fillOpacity:.05,strokeWidth:0,outline:"#cc0078",outlineOpacity:.33,outlineWidth:1,outlinePos:["left","right"]}},{uid:"gene-focus",includes:["genes-tss-viewport"],options:{extent:[],minWidth:3,fill:"#cc0078",fillOpacity:.25,stroke:"#cc0078",strokeWidth:0,outlineWidth:0}},{uid:"tss-overlays",includes:["chroms","genes-tss-viewport","variants","arcs-stacked-bars","indicatorByCellTypes"],options:{extent:[],minWidth:1,fill:"black",fillOpacity:.05,strokeWidth:0,outline:"black",outlineOpacity:.1,outlineWidth:1,outlinePos:["left"]}}],metaTracks:[{uid:"tss-overlays-meta",type:"annotation-overlay",overlaysTrack:"tss-overlays",options:{annotationTracks:["tss"]}}],layout:{w:12,h:12,x:0,y:0},initialXDomain:[1761366260,1761603836],initialYDomain:[1761366260,1761603836]}]},nt=[120,36,54,20,80,35,101,49,44,23,30,66,5,26,15,105,57,56,74,84,79,93,106,107,34,28,25,55,121,94,58,69,67,63,126,71,72,47,11,46,39,113,29,60,45,76,21,103,129,13,128,90,104,32,109,27,9,130,95,86,53,73,50,48,78,14,92,124,31,114,64,88,12,10,38,68,3,111,70,22,61,98,6,123,118,43,37,65,81,62,33,1,24,122,83,75,112,40,97,16,117,87,19,125,7,102,116,77,8,17,82,115,89,119,18,4,108,59,127,91,0,100,85,110,99,2,96,51,41,52,42],it=Ye.groups.reduce((function(e,t,a){var n={label:t.label,color:t.axisLabelColor,background:t.axisLabelBackground,index:a};return t.categories.forEach((function(t){e[t]=n})),e}),{}),ot={zoomFixed:!1,editable:!1,trackSourceServers:["//higlass.io/api/v1"],views:[{uid:"details",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",tracks:{top:[{uid:"chroms",type:"horizontal-chromosome-labels",server:"https://resgen.io/api/v1",tilesetUid:"ADfY_RtsQR6oKOMyrq6qhw",height:17,options:{color:"#999999",stroke:"white",fontSize:10,fontIsLeftAligned:!0,showMousePosition:!1,mousePositionColor:"#000000"}},{uid:"genes",type:"horizontal-gene-annotations",server:"https://resgen.io/api/v1",tilesetUid:"NCifnbrKQu6j-ohVWJLoJw",height:48,options:{fontSize:9,plusStrandColor:"black",minusStrandColor:"black",geneAnnotationHeight:10,geneLabelPosition:"outside",geneStrandSpacing:.5,showMousePosition:!0,showGlobalMousePosition:!0,mousePositionColor:"black"}},{type:"combined",uid:"variants",height:32,contents:[{type:"point-annotation",uid:"ibd-snps",server:"https://resgen.io/api/v1",tilesetUid:"VF5-RDXWTxidGMJU7FeaxA",height:32,options:{axisPositionHorizontal:"right",markColor:"black",markColorFocus:"#cc0078",markSize:2,markOpacity:.33,markOpacityFocus:.66,valueColumn:7,focusRegion:[1761419571,1761419621],name:"IBD Variants",labelPosition:"topLeft",labelColor:"#757575",showMousePosition:!0,showGlobalMousePosition:!0,mousePositionColor:"black",toolTip:{name:{field:3},value:{field:6,numDecimals:2},other:[{label:"Post. Prob.",field:7,numDecimals:2}]}}}]},{uid:"dna-accessibility",type:"ridge-plot",server:"https://resgen.io/api/v1",tilesetUid:"Uz1_tEABQf-uzktblvBKSQ",height:2364,options:{name:"DNA Accessibility",labelPosition:"outerBottom",labelShowResolution:!1,labelShowAssembly:!1,markArea:!0,markColor:"#444444",markResolution:256,valueScaling:"exponential",colorRange:["#ffffff","#000000"],rowHeight:24,rowPadding:-6,rowNormalization:!0,rowSelections:nt,rowIdToCategory:{fn:"replace",args:[".accessibility",""]},rowCategories:it,showRowLabels:!0,rowLabelSize:10,showMousePosition:!0,showGlobalMousePosition:!0,mousePositionColor:"black"}}]},overlays:[{uid:"region-focus",includes:["genes","variants","dna-accessibility"],options:{extent:[],minWidth:3,fill:"#cc0078",fillOpacity:.05,strokeWidth:0,outline:"#cc0078",outlineOpacity:.33,outlineWidth:1,outlinePos:["left","right"]}}],layout:{w:12,h:12,x:0,y:0},initialXDomain:[1761419096,1761420097],initialYDomain:[1761419096,1761420097]}]},rt=new Set(["input","textarea"]),st=function(e){return e.views[0].overlays[1]&&e.views[0].overlays[1].options.extent&&e.views[0].overlays[1].options.extent.length?Object(S.a)(e.views[0].overlays[1].options.extent[0]):null},ct=function(e){var t=e.views[0].tracks.top[2],a=null;if("combined"===t.type){if(!t.contents[0])return a;a=t.contents[0].options.focusRegion}else a=t.options.focusRegion;return a?Object(S.a)(a):a},lt=function(e){return function(t){var a=t.views[0].tracks.top[2];return"combined"===a.type&&(a.contents=e.reduce((function(e,t){var a=Object(h.b)(et);return t.server&&t.tilesetUid?(a.server=t.server,a.tilesetUid=t.tilesetUid,a.uid="variants-".concat(t.tilesetUid),t.label?a.options.name=t.label:delete a.options.name,e.push(a)):t.file&&(a.data={type:"localBed",id:t.file.name},a.uid="variants-".concat(t.file.name),a.options.name=t.label||"Variants",e.push(a)),e}),[]),a.height=32*(a.contents.length>0)),t}},ut=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(a){if(Array.isArray(e)&&null!==e){var n=[e[0]-.5,e[1]-.5];t.forEach((function(e){!function(e,t){"combined"===e.type?e.contents.forEach((function(e){e.options.focusRegion=t})):e.options.focusRegion=t}(a.views[0].tracks.top[e],n)})),a.views[0].overlays[0].options.extent=[n]}else t.forEach((function(e){var t;"combined"===(t=a.views[0].tracks.top[e]).type?t.contents.forEach((function(e){delete e.options.focusRegion})):delete t.options.focusRegion})),a.views[0].overlays[0].options.extent=[];return a}},ht=function(e){return function(t){var a=t.views[0].tracks.top[2];return"combined"===a.type?a.contents.forEach((function(t){t.options.valueColumn="pValue"===e?7:8})):a.options.valueColumn="pValue"===e?7:8,t}},dt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.force,i=void 0!==n&&n;return function(a){var n=!0===i||Object(h.d)(i)&&i(),o=Object(S.a)(a.views[0].initialXDomain),r=st(a),s=ct(a);return Number.isNaN(+e)||(o[0]=e),Number.isNaN(+t)||(o[1]=t),r&&!n&&(o[0]=r[0]-1e5,o[1]=r[1]+1e5),s&&!n&&(o[0]=Math.min(o[0],s[0]-1e5),o[1]=Math.max(o[1],s[1]+1e5)),a.views[0].initialXDomain=o,a}},mt=function(e,t,a){var n=xe(e,a);return void 0===n?t:n},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.reduce((function(e,t){return e.add(t),e}),new Set);return function(e){return void 0===e||t.has(e)?e:"true"===e}}(["intro"]),ft=function(e){if(!e||!Array.isArray(e)||e.length>1)return"";var t=e[0].tilesetUid,a=Je[e[0].server]===$e?null:Je[e[0].server],n=7===e[0].columnPvalue?null:e[0].columnPvalue,i=8===e[0].columnPosteriorProbability?null:e[0].columnPosteriorProbability;return t&&void 0!==a?[t,a,n,i].filter(h.c).join(":"):""},gt=Object(l.b)({key:"sampleFilterState",default:""}),bt=Object(l.c)({key:"sampleSelection",get:function(e){var t=e.get;return Xe.map((function(e){return t(yt(e)).checked}))}}),vt=Object(l.c)({key:"selectedSamples",get:function(e){var t=e.get;return Xe.filter((function(e){return t(yt(e)).checked}))}}),yt=Object(Re.a)((function(e){return Object(l.b)({key:"sample-".concat(e),default:{checked:!0,visible:!0}})})),wt=Object(Re.a)((function(e){return Object(l.b)({key:"sampleGroup-".concat(e.name),default:{checked:!0,visible:!0,n:e.options.length,N:e.options.length}})}),(function(e){return e.name})),xt=Object(l.c)({key:"sampleGroupSelectionSizes",get:function(e){var t=e.get;return Ve.reduce((function(e,a){return e[a.name]=t(wt(a)).n,e}),{})}}),At=Object(l.b)({key:"variantTracks",default:mt("vt",Object(h.b)([{server:"https://resgen.io/api/v1",tilesetUid:"VF5-RDXWTxidGMJU7FeaxA",columnPvalue:7,columnPosteriorProbability:8,markColor:"black",label:"IBD Variants"}]),(function(e){if(e){var t=e.split(":"),a=Object(c.a)(t,4),n=a[0],i=a[1],o=void 0===i?$e:i,r=a[2],s=void 0===r?7:r,l=a[3];return void 0===n?n:[{server:Ke[o],tilesetUid:n,columnPvalue:s,columnPosteriorProbability:void 0===l?8:l,markColor:"black"}]}}))}),Et=Object(l.b)({key:"showVariantsSettings",default:!1}),kt=Object(l.b)({key:"showWelcome",default:mt("w",!0,pt)}),Ot=Object(l.b)({key:"dnaAccessLabelStyle",default:mt("dal","indicator")}),Ct=Object(l.b)({key:"dnaAccessRowNorm",default:mt("darn",!0,Ce)}),jt=Object(l.b)({key:"dnaAccessLabelShowInfos",default:mt("dai",!0,Ce)}),St=Object(l.b)({key:"focusGene",default:mt("g","")}),Nt=Object(l.b)({key:"focusGeneOption",default:null}),Mt=Object(l.b)({key:"focusRegion",default:mt("f","rs1250566",(function(e){return e&&je(e)?Te(e):e}))}),Tt=Object(l.b)({key:"focusRegionOption",default:mt("f",null,(function(e){if(!e||!je(e))return null;var t=Te(e),a=Object(c.a)(t,2),n=a[0],i=a[1];if(!n||!i)return null;var o=n.split(":"),r=Object(c.a)(o,2),s=r[0],l=r[1],u=i.split(":"),h=Object(c.a)(u,2);return{chrStart:s,chrEnd:h[0],txStart:+l,txEnd:+h[1],geneName:Ie([n,i]),type:"region"}}))}),It=Object(l.b)({key:"variantYScale",default:mt("vy","pValue")}),Dt=Object(l.b)({key:"enhancerRegionsHideUnfocused",default:mt("erhu",!1,Ce)}),zt=Object(l.b)({key:"enhancerRegionsColorEncoding",default:mt("erc","solid")}),Gt=Object(l.b)({key:"enhancerRegionsShowInfos",default:mt("eri",!0,Ce)}),Rt=Object(l.b)({key:"enhancerGenesShowInfos",default:mt("egi",!0,Ce)}),Pt=Object(l.b)({key:"enhancerGenesPadding",default:mt("egp",!1,Ce)}),Lt=Object(l.b)({key:"enhancerGenesCellEncoding",default:mt("egce","max-score")}),Bt=Object(l.b)({key:"enhancerGenesSvg",default:null}),Ft=Object(l.b)({key:"higlassEnhancerRegions",default:null}),Ht=Object(l.b)({key:"higlassDnaAccess",default:null}),_t=Object(Re.a)((function(e){return Object(l.b)({key:"xDomainStart-".concat(e.totalLength),default:mt("xs",e.absToChr(1761366260).slice(0,2).join(":"),Se)})}),(function(e){return e.totalLength})),Wt=Object(Re.a)((function(e){return Object(l.b)({key:"xDomainEnd-".concat(e.totalLength),default:mt("xe",e.absToChr(1761603836).slice(0,2).join(":"),Se)})}),(function(e){return e.totalLength})),Ut=Object(Re.a)((function(e){return Object(l.c)({key:"xDomainStartAbs-".concat(e.totalLength),get:function(t){var a=(0,t.get)(_t(e));return Ee(a,e)}})}),(function(e){return e.totalLength})),Zt=Object(Re.a)((function(e){return Object(l.c)({key:"xDomainEndAbs-".concat(e.totalLength),get:function(t){var a=(0,t.get)(Wt(e));return Ee(a,e)}})}),(function(e){return e.totalLength})),Yt=Object(Re.a)((function(e){return Object(l.c)({key:"focusGeneStart-".concat(e.totalLength),get:function(t){var a=(0,t.get)(Nt);return a?Ee("".concat(a.chr,":").concat(a.txStart),e):null}})}),(function(e){return e.totalLength})),Vt=Object(Re.a)((function(e){return Object(l.c)({key:"focusGeneEnd-".concat(e.totalLength),get:function(t){var a=(0,t.get)(Nt);return a?Ee("".concat(a.chr,":").concat(a.txEnd),e):null}})}),(function(e){return e.totalLength})),Qt=Object(Re.a)((function(e){return Object(l.c)({key:"focusRegionAbs-".concat(e.totalLength),get:function(t){var a=(0,t.get)(Tt);if(!a)return null;if(a.chrStart)return[Ee("".concat(a.chrStart,":").concat(a.txStart),e),Ee("".concat(a.chrEnd,":").concat(a.txEnd),e)];var n=Ee("".concat(a.chr,":").concat(a.txStart),e);return[n,n+1]}})}),(function(e){return e.totalLength})),Xt=Object(l.c)({key:"focusVariantRel",get:function(e){var t=(0,e.get)(Tt);return t?t.chrStart&&t.chrEnd&&t.chrStart!==t.chrEnd?Number.NaN:t.chrStart?+t.txStart+(+t.txEnd-+t.txStart)/2:+t.txStart:null}}),qt=Object(l.c)({key:"focusRegionStr",get:function(e){var t=(0,e.get)(Tt);if(!t)return null;var a=t.chrStart?["".concat(t.chrStart,":").concat(t.txStart),"".concat(t.chrEnd,":").concat(t.txEnd)]:["".concat(t.chr,":").concat(t.txStart),"".concat(t.chr,":").concat(t.txEnd)];return Ie(a)}}),Kt=Object(Re.a)((function(e){return Object(l.c)({key:"dnaAccessXDomain",get:function(t){var a=t.get;return function(e,t,a,n,i){var o,r=i-n,s=n+r/2;if(e){var c=(o=e)[0]+(o[1]-o[0])/2;return r<5e3&&Math.abs(s-c)<1e3?[n,i]:[e[0]-2500,e[1]+2500]}if(t&&a){var l=t+(a-t)/2;return r<5e3&&s>t&&s<a?[n,i]:[l-2500,l+2500]}return[n,i]}(a(Qt(e)),a(Yt(e)),a(Vt(e)),a(Ut(e)),a(Zt(e)))}})}),(function(e){return e.totalLength})),Jt=function(){return Pe("g",St)},$t=function(e){return Pe("f",Mt,(function(e){return Array.isArray(e)?De(e):e}))},ea=function(){return Pe("dai",jt)},ta=function(e){return Pe("s",_t(e),Ne)},aa=function(e){return Pe("e",Wt(e),Ne)},na=function(){return Pe("eri",Gt)},ia=function(){return Pe("egi",Rt)},oa=Object(g.a)((function(e){return{note:{color:e.palette.grey[400],marginTop:"1em"},title:{fontSize:"1.5rem",fontWeight:700,margin:"0.5rem 0 0 0"},buttonNormal:{minWidth:"10.5rem",margin:"0 0.5rem"},buttonActive:{minWidth:"10.5rem",marginLeft:"0.5rem",color:"white",background:"#cc0078 linear-gradient(45deg, #cc0078 30%, #cc0066 90%)",boxShadow:"0 1px 6px 1px rgba(255, 76, 151, .3)","&:hover":{boxShadow:"0 1px 6px 1px rgba(255, 76, 151, .5)",background:"#d90080 linear-gradient(45deg, #d90080 30%, #d9006c 90%)"},"&:focus":{boxShadow:"0 1px 6px 1px rgba(255, 76, 151, .5)"}},trackList:{margin:"16px 0"}}})),ra=Object(g.a)((function(e){return{icon:{color:e.palette.grey[400],"&:hover":{color:"black"}},grow:{flex:1},separator:{padding:"0 8px"},server:{flex:1,marginRight:"2px"},tilesetUid:{flex:1,marginLeft:"2px"},propInput:{flex:1,marginLeft:"2px",marginRight:"2px","&:first-child":{marginLeft:0},"&:last-child":{marginRight:0}}}})),sa=Object(g.a)((function(e){return{arrow:{color:"black"},tooltip:{backgroundColor:"black"}}})),ca=Object(g.a)((function(e){return{tooltip:{display:"none"}}})),la=o.a.memo((function(e){var t=e.config,a=e.onChange,n=Object(i.useState)(t),r=Object(c.a)(n,2),s=r[0],l=r[1],u=function(e){return function(t){var a=t.target.value;l((function(t){return Object(B.a)(Object(B.a)({},t),{},Object(re.a)({},e,a))}))}};Object(i.useEffect)((function(){s!==t&&a(s)}),[a,s,t]);var h=Boolean(s.server||s.tilesetUid),d=Boolean(s.whatever),m=ra(),p=sa(),f=ca();return o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{alignItems:"center",container:!0},o.a.createElement(j.a,{className:m.grow,item:!0},o.a.createElement(j.a,{alignItems:"center",container:!0},o.a.createElement(ce.a,{classes:d?p:f,title:"Setting a server will clear the file!",placement:"top",arrow:!0},o.a.createElement(se.a,{label:"Server URL",variant:"outlined",size:"small",value:s.server||"",onChange:function(e){var t=e.target.value;l((function(e){return Object(B.a)(Object(B.a)({},e),{},{server:t,file:void 0})}))},className:m.server})),o.a.createElement(ce.a,{classes:d?p:f,title:"Setting a tileset ID will clear the file!",placement:"top",arrow:!0},o.a.createElement(se.a,{label:"Tileset ID",variant:"outlined",size:"small",value:s.tilesetUid||"",onChange:function(e){var t=e.target.value;l((function(e){return Object(B.a)(Object(B.a)({},e),{},{tilesetUid:t,file:void 0})}))},className:m.tilesetUid})))),o.a.createElement(j.a,{item:!0},o.a.createElement(K.a,{className:m.separator},"or")),o.a.createElement(j.a,{item:!0},o.a.createElement(ce.a,{classes:h?p:f,title:"Selecting a file will clear the server and tileset ID!",placement:"top",arrow:!0},o.a.createElement(pe,{file:s.file,onChange:function(e){l((function(t){return Object(B.a)(Object(B.a)({},t),{},{file:e,server:void 0,tilesetUid:void 0})}))},onClear:function(){l((function(e){return Object(B.a)(Object(B.a)({},e),{},{file:void 0})}))}})))),o.a.createElement(j.a,{alignItems:"center",container:!0},o.a.createElement(se.a,{label:"Name",variant:"outlined",margin:"normal",size:"small",value:s.label||"",onChange:u("label"),className:m.propInput}),o.a.createElement(se.a,{label:"Column P-Value",variant:"outlined",margin:"normal",size:"small",type:"number",min:"1",step:"1",value:s.columnPvalue||7,onChange:u("columnPvalue"),className:m.propInput}),o.a.createElement(se.a,{label:"Column Post. Prob",variant:"outlined",margin:"normal",size:"small",type:"number",min:"1",step:"1",value:s.columnPosteriorProbability||8,onChange:u("columnPosteriorProbability"),className:m.propInput})))})),ua=o.a.memo((function(e){var t=e.closeHandler,a=A(),n=$t()[1],r=Pe("vt",At,ft),s=Object(c.a)(r,2),u=s[0],d=s[1],m=Object(l.d)(Tt),p=Object(c.a)(m,2),f=p[0],g=p[1],b=Object(i.useState)((function(){return Object(h.b)(u)})),v=Object(c.a)(b,2),y=v[0],w=v[1],x=Object(i.useState)(!1),E=Object(c.a)(x,2),k=E[0],O=E[1],C=Object(i.useRef)([]),j=Object(i.useRef)(u);Object(i.useEffect)((function(){j.current=u}),[u]);var N=Object(i.useCallback)((function(e){return function(t){w((function(a){var n=Object(S.a)(a);return n[e]=t,n})),O(!0)}}),[]),T=Object(i.useCallback)((function(){var e=Object(h.b)(y);C.current.forEach((function(e){e.destroy()})),C.current=e.reduce((function(e,t){if(t.file){var n=Object(B.a)(Object(B.a)({},tt),{},{name:t.file});e.push(Ge(t.file,t.file.name,a,n,{header:!0,columnImportance:7}))}return e}),[]),d(e),(e.some((function(e,t){return e.server!==j.current[t].server}))||e.some((function(e,t){return e.tilesetUid!==j.current[t].tilesetUid}))||e.some((function(e,t){return e.file!==j.current[t].file})))&&(n((function(e){return Object(h.f)(e)?["".concat(f.chrStart,":").concat(f.txStart),"".concat(f.chrEnd,":").concat(f.txEnd)]:e})),g((function(e){return e.chr?{chrStart:e.chr,chrEnd:e.chr,txStart:e.txStart,txEnd:e.txEnd,geneName:Ie(["".concat(e.chr,":").concat(e.txStart),"".concat(e.chr,":").concat(e.txEnd)]),type:"region"}:e}))),t()}),[a,y,t,f,d,n,g]),I=oa();return o.a.createElement(o.a.Fragment,null,o.a.createElement(K.a,{id:"title",align:"center",variant:"h5",component:"h2",noWrap:!0,className:I.title},"Variant Track"),o.a.createElement("p",{id:"description"},"Variants can be loaded from a remote"," ",o.a.createElement("code",null,o.a.createElement("a",{href:"https://docs.higlass.io/data_preparation.html#bed-files",target:"_blank",rel:"noopener noreferrer"},".beddb"))," ","or a local ",o.a.createElement("code",null,".bed")," file. To access a remote file, please enter the URL of the"," ",o.a.createElement("a",{href:"https://docs.higlass.io/higlass_server.html",target:"_blank",rel:"noopener noreferrer"},"HiGlass server")," ","and the track ID. To access a local file please select it with via the file selection."),o.a.createElement("div",{className:I.trackList},y.map((function(e,t){return o.a.createElement(la,{key:t,config:e,onChange:N(t)})}))),o.a.createElement(K.a,{align:"center"},o.a.createElement(M.a,{className:I.buttonNormal,onClick:t,variant:"contained",disableElevation:!0},"Cancel"),o.a.createElement(M.a,{className:k?I.buttonActive:I.buttonNormal,onClick:k?T:t,variant:"contained",disableElevation:!0},k?"Save":"Okay")))})),ha=a(455),da=a(245),ma=a.n(da),pa=a(246),fa=a.n(pa),ga=a(247),ba=a.n(ga),va=a(248),ya=a.n(va),wa=a(249),xa=a.n(wa),Aa=a(250),Ea=a.n(Aa),ka=a(251),Oa=a.n(ka),Ca=Object(g.a)((function(e){return{root:{"&>p":{fontSize:"1.125em"}},title:{display:"flex",justifyContent:"center",margin:e.spacing(2,0,3)},note:{color:e.palette.grey[400],marginTop:"1em"},icon:{color:e.palette.grey[400],"&:hover":{color:"black"}},showIntro:{minWidth:"10.5rem",marginRight:"0.5rem"},startExploring:{minWidth:"10.5rem",marginLeft:"0.5rem",color:"white",background:"#cc0078 linear-gradient(45deg, #cc0078 30%, #cc0066 90%)",boxShadow:"0 1px 6px 1px rgba(255, 76, 151, .3)","&:hover":{boxShadow:"0 1px 6px 1px rgba(255, 76, 151, .5)",background:"#d90080 linear-gradient(45deg, #d90080 30%, #d9006c 90%)"},"&:focus":{boxShadow:"0 1px 6px 1px rgba(255, 76, 151, .5)"}},introTitle:{fontSize:"2.75em",letterSpacing:"-0.075rem",fontWeight:900,textTransform:"uppercase","&+h3":{marginTop:16}},introHeadline:{fontSize:"1.5em",fontWeight:700,margin:e.spacing(6,0,2,0)},introSubHeadline:{fontSize:"1.125em",fontWeight:700,margin:e.spacing(2,0,1,0)},introStartExploring:{margin:e.spacing(4,0,2,0)},figure:{margin:e.spacing(4,6),"& img":{width:"100%",height:"auto"}}}})),ja=o.a.memo((function(e){var t=e.closeHandler,a=e.openIntroHandler,n=e.closeIntroHandler,i=Object(l.e)(kt),r=Ca();return"intro"===i?o.a.createElement("div",{className:r.root},o.a.createElement(K.a,{id:"intro-title",align:"center",variant:"h2",component:"h2",noWrap:!0,className:r.introTitle},"Introduction"),o.a.createElement(K.a,{id:"intro-enhancer-view",align:"center",variant:"h3",component:"h3",noWrap:!0,className:r.introHeadline},"1. Enhancer-Centered View"),o.a.createElement("p",null,"The goal of this web application is to provide a visual interface to enhancer-gene connections predicted by the"," ",o.a.createElement("em",null,"Activity-By-Contact")," (ABC) model. Enhancers are genomic regions that have the ability to regulate the activity of nearby genes. One way to visualize this regulatory connection is by drawing an arc between the enhancer region and the gene as follows:"),o.a.createElement("figure",{className:r.figure},o.a.createElement("img",{src:ma.a,alt:"Enhancer-Gene Connection Overview"})),o.a.createElement("p",null,"However, enhancers are not always active in every cell type or sample. Hence, in reality the looks more like below where ",o.a.createElement("em",null,"Enhancer 1")," ","is inactive in ",o.a.createElement("em",null,"Sample 1")," while ",o.a.createElement("em",null,"Enhancer 2")," is inactive in ",o.a.createElement("em",null,"Sample 3"),"."),o.a.createElement("figure",{className:r.figure},o.a.createElement("img",{src:fa.a,alt:"Enhancer-Gene Connection By Sample"})),o.a.createElement("p",null,"Since we have predicted enhancer-gene connections across 131 samples, showing all arcs at once or having a separate arc track for each sample is not very effective visually. In other words, it would either be hard to differentiate samples in case we show all arcs in one track or it would be impossible to get a complete overview due the vertical space consumption if we showed a separate arc track for each sample."),o.a.createElement("p",null,"Therefore, we separately visualize the distribution of outgoing and incoming arcs as shown below. Each sample is represented by a row and an active enhancer region (outgoing arc) is displayed as a rectangle. For the regulated genes, we are drawing a bar that encodes the number of enhancers (i.e., incoming arcs) regulating this gene as the height."),o.a.createElement("figure",{className:r.figure},o.a.createElement("img",{src:ba.a,alt:"Optimized Enhancer-Gene Connection Representation"})),o.a.createElement("p",null,"While we loose some details (no worries, we will bring those details back), this representation is visually much more scalable. To make this visualization more effective we can sort similar samples into groups and add color to help distinguish between the different sample groups."),o.a.createElement("figure",{className:r.figure},o.a.createElement("img",{src:ya.a,alt:"Sample-Grouped Enhancer-Gene Connection Representation"})),o.a.createElement("p",null,"As mentioned above, by separetly visualizing the distribution of enhancer regions and the distribution of sample groups regulating genes, we are loosing the information which enhancer region regulates which gene. We're going to bring this information back by allowing you to focus on specific regions and sample groups. For instance, in the following example we focused on ",o.a.createElement("em",null,"Gene 2"),", which will subsequently highlight all enhancers regulating this gene (shown in pink) and also bring back the arcs to hint at enhancers outside the current field of view."),o.a.createElement("figure",{className:r.figure},o.a.createElement("img",{src:xa.a,alt:"Focused Enhancer-Gene Connection Representation"})),o.a.createElement("p",null,"In the application there are two ways to enable focusing. First, you can click on one of the following visual elements: a gene, a variant, or an enhancer region. To select a custom focus region you can also brush on the genomic position track. Second, you can search for and enter a gene (e.g., PPIF), variant (e.g., rs1250566), or custom region (e.g., chr1:1-chr2:2, chr10:81230693-80993117, or chr10:81230693+10000) in the search bar at the top."),o.a.createElement(K.a,{id:"intro-enhancer-view-sample-filtering",align:"center",variant:"h4",component:"h4",noWrap:!0,className:r.introSubHeadline},"Sample Filtering"),o.a.createElement("p",null,"In addition to focusing on certain enhancer-gene connections, you can also filter out samples using the list on the side bar. Note that the filtering will be applied to all visualizations including the Gene-Centered View and the DNA Accessibility View."),o.a.createElement(K.a,{id:"intro-enhancer-view-genetic-variations",align:"center",variant:"h4",component:"h4",noWrap:!0,className:r.introSubHeadline},"Custom Genetic Variations"),o.a.createElement("p",null,"To identify critical enhancers, our application includes a track for displaying genetic point variations, e.g., disease risk variants. These variants are visualized as points that are position either by their associated p-value or posterior probability along the y-axis. By default, we show ",o.a.createElement("abbr",{title:""},"IBD"),"-associated variants but you can load your variants if you like by clicking on ",o.a.createElement("em",null,"Edit Variants")," in the side bar. There are two options for loading custom variants. You can either specify the URL of a"," ",o.a.createElement("a",{href:"https://docs.higlass.io/higlass_server.html",target:"_blank",rel:"noopener noreferrer"},"HiGlass server")," ","(which is the underlying genome browser toolkit we are using) and tileset UUID of your"," ",o.a.createElement("a",{href:"https://docs.higlass.io/data_preparation.html#bed-files",target:"_blank",rel:"noopener noreferrer"},o.a.createElement("code",null,".beddb")," track"),". Or you can load a local",o.a.createElement("a",{href:"https://bedtools.readthedocs.io/en/latest/content/general-usage.html#bed-format",target:"_blank",rel:"noopener noreferrer"},o.a.createElement("code",null,".bed")," file")," ","from your computer. Make sure to specify the correct column number for the p-value and posterior probability!"),o.a.createElement("p",null,o.a.createElement("strong",null,"Experimental:")," If you want to share a view with a custom variant track with your colleagues can either setup your own HiGlass server or you can use"," ",o.a.createElement("a",{href:"https://resgen.io",target:"_blank",rel:"noopener noreferrer"},"Resgen.io"),"\u2014a service for hosting and visualizing genomic data."),o.a.createElement(K.a,{id:"intro-enhancer-view-settings",align:"center",variant:"h4",component:"h4",noWrap:!0,className:r.introSubHeadline},"Settings"),o.a.createElement("p",null,"Finally, you can adjust the color encoding of the rectangles representing enhancer regions via the settings menu (click on"," ",o.a.createElement(ha.a,{size:"small",className:r.icon},o.a.createElement(L.a,{fontSize:"inherit"})),"). By default (",o.a.createElement("em",null,"Solid"),") we render rectangles in a solid color whenever a region is predicted to regulate at least one gene. Alternatively you can choose to encode number of regulated genes as the color (",o.a.createElement("em",null,"Number of predictions"),"). In this case, darker rectangles hint at enhancers that regulate many genes. Additionally, you can also color rectangles by the highest ABC prediction score (",o.a.createElement("em",null,"Highest prediction score"),") or the ABC prediction score of the connection to the closest gene (",o.a.createElement("em",null,"Closest prediction score"),")."),o.a.createElement(K.a,{id:"intro-gene-view",align:"center",variant:"h3",component:"h3",noWrap:!0,className:r.introHeadline},"2. Gene-Centered View"),o.a.createElement("p",null,"Sometimes it can be insightful to gain an overview of all upstream and downstream genes that are regulated by a specific enhancer region. That's what this view is for. In the tabular layout, each row corresponds to a sample group and the columns represent the genes ordered by distance to the enhancer region, which is shown as the center column. Hence, genes to the left are upstream of the enhancer and genes to the right are downstream. The number of genes/columns is limited by the available screen space. For instance, consider the following situation, where the numbers in the cells indicate the number of enhancer-gene connections across the three sample groups."),o.a.createElement("figure",{className:r.figure},o.a.createElement("img",{src:Ea.a,alt:"Gene-Centered View Setup"})),o.a.createElement("p",null,"To make this view more effective, the cells encode the percentage of samples within a sample group that contain a predicted enhancer-gene connection as the rectangle area."),o.a.createElement("figure",{className:r.figure},o.a.createElement("img",{src:Oa.a,alt:"Gene-Centered View Visualization"})),o.a.createElement("p",null,"For instance, in the example above, ",o.a.createElement("em",null,"Group A\u2014Gene 2")," is the largest rectangle because three out of four sample from"," ",o.a.createElement("em",null,"Group A")," regulate ",o.a.createElement("em",null,"Gene 2"),". On the other hand,"," ",o.a.createElement("em",null,"Group C\u2014Gene 3")," is the smallest rectangle because only one out of 5 samples from ",o.a.createElement("em",null,"Group C")," regulate ",o.a.createElement("em",null,"Gene 3"),"."),o.a.createElement("p",null,"For more detais on which exact sample contains a prediction you can mouse over a cell."),o.a.createElement(K.a,{id:"intro-gene-view-settings",align:"center",variant:"h4",component:"h4",noWrap:!0,className:r.introSubHeadline},"Settings"),o.a.createElement("p",null,"This view offers a couple of additional cell encoding to provide different perspectives of the gene regulation landscape of a specific enhancer. The rectangle size can also encode the absolute number of predicted enhancer-gene connections by sample group (",o.a.createElement("em",null,"Abs. number of predictions"),")."),o.a.createElement("p",null,"Additionally, you can look at the distribution of enhancer-gene connections by their ABC prediction score as a"," ",o.a.createElement("a",{href:"https://flowingdata.com/2016/09/08/beeswarm-plot-in-r-to-show-distributions/",target:"_blank",rel:"noopener noreferrer"},"bee swarm plot"),"(",o.a.createElement("em",null,"Distribution by prediction score"),"). With this setting, each enhancer-gene connection is represented as a small dot and positioned on the cell's y-axis by it's ABC prediction score. The closer the dot is placed to the top of the cell the higher the prediction score. The dots' x position is determined by the number of other dots with a similar prediction score. In other words the more dots stack along a cell's x-axis the more enhancer-gene Connections have the same prediction score."),o.a.createElement("p",null,"The final visual encoding (",o.a.createElement("em",null,"Sample array"),") visualizes enhancer-gene connections as filled cells within an invisible grid where each sample has a fixed position across all genes. Think of a microarray or well plate where each sample allocates a fixed well and lights up when this samples contains a enhancer-gene connection. The benefit of this encoding is that it allows you to quickly scan cross a row to see of the focused enhancer is regulating other genes in the same sample. You can even mouse over a well in the array view and it highlight the well across the entire row."),o.a.createElement(K.a,{id:"intro-dna-accessibility-view",align:"center",variant:"h3",component:"h3",noWrap:!0,className:r.introHeadline},"3. DNA Accessibility View"),o.a.createElement("p",null,"Since the ABC model relies on the DNase\u2009I hypersensitivy, we provide an accompanying view of the DNA accessibility across all samples for quick visual debugging of predicted enhancer regions. The DNase- or ATAC-seq measurements, are visualized as a vertically-stacked list of line charts. Each row corresponds to a sample and the order of samples is the same as in the ",o.a.createElement("em",null,"Enhancer-Centered View"),". By default, each row is individually normalized to focus on shape similarities rather than the absolute magnitude (i.e., read count). This behavior can be adjusted view the settings."),o.a.createElement(K.a,{align:"center",className:r.introStartExploring},o.a.createElement(M.a,{className:r.showIntro,onClick:n,variant:"contained",disableElevation:!0},"Back"),o.a.createElement(M.a,{className:r.startExploring,onClick:t,variant:"contained",disableElevation:!0},"Start Exploring!")),o.a.createElement(K.a,{align:"center",className:r.note},o.a.createElement("em",null,'You can reopen this tutorial by clicking on "ABC Enhancer-Gene Connections" in the upper left corner!'))):o.a.createElement("div",{className:r.root},o.a.createElement(K.a,{id:"title",align:"center",variant:"h5",component:"h2",noWrap:!0,className:r.title},o.a.createElement(oe,{styles:{width:"auto"}})),o.a.createElement("p",{id:"description"},"This web application visualizes genome-wide enhancer-gene connections predicted with the ",o.a.createElement("em",null,"Activity-By-Contact")," (ABC) model. You can interactively browse the entire human genome (hg19), filter enhancers by region, gene, or sample, and link enhancers to genetic risk variants."),o.a.createElement("p",null,"For more background information please refer to our publication:"," ",o.a.createElement("a",{href:"https://www.nature.com/articles/s41586-021-03446-x",target:"_blank",rel:"noopener noreferrer"},"Nasser et al., Genome-wide enhancer maps link risk variants to disease genes, ",o.a.createElement("em",null,"Nature")," (2021)"),"."),o.a.createElement("p",null,"For more information about the visualizations, please click on"," ",o.a.createElement("em",null,"Show Introduction"),". If you find a bug or have ideas for improvements, please don't hesitate"," ",o.a.createElement("a",{href:"https://github.com/flekschas/enhancer-gene-vis/issues",target:"_blank",rel:"noopener noreferrer"},"open an issue on GitHub")," ","or ping"," ",o.a.createElement("a",{href:"https://twitter.com/flekschas/",target:"_blank",rel:"noopener noreferrer"},"@flekschas"),"."),o.a.createElement(K.a,{align:"center"},o.a.createElement(M.a,{className:r.showIntro,onClick:a,variant:"contained",disableElevation:!0},"Show Introduction"),o.a.createElement(M.a,{className:r.startExploring,onClick:t,variant:"contained",disableElevation:!0},"Start Exploring!")))})),Sa=a(453),Na=a(461),Ma=Object(i.createContext)(),Ta=Object(g.a)((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"center",padding:"4rem"},paper:{backgroundColor:e.palette.background.paper,borderRadius:"0.25rem",boxShadow:e.shadows[4],maxWidth:"60rem",maxHeight:"calc(100vh - 8rem)",overflow:"auto",padding:e.spacing(2,4),outline:0}}}));function Ia(e){var t=e.children,a=Object(i.useState)(null),n=Object(c.a)(a,2),r=n[0],s=n[1],l=Object(i.useState)(null),u=Object(c.a)(l,2),h=u[0],d=u[1],m=Object(i.useState)(null),f=Object(c.a)(m,2),g=f[0],b=f[1],v=Object(i.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s(e),d((function(){return t})),b(a)}),[]),y=Object(i.useCallback)((function(){s(null),d(null)}),[]),w=Ta(),x=Boolean(r);return o.a.createElement(Ma.Provider,{value:v},t,o.a.createElement(Na.a,{"aria-labelledby":"modal-title","aria-describedby":"modal-description",className:w.root,open:x,onClose:h||y,closeAfterTransition:!0,BackdropComponent:p.a,BackdropProps:{timeout:250}},o.a.createElement(Sa.a,{in:x},o.a.createElement("div",{className:w.paper},x&&o.a.createElement(r,Object.assign({},g,{closeHandler:h||y}))))))}var Da=Object(g.a)((function(e){return{h1:{height:"100%",margin:"0",padding:"0",fontSize:"1rem",lineHeight:"1rem",fontWeight:"bold"},drawer:{width:240,flexShrink:0},drawerGrid:{height:"100%"},drawerPaper:{width:240},settings:{position:"relative",flexGrow:1},globalSettingsTitle:{padding:"3px 8px 4px 8px",margin:0,"& h6":{fontSize:"0.8rem",fontWeight:"bold"}},settingsContent:{position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"hidden auto"},toolbar:e.mixins.toolbar,grow:{flexGrow:1},titleBar:{position:"relative",padding:"2px",fontSize:"0.8rem",background:e.palette.grey[100]},titleBarText:{fontSize:"0.8rem"},titleBarContainer:{width:"auto"},titleBarTitle:{padding:"0 2px",fontWeight:900},titleBarIcon:{color:e.palette.grey[400],"&:hover":{color:"black"}},titleBarIconActive:{color:"black","&:hover":{color:"black"}},globalSettingsFirstBox:{margin:e.spacing(0,1,1,1)}}})),za=function(e){var t=Object(h.k)(e,"\n",4),a=e.lastIndexOf("\n"),n=+e.substring(e.indexOf('width="')+7,e.indexOf("px",e.indexOf('width="')+7)),i=+e.substring(e.indexOf('height="')+8,e.indexOf("px",e.indexOf('height="')+8));return{core:e.substring(t+1,a),width:n,height:i}},Ga=o.a.memo((function(){var e=A(),t=function(){var e=o.a.useContext(Ma);if(void 0===e)throw new Error("useShowModal must be used within a ModalContext");return e}(),a=ta(e),n=Object(c.a)(a,2),r=n[0],s=n[1],u=aa(e),d=Object(c.a)(u,2),m=d[0],p=d[1],f=Pe("w",kt),g=Object(c.a)(f,2),b=g[0],v=g[1],y=Object(l.d)(Et),w=Object(c.a)(y,2),x=w[0],E=w[1],k=Object(l.e)(Ft),O=Object(l.e)(Ht),C=Object(l.e)(Bt),P=Object(i.useState)(0),B=Object(c.a)(P,2),F=B[0],H=B[1],_=Object(i.useMemo)((function(){return Object(h.f)(r)&&r.indexOf(":")>=0?e.chrToAbs([r.split(":")[0],+r.split(":")[1]]):+r}),[r,e]),W=Object(i.useMemo)((function(){return Object(h.f)(m)&&m.indexOf(":")>=0?e.chrToAbs([m.split(":")[0],+m.split(":")[1]]):+m}),[m,e]),U=Object(i.useCallback)((function(e){s(e.target.value),H(2)}),[s]),Z=Object(i.useCallback)((function(e){p(e.target.value),H(2)}),[p]);Object(i.useEffect)((function(){H((function(e){return Math.max(0,e-1)}))}),[r,m]);var Y=Object(i.useCallback)((function(){v(!1)}),[v]),V=Object(i.useCallback)((function(){v(!0)}),[v]),Q=Object(i.useCallback)((function(){v("intro")}),[v]);Object(i.useEffect)((function(){b?t(ja,Y,{openIntroHandler:Q,closeIntroHandler:V}):t()}),[b,t,Y,Q]);var X=Object(i.useCallback)((function(){E(!1)}),[E]),q=Object(i.useCallback)((function(){E(!0)}),[E]);Object(i.useEffect)((function(){x?t(ua,X):b||t()}),[b,x,t,X]);var K=function(e,t,a){var n=za(e),i=n.core,o=n.width,r=n.height,s=za(t),l=s.core,u=s.width,h=s.height,d=a?function(e){var t=e.indexOf(">"),a=e.lastIndexOf("</svg>"),n=e.substring(e.indexOf('viewbox="')+9,e.indexOf('"',e.indexOf('viewbox="')+9)).split(" ").slice(2),i=Object(c.a)(n,2),o=i[0],r=i[1];return{core:e.substring(t+1,a),width:+o,height:+r}}(a):{},m=d.core,p=void 0===m?null:m,f=d.height,g=void 0===f?0:f,b=at.views[0].tracks.top.reduce((function(e,t){return e+t.height}),0),v=ot.views[0].tracks.top.reduce((function(e,t){return e+t.height}),0),y='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg\n    xmlns:xlink="http://www.w3.org/1999/xlink"\n    xmlns="http://www.w3.org/2000/svg" version="1.1" width="_WIDTH_px" height="_HEIGHT_px">\n    <g id="enhancer-plot">\n    _ENHANCER_\n    </g>\n    <g id="enhancer-gene-plot" transform="translate(0, _ENHANCER_GENE_Y_)">\n    _ENHANCER_GENE_\n    </g>\n    <g id="dna-accessibility-plot" transform="translate(_DNA_ACCESS_X_, 0)">\n    _DNA_ACCESS_\n    </g>\n</svg>';return y=(y=(y=(y=(y=(y=(y=y.replace("_WIDTH_",o+u+24)).replace("_HEIGHT_",Math.max(r+g+24,h,b+g+24,v))).replace("_ENHANCER_",i)).replace("_ENHANCER_GENE_Y_",r+24)).replace("_ENHANCER_GENE_",p)).replace("_DNA_ACCESS_X_",o+24)).replace("_DNA_ACCESS_",l),y=null===p?y.replace("_ENHANCER_GENE_",""):y.replace("_ENHANCER_GENE_",p)},J=Da();return o.a.createElement(I.a,{className:J.drawer,variant:"permanent",classes:{paper:J.drawerPaper},anchor:"left"},o.a.createElement(j.a,{container:!0,direction:"column",className:J.drawerGrid},o.a.createElement(j.a,{item:!0},o.a.createElement(R.a,{className:J.toolbar,style:{width:"100%"},onClick:V},o.a.createElement("h1",{className:J.h1},o.a.createElement(oe,null))),o.a.createElement(T.a,null)),o.a.createElement(j.a,{container:!0,item:!0,className:J.grow,direction:"column"},o.a.createElement(j.a,{item:!0},o.a.createElement(N.a,{m:1},o.a.createElement(N.a,{m:0},o.a.createElement(D.a,{variant:"outlined",margin:"dense",fullWidth:!0},o.a.createElement(z.a,{htmlFor:"x-domain-start"},"Region Start"),o.a.createElement(G.a,{id:"x-domain-start",label:"Region Start",onChange:U,value:r}))),o.a.createElement(N.a,{m:0},o.a.createElement(D.a,{variant:"outlined",margin:"dense",fullWidth:!0},o.a.createElement(z.a,{htmlFor:"x-domain-end"},"Region End"),o.a.createElement(G.a,{id:"x-domain-end",label:"Region End",onChange:Z,value:m}))),F>0&&o.a.createElement(N.a,{m:0},o.a.createElement(M.a,{variant:"contained",margin:"dense",onClick:function(e){if(k){var t=Object(S.a)(k.getViewConfig().views[0].initialXDomain);Number.isNaN(+_)||(t[0]=_),Number.isNaN(+W)||(t[1]=W),k.zoomTo("context",t[0],t[1],t[0],t[1],2e3)}},fullWidth:!0,disableElevation:!0,size:"small"},"Go"))),o.a.createElement(T.a,null),o.a.createElement(N.a,{m:1},o.a.createElement(M.a,{variant:"contained",margin:"dense",fullWidth:!0,disableElevation:!0,size:"small",startIcon:o.a.createElement(L.a,null),onClick:q},"Edit Variants")),o.a.createElement(T.a,null)),o.a.createElement(j.a,{item:!0,className:J.settings},o.a.createElement(N.a,{m:0,className:J.settingsContent},o.a.createElement(N.a,{className:J.globalSettingsFirstBox},o.a.createElement(ae,{filterState:gt,filterLabel:"Filter Samples",optionWithName:yt,optionGroupWithGroup:wt,groupedOptions:Ve,optionToGroup:Qe,groupColors:Fe,groupColorsDark:He})))),o.a.createElement(j.a,{item:!0},o.a.createElement(T.a,null),o.a.createElement(N.a,{m:1},o.a.createElement(M.a,{variant:"contained",margin:"dense",onClick:function(){if(k&&O){var e,t=K(k.exportAsSvg(),O.exportAsSvg(),C?(e=C,(new window.XMLSerializer).serializeToString(e)):null);!function(e,t){var a="string"===typeof t?new Blob([t],{type:"application/octet-stream"}):t;if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(a,e);else{var n=window.document.createElement("a");n.href=window.URL.createObjectURL(a),n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(n.href)}}("abc-enhancers.svg",new Blob([t],{type:"image/svg+xml"}))}else console.warn("One of the HiGlass instances is not available")},fullWidth:!0,disableElevation:!0,size:"small"},"Export as SVG"))))))})),Ra=a(501),Pa=a(502),La=a(252),Ba=a.n(La),Fa=a(510),Ha=a(516),_a=a(143),Wa=a(192),Ua=a.n(Wa),Za=a(193),Ya=a.n(Za),Va=Object(g.a)((function(e){return{inputRoot:{background:"white !important",borderTopLeftRadius:0,borderTopRightRadius:0,"&::before":{borderBottomWidth:0,boxShadow:"0 1px 0 0 rgba(0, 0, 0, 0)",transition:"boxShadow 0.2s ease"},"&:hover::before":{borderBottomWidth:0,boxShadow:"0 1px 0 0 rgba(0, 0, 0, 1)"}},focused:{boxShadow:"0 1px 0 0 rgba(0, 0, 0, 1)"},input:{height:35,padding:"6px 0 6px"},textFieldRoot:{"& .MuiFormLabel-root":{color:"black",fontWeight:"bold",transform:"translate(12px, 21px) scale(1.25)"},"& .MuiInputLabel-shrink":{fontWeight:"normal"}}}})),Qa=function(){var e=Object(O.a)(k.a.mark((function e(t,a){var n,i,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=5;break}return e.next=3,fetch("".concat(t,"&ac=").concat(a||""));case 3:return n=e.sent,e.abrupt("return",n.json());case 5:return e.next=7,fetch("".concat(t.url,"&ac=").concat(a||""));case 7:return i=e.sent,e.next=10,i.json();case 10:return o=e.sent,e.abrupt("return",o.map((function(e){return e.type=t.type,e})));case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function Xa(e){return o.a.createElement(_a.a,Object.assign({viewBox:"0 0 16 16"},e),o.a.createElement("path",{d:"M5.03 14.378A7.33 7.33 0 003.423 16h2.42a7.762 7.762 0 011.281-.774 13.241 13.241 0 01-1.863-1.016c-.078.054-.156.11-.233.168zM5.766 0l.219.174a8.754 8.754 0 001.636.92l.024.008c.797.24 1.507.627 2.023.933.325.18.674.4 1.024.66 1.825 1.363 2.79 3.22 2.79 5.367 0 2.062-.962 3.89-2.782 5.286-.061.048-.125.094-.186.139a10.45 10.45 0 00-1.895-.955 8.17 8.17 0 001.69-1.162h-3.92a6.191 6.191 0 01-1.199-1.15h6.093a4.054 4.054 0 00.603-1.747H3.839c.072.656.307 1.239.636 1.747h.011c.282.438.628.822.991 1.15H5.47l.74.584c.831.588 1.573.893 1.636.92a9.358 9.358 0 012.847 1.504A7.38 7.38 0 0112.3 16H9.879l-.759-.5a7.876 7.876 0 00-1.256-.594 11.833 11.833 0 01-2.07-1.04l.017-.009c-1.567-.999-3.571-2.851-3.571-5.794 0-2.149.964-4.005 2.79-5.367.076-.058.154-.113.231-.167.495.32 1.143.698 1.863 1.015a7.677 7.677 0 00-1.296.786c-.043.032-.083.066-.125.098h3.318c.535.336.999.727 1.364 1.149H4.598a4.215 4.215 0 00-.721 1.748h7.97l-.038-.195a3.527 3.527 0 00-.306-.904 4.417 4.417 0 00-.378-.65l-.01-.007a5.793 5.793 0 00-1.081-1.13l-.14-.109a7.236 7.236 0 00-.722-.48l-.031-.02a7.942 7.942 0 00-1.276-.607 10.278 10.278 0 01-1.257-.57C5.728 2.218 4.31 1.364 3.281 0h2.486zm6.267 0a7.808 7.808 0 01-1.743 1.707A10.443 10.443 0 008.396.752 8.592 8.592 0 009.592 0h2.442z"}))}function qa(e){return o.a.createElement(j.a,{key:e.option.geneName,container:!0,direction:"row",alignItems:"center"},o.a.createElement(Xa,{fontSize:"small"}),o.a.createElement("span",null,e.option.geneName))}function Ka(e){return o.a.createElement(j.a,{key:e.option.geneName,container:!0,direction:"row",alignItems:"center"},o.a.createElement(Ua.a,{fontSize:"small"}),o.a.createElement("span",null,e.option.geneName))}function Ja(e){return o.a.createElement(j.a,{key:e.option.geneName,container:!0,direction:"row",alignItems:"center"},o.a.createElement(Ya.a,{fontSize:"small"}),o.a.createElement("span",null,e.option.geneName))}function $a(e){return"gene"===e.option.type?o.a.createElement(qa,{option:e.option}):"variant"===e.option.type?o.a.createElement(Ka,{option:e.option}):"region"===e.option.type?o.a.createElement(Ja,{option:e.option}):o.a.createElement("div",null,e.option.geneName)}function en(e){switch(e){case"gene":return o.a.createElement(Xa,null);case"variant":return o.a.createElement(Ua.a,null);case"region":return o.a.createElement(Ya.a,null);default:return}}function tn(e){var t=Object(i.useState)(!1),a=Object(c.a)(t,2),n=a[0],r=a[1],s=Object(i.useState)([]),l=Object(c.a)(s,2),u=l[0],d=l[1],m=Object(i.useState)(e.inputValue),p=Object(c.a)(m,2),g=p[0],b=p[1],v=J(g,250),y=n&&0===u.length,w=Va(),x=Object(B.a)({},w);delete x.textFieldRoot;var A=e.customSearch,E=e.searchUrl;Object(i.useEffect)((function(){var e=!0;if(n){d([]);var t=Array.isArray(E)?E.map((function(e){return Qa(e,v)})):[Qa(E,v)];return A&&t.push(A(v)),Promise.all(t).then((function(t){e&&d(t.flat().filter(h.c))})),function(){e=!1}}}),[E,A,n,v]),Object(i.useEffect)((function(){n||d([])}),[n]);var k=e.multiple&&!Array.isArray(e.value)?[e.value]:e.value,O=k&&0===u.length?k:u;return O=Array.isArray(O)?O:[O],o.a.createElement(Fa.a,{classes:e.larger?x:{},multiple:e.multiple,onChange:function(t,a){e.onChange(a)},value:k,onInputChange:function(e,t){e&&b(t)},fullWidth:e.fullWidth,style:{width:e.fullWidth?"auto":e.width},open:n,onOpen:function(){r(!0)},onClose:function(){r(!1)},getOptionSelected:function(e,t){return e.geneName===t.geneName},getOptionLabel:function(e){return e?e.geneName:""},options:O,loading:y,renderInput:function(t){return o.a.createElement(se.a,Object.assign({},t,{className:e.larger?w.textFieldRoot:"",id:e.id,label:e.label,variant:e.variant,size:e.size,InputProps:Object(B.a)(Object(B.a)({},t.InputProps),{},{endAdornment:o.a.createElement(o.a.Fragment,null,y?o.a.createElement(f.a,{color:"inherit",size:20}):null,t.InputProps.endAdornment)})}))},renderOption:function(e){return o.a.createElement($a,{option:e})},renderTags:function(e,t){return e.map((function(e,a){return o.a.createElement(Ha.a,Object.assign({icon:en(e.type),key:e.geneName,label:e.geneName},t({index:a})))}))}})}function an(e){var t=Object(i.useRef)();return Object(i.useEffect)((function(){t.current=e})),t.current}tn.defaultProps={fullWidth:!0,id:"",label:"",multiple:!1,onChange:h.c,size:"small",value:null,variant:"outlined",width:"10rem"};var nn=Object(g.a)((function(e){return{appBar:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,color:e.palette.common.black,backgroundColor:e.palette.common.white,boxShadow:"0 1px 0 0 ".concat(e.palette.grey[300])},toolbarExtra:{paddingLeft:0,paddingRight:0,alignItems:"flex-end"}}})),on=function(){var e=Object(O.a)(k.a.mark((function e(t){var a,n,i,o,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",void 0);case 2:if(a=je(t)){e.next=5;break}return e.abrupt("return",void 0);case 5:if(n=a[1],i=+a[2],o=a[7]||a[1],r=a[8]||("~"===a[4]||"+"===a[4]?i+ +a[5]:+a[5]),r=Number.isNaN(r)?i+1:r,!(n&&i&&o&&r)){e.next=12;break}return e.abrupt("return",[{chrStart:"chr".concat(n),chrEnd:"chr".concat(o),txStart:i,txEnd:r,geneName:t,type:"region"}]);case 12:return e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rn=o.a.memo((function(){var e=Jt(),t=Object(c.a)(e,2),a=t[0],n=t[1],r=$t(),s=Object(c.a)(r,2),u=s[0],h=s[1],d=Object(l.d)(Nt),m=Object(c.a)(d,2),p=m[0],f=m[1],g=Object(l.d)(Tt),b=Object(c.a)(g,2),v=b[0],y=b[1],w=an(p),x=an(v),A=Object(i.useMemo)((function(){var e=[];return p&&p===w&&e.push(p),v&&v===x&&e.push(v),p&&p!==w&&e.push(p),v&&v!==x&&e.push(v),e}),[p,v]),E=function(){n(""),f(null)},k=function(){h(""),y(null)},O=nn();return o.a.createElement(Ra.a,{position:"fixed",className:O.appBar},o.a.createElement(Pa.a,{classes:{root:O.toolbarExtra}},o.a.createElement(D.a,{fullWidth:!0},o.a.createElement(tn,{label:o.a.createElement(j.a,{container:!0,direction:"row",alignItems:"center"},o.a.createElement(Ba.a,{fontSize:"small"}),o.a.createElement("span",{style:{marginLeft:3}},"Gene, Variant, or Region")),customSearch:on,searchUrl:[{url:We,type:"gene"},{url:Ue,type:"variant"}],onChange:function(e){if(e.length){var t={};e.slice(e.length-2).forEach((function(e){switch(e.type){case"gene":t.gene=e,a!==e.geneName&&(n(e.geneName),f(e));break;case"variant":t.variant=e,u!==e.geneName&&(h(e.geneName),y(e));break;case"region":t.region=e,u!==e.geneName&&(h(["".concat(e.chrStart,":").concat(e.txStart),"".concat(e.chrEnd,":").concat(e.txEnd)]),y(e));break;default:console.warn("Unknown focus element",e)}})),a&&!t.gene&&E(),!u||t.region||t.variant||k()}else E(),k()},value:A,variant:"filled",larger:!0,fullWidth:!0,multiple:!0}))))})),sn=Object(g.a)((function(e){return{root:{display:"flex",justifyContent:"space-between"},text:{fontSize:"0.8rem"},black:{color:"black"},gray:{color:e.palette.grey[400]},pink:{color:"#cc0078"}}})),cn=o.a.memo((function(){var e=Object(l.e)(Gt),t=Object(l.e)(St),a=Object(l.e)(Mt),n=sn();return e?o.a.createElement(o.a.Fragment,null,t&&a&&o.a.createElement(K.a,{className:n.text,noWrap:!0},o.a.createElement("span",{className:n.pink},"\u25a0")," Enhancers containing"," ",o.a.createElement("em",null,a)," and predicted to regulate ",o.a.createElement("em",null,t)),t&&!a&&o.a.createElement(K.a,{className:n.text,noWrap:!0},o.a.createElement("span",{className:n.pink},"\u25a0")," Enhancers predicted to regulate ",o.a.createElement("em",null,t)),!t&&a&&o.a.createElement(K.a,{className:n.text,noWrap:!0},o.a.createElement("span",{className:n.pink},"\u25a0")," Enhancers containing"," ",o.a.createElement("em",null,a)),t||a?o.a.createElement(K.a,{className:n.text,noWrap:!0},o.a.createElement("span",{className:n.gray},"\u25a0")," All other predicted enhancers"):o.a.createElement(K.a,{className:n.text,noWrap:!0},o.a.createElement("span",{className:n.black},"\u25a0")," All predicted enhancers")):""})),ln=o.a.memo((function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(K.a,null,"This panel visualizes the predicted enhancers by sample type as a matrix-like track. Each rectangle representes an enhancer. Promoter regions are indicated by translucent light gray overlays."),o.a.createElement(K.a,null," ","You can filter enhancers via their target gene or by variant (the dot plot below the gene annotations). Click on a variant or gene to select it. Selections are shown in pink/red."))})),un=a(34),hn=a.n(un),dn=a(35),mn=a.n(dn),pn=a(456),fn=a(517),gn=a(503),bn=Object(g.a)((function(e){return{iconRadioLegend:{margin:e.spacing(2,0,.25,0)}}})),vn=o.a.memo((function(){var e=Pe("vs",It),t=Object(c.a)(e,2),a=t[0],n=t[1],r=Pe("eri",Dt),s=Object(c.a)(r,2),l=s[0],u=s[1],h=Pe("eri",zt),d=Object(c.a)(h,2),m=d[0],p=d[1],f=Object(i.useCallback)((function(e){u(e.target.checked)}),[u]),g=Object(i.useCallback)((function(e){return function(){n(e)}}),[n]),b=Object(i.useCallback)((function(e){return function(){p(e)}}),[p]),v=bn();return o.a.createElement(o.a.Fragment,null,o.a.createElement(N.a,{m:1},o.a.createElement(X.a,{control:o.a.createElement(gn.a,{checked:l,onChange:f,name:"hideUnfocused"}),label:"Hide unfocused enhancer regions"})),o.a.createElement(N.a,{m:1},o.a.createElement(D.a,{component:"fieldset"},o.a.createElement(pn.a,{component:"legend",className:v.iconRadioLegend},"Variant y-scale"),o.a.createElement(fn.a,{"aria-label":"variantYScale",name:"variantYScale",value:a},o.a.createElement(X.a,{label:"p-value",value:"pValue",className:v.iconRadio,control:o.a.createElement(ha.a,{size:"small",onClick:g("pValue")},"pValue"===a?o.a.createElement(hn.a,{className:v.iconRadioActive,fontSize:"inherit"}):o.a.createElement(mn.a,{fontSize:"inherit"}))}),o.a.createElement(X.a,{label:"Posterior probability",value:"posteriorProbability",className:v.iconRadio,control:o.a.createElement(ha.a,{size:"small",onClick:g("posteriorProbability")},"posteriorProbability"===a?o.a.createElement(hn.a,{className:v.iconRadioActive,fontSize:"inherit"}):o.a.createElement(mn.a,{fontSize:"inherit"}))})))),o.a.createElement(N.a,{m:1},o.a.createElement(D.a,{component:"fieldset"},o.a.createElement(pn.a,{component:"legend",className:v.iconRadioLegend},"Matrix colorEncoding"),o.a.createElement(fn.a,{"aria-label":"colorEncoding",name:"colorEncoding",value:m},o.a.createElement(X.a,{label:"Solid",value:"solid",className:v.iconRadio,control:o.a.createElement(ha.a,{size:"small",onClick:b("solid")},"solid"===m?o.a.createElement(hn.a,{className:v.iconRadioActive,fontSize:"inherit"}):o.a.createElement(mn.a,{fontSize:"inherit"}))}),o.a.createElement(X.a,{label:"Number of predictions",value:"frequency",className:v.iconRadio,control:o.a.createElement(ha.a,{size:"small",onClick:b("frequency")},"frequency"===m?o.a.createElement(hn.a,{className:v.iconRadioActive,fontSize:"inherit"}):o.a.createElement(mn.a,{fontSize:"inherit"}))}),o.a.createElement(X.a,{label:"Highest prediction score",value:"highestImportance",className:v.iconRadio,control:o.a.createElement(ha.a,{size:"small",onClick:b("highestImportance")},"highestImportance"===m?o.a.createElement(hn.a,{className:v.iconRadioActive,fontSize:"inherit"}):o.a.createElement(mn.a,{fontSize:"inherit"}))}),o.a.createElement(X.a,{label:"Closest prediction score",value:"closestImportance",className:v.iconRadio,control:o.a.createElement(ha.a,{size:"small",onClick:b("closestImportance")},"closestImportance"===m?o.a.createElement(hn.a,{className:v.iconRadioActive,fontSize:"inherit"}):o.a.createElement(mn.a,{fontSize:"inherit"}))})))))})),yn=a(254),wn=a.n(yn),xn=a(253),An=a.n(xn),En=a(499),kn=Object(g.a)((function(e){return{grow:{flexGrow:1},bar:{position:"relative",padding:"2px",fontSize:"0.8rem",background:e.palette.grey[100]},title:{fontSize:"0.8rem",padding:"0 2px",fontWeight:900},icon:{color:e.palette.grey[400],"&:hover":{color:"black"}},iconActive:{color:e.palette.grey[600],"&:hover":{color:"black"}},popeover:{"& > *":{maxWidth:"20rem",padding:"0.5rem",fontSize:"0.8rem","&+p":{paddingTop:0}}},info:{"&> *":{padding:"0 2px"},"&> *:last-child":{borderBottom:"1px solid ".concat(e.palette.grey[100])}}}})),On=o.a.memo((function(e){var t=e.id,a=e.title,n=e.Info,r=e.Help,s=e.Settings,l=e.useShowInfo,u=e.popoverDirection,h=void 0===u?"bottom":u,d=l(),m=Object(c.a)(d,2),p=m[0],f=m[1],g=Object(i.useState)(),b=Object(c.a)(g,2),v=b[0],y=b[1],w=Object(i.useState)(),x=Object(c.a)(w,2),A=x[0],E=x[1],k=Object(i.useCallback)((function(){f((function(e){return!(!0===e||"true"===e)}))}),[f]),O=Object(i.useCallback)((function(e){y(e.currentTarget)}),[]),C=Object(i.useCallback)((function(){y(null)}),[]),S=Object(i.useCallback)((function(e){E(e.currentTarget)}),[]),N=Object(i.useCallback)((function(){E(null)}),[]),M=Object(i.useMemo)((function(){return"".concat(t,"-help")}),[t]),T=Object(i.useMemo)((function(){return"".concat(t,"-settings")}),[t]),I=Object(i.useMemo)((function(){return"bottom"===h?"bottom":"top"}),[h]),D=Object(i.useMemo)((function(){return"bottom"===h?"top":"bottom"}),[h]),z=kn(),G=Boolean(v),R=Boolean(A),P=p?z.iconActive:z.icon,B=G?z.iconActive:z.icon,F=R?z.iconActive:z.icon;return o.a.createElement(j.a,{item:!0,className:z.root},o.a.createElement(j.a,{item:!0,className:z.bar,container:!0,alignItems:"center",wrap:"nowrap"},o.a.createElement(j.a,{item:!0,container:!0,alignItems:"center",wrap:"nowrap",className:z.grow},o.a.createElement(K.a,{component:"h3",className:z.title,noWrap:!0},a,":")),o.a.createElement(j.a,{item:!0},o.a.createElement(j.a,{container:!0,alignItems:"center",wrap:"nowrap"},o.a.createElement(ha.a,{"aria-label":"details",className:P,size:"small",onClick:k},o.a.createElement(An.a,{fontSize:"inherit"})),o.a.createElement(ha.a,{"aria-label":"help","aria-describedby":M,className:B,size:"small",onClick:O},o.a.createElement(wn.a,{fontSize:"inherit"})),o.a.createElement(En.a,{id:M,open:G,anchorEl:v,onClose:C,anchorOrigin:{vertical:I,horizontal:"right"},transformOrigin:{vertical:D,horizontal:"right"}},o.a.createElement("div",{className:z.popeover},o.a.createElement(r,null))),o.a.createElement(ha.a,{"aria-label":"settings","aria-describedby":T,className:F,size:"small",onClick:S},o.a.createElement(L.a,{fontSize:"inherit"})),o.a.createElement(En.a,{id:M,open:R,anchorEl:A,onClose:N,anchorOrigin:{vertical:I,horizontal:"right"},transformOrigin:{vertical:D,horizontal:"right"}},o.a.createElement("div",{className:z.popeover},o.a.createElement(s,null)))))),o.a.createElement(j.a,{item:!0,className:z.info},p&&o.a.createElement(n,null)))})),Cn=(a(236),a(446),Object(g.a)((function(e){return{grow:{flexGrow:1},fullWidthHeight:{position:"absolute",top:0,right:0,bottom:0,left:0},higlassContainer:{position:"relative",minHeight:"100%",overflow:"hidden"},panZoomTip:{position:"absolute",zIndex:11,top:0,left:0,right:0,padding:"0 2px",fontSize:"0.8rem",lineHeight:"1.5rem",background:e.palette.grey[100],textAlign:"center",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",opacity:1,animation:"0.75s ease 3s 1 running forwards fadeout","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none",userSelect:"none",transition:"0.25s ease opacity, 0.25s ease transform","&:hover":{opacity:0}},panZoomTipNormal:{color:e.palette.grey[600]},panZoomTipNormalHover:{fontWeight:"bold",color:"black",background:"#aaa",animation:"0.75s ease 5s 1 running forwards fadeout"},panZoomTipActive:{color:"white",background:"#dd55a5",animation:"0.75s ease 5s 1 running forwards fadeout"},panZoomTipActiveHover:{fontWeight:"bold",color:"white",background:"#cc0078",animation:"0.75s ease 5s 1 running forwards fadeout"}}}))),jn=o.a.memo((function(e){var t=A(),a=Object(l.d)(Nt),n=Object(c.a)(a,2),r=n[0],s=n[1],d=Jt()[1],m=$t()[1],p=ta(t)[1],f=aa(t)[1],g=Object(l.f)(Tt),b=Object(l.f)(Ft),v=Object(l.e)(At),y=Object(l.e)(Dt),w=Object(l.e)(It),x=Object(l.e)(zt),E=Object(l.e)(Qt(t)),k=Object(l.e)(Ut(t)),O=Object(l.e)(Zt(t)),C=Object(l.e)(Yt(t)),j=Object(l.e)(Vt(t)),S=Object(l.e)(xt),N=Object(l.e)(vt),M=Object(i.useState)(!1),T=Object(c.a)(M,2),I=T[0],D=T[1],z=Object(i.useState)(!1),G=Object(c.a)(z,2),R=G[0],P=G[1],L=Object(i.useRef)(null),B=Object(i.useRef)(null),F=Object(i.useRef)([]),H=Object(i.useRef)(null),_=Object(i.useRef)(null),W=Object(i.useRef)(!1),U=Object(i.useRef)(0),Z=Object(i.useRef)(0),Y=Object(i.useRef)(0),V=function(){return!!_.current&&(_.current=!1,!0)},Q=Object(i.useMemo)((function(){return Object(h.n)(Object.values(S))}),[S]);Object(i.useEffect)((function(){U.current+=I}),[I]),Object(i.useEffect)((function(){Z.current+=R}),[R]),Object(i.useEffect)((function(){R?Y.current+=!I:Y.current=0}),[R,I]);var X=Object(i.useMemo)((function(){return Object(h.l)(lt(v),(t=r?r.geneName:null,a=C,n=j,function(e){var i=e.views[0].tracks.top.length;return t?(e.views[0].tracks.top[i-1].options.focusGene=t,e.views[0].overlays[1].options.extent=[[a,n]]):(delete e.views[0].tracks.top[i-1].options.focusGene,delete e.views[0].overlays[1].options.extent),e}),ut(E,[2,4]),function(e){return function(t){return t.views[0].tracks.top[4].options.focusStyle=e?"filtering":"highlighting",t.views[0].tracks.top[4].options.stratification.axisNoGroupColor=!e,t}}(y),(e=x,function(t){return t.views[0].tracks.top[4].options.opacityEncoding=e,t}),ht(w),dt(k,O,{force:V}),function(e){return function(t){return t.views[0].tracks.top[3].contents[0].options.filter={set:e,field:6},t.views[0].tracks.top[3].contents[1].options.filter={set:e,field:6},t.views[0].tracks.top[4].options.filter={set:e,field:6},t}}(N),function(e){return function(t){var a=t.views[0].tracks.top[4];return a.height=e*a.options.markHeight+14,t}}(Q))(Object(h.b)(at));var e,t,a,n}),[v,r,C,j,E,y,x,w,N,Q]),q=Object(i.useMemo)((function(){return X.views[0].tracks.top.reduce((function(e,t){return e+t.height}),0)}),[X]),J=Object(i.useMemo)((function(){return R?"higlass-block focus":"higlass-block"}),[R]),$=function(e){"gene-annotation"===e.type?(d(e.payload.name),_.current=!0,s({chr:e.payload.fields[0],txStart:e.payload.fields[1],txEnd:e.payload.fields[2],geneName:e.payload.name,type:"gene"})):"snp"===e.type?(m(e.payload.name),_.current=!0,g({chr:e.payload.fields[0],txStart:e.payload.fields[1],txEnd:e.payload.fields[2],geneName:e.payload.name,score:e.payload.importance,type:"variant"})):"annotation"===e.type&&e.payload.item&&g({chrStart:e.payload.item.fields[0],txStart:+e.payload.item.fields[1],chrEnd:e.payload.item.fields[0],txEnd:+e.payload.item.fields[2],geneName:Ie(["".concat(e.payload.item.fields[0],":").concat(e.payload.item.fields[1]),"".concat(e.payload.item.fields[0],":").concat(e.payload.item.fields[2])]),type:"region"})},ee=Object(h.a)((function(e){var a=e.xDomain.map((function(e){return t.absToChr(e).slice(0,2).join(":")})),n=Object(c.a)(a,2),i=n[0],o=n[1];p(i),f(o)}),250),te=function(e){if(e.dataRange[0]){var t=Object(c.a)(e.dataRange,1);B.current=t[0]}},ae=Object(i.useCallback)((function(e){Object(h.e)(e.target,H.current)||P(!1)}),[]);Object(i.useEffect)((function(){return window.addEventListener("mouseup",ae),window.addEventListener("blur",ae),function(){window.removeEventListener("mouseup",ae),window.removeEventListener("blur",ae)}}),[]);var ne=Object(i.useCallback)((function(){W.current=!0}),[]),ie=Object(i.useCallback)((function(e){null!==e&&(b(e.api),L.current=e.api,e.api.setRangeSelectionToInt(),F.current.push(e.api.on("click",$)),F.current.push(e.api.on("location",ee,"context")),F.current.push(e.api.on("rangeSelection",te,"context")),e.api.getComponent().element.addEventListener("mousedown",ne))}),[]);Object(i.useEffect)((function(){function e(e){rt.has(document.activeElement.tagName.toLowerCase())||(e.preventDefault(),e.altKey&&L.current.activateTool("select"))}function a(e){if(!rt.has(document.activeElement.tagName.toLowerCase())){if(e.preventDefault(),B.current){var a=B.current.map(t.absToChr),n=Object(c.a)(a[0],2),i=n[0],o=n[1],r=Object(c.a)(a[1],2),s=r[0],l=r[1];m(["".concat(i,":").concat(o),"".concat(s,":").concat(l)]),g({chrStart:i,txStart:o,chrEnd:s,txEnd:l,geneName:Ie(["".concat(i,":").concat(o),"".concat(s,":").concat(l)]),type:"region"})}B.current=null,L.current.activateTool("panZoom")}}return document.addEventListener("keydown",e),document.addEventListener("keyup",a),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",a)}}),[t]),Object(i.useEffect)((function(){return function(){L.current&&(F.current.forEach((function(e){var t=e.event,a=e.handler;L.current.off(t,a)})),L.current.getComponent().element.removeEventListener("mousedown",ne),L.current.destroy())}}),[]);var oe=Cn();return o.a.createElement("div",{className:oe.root},o.a.createElement(On,{id:"enhancer-regions",title:"Enhancer Regions",useShowInfo:na,Info:cn,Help:ln,Settings:vn}),o.a.createElement("div",{className:"higlass-container ".concat(oe.higlassContainer),onMouseEnter:function(){D(!0)},onMouseLeave:function(){D(!1)},ref:H,style:{height:"".concat(q,"px")}},R&&!I&&Z.current<2&&Y.current<1&&o.a.createElement(K.a,{component:"div",className:"panZoomTip ".concat(oe.panZoomTip," ").concat(oe.panZoomTipActive),noWrap:!0},"Click outside to deactivate pan & zoom!"),R&&I&&Z.current<2&&Y.current<1&&o.a.createElement(K.a,{component:"span",className:"panZoomTip ".concat(oe.panZoomTip," ").concat(oe.panZoomTipActiveHover),noWrap:!0},"You can now pan & zoom the plot!"),!R&&I&&U.current<2&&o.a.createElement(K.a,{component:"div",className:"panZoomTip ".concat(oe.panZoomTip," ").concat(oe.panZoomTipNormalHover),noWrap:!0},"Click to activate pan & zoom!"),!R&&!I&&U.current<2&&o.a.createElement(K.a,{component:"span",className:"panZoomTip ".concat(oe.panZoomTip," ").concat(oe.panZoomTipNormal),noWrap:!0},"This plot is interactive!"),o.a.createElement("div",{className:J,onMouseDown:ne,onFocus:function(){P(!0)},onBlur:function(){W.current||P(!1)},tabIndex:"0"}),o.a.createElement(u.HiGlassComponent,{ref:ie,viewConfig:X,options:{sizeMode:"bounded",globalMousePosition:!0}})))})),Sn=Object(g.a)((function(e){return{root:{display:"flex",justifyContent:"space-between"},text:{fontSize:"0.8rem",verticalAlign:"center"},placeholder:{fontStyle:"italic",color:e.palette.grey[600]},small:{fontSize:"0.5em",lineHeight:"2em"},medium:{fontSize:"1em",lineHeight:"1em"},large:{fontSize:"1.5em",lineHeight:"0.6667em",marginLeft:"-0.05rem",marginRight:"0.1rem"}}})),Nn=o.a.memo((function(){var e=Object(l.e)(Rt),t=Object(l.e)(Mt),a=Object(l.e)(qt),n=Object(l.e)(Lt),i=Sn();return e?o.a.createElement("div",null,!t&&o.a.createElement(j.a,{container:!0,justify:"center",alignItems:"center",className:i.placeholder},o.a.createElement(K.a,{className:i.text},"Select a variant or focus region to see details")),t&&"max-score"===n&&o.a.createElement(o.a.Fragment,null,o.a.createElement(K.a,{className:i.text},o.a.createElement("span",{className:i.small},"\u25a0"),o.a.createElement("span",{className:i.medium},"\u25a0"),o.a.createElement("span",{className:i.large},"\u25a0"),o.a.createElement("strong",null,"Max. ABC score")," of enhancer-gene connections overlapping ",o.a.createElement("em",null,a)," by sample groups across up/downstream genes.")),t&&"number"===n&&o.a.createElement(o.a.Fragment,null,o.a.createElement(K.a,{className:i.text},o.a.createElement("span",{className:i.small},"\u25a0"),o.a.createElement("span",{className:i.medium},"\u25a0"),o.a.createElement("span",{className:i.large},"\u25a0"),o.a.createElement("strong",null,"Absolute number")," of enhancer-gene connections overlapping ",o.a.createElement("em",null,a)," by sample groups across up/downstream genes.")),t&&"percent"===n&&o.a.createElement(o.a.Fragment,null,o.a.createElement(K.a,{className:i.text},o.a.createElement("span",{className:i.small},"\u25a0"),o.a.createElement("span",{className:i.medium},"\u25a0"),o.a.createElement("span",{className:i.large},"\u25a0"),o.a.createElement("strong",null,"Percentage")," of enhancer-gene connections overlapping"," ",o.a.createElement("em",null,a)," within a sample group across up/downstream genes.")),t&&"distribution"===n&&o.a.createElement(o.a.Fragment,null,o.a.createElement(K.a,{className:i.text},o.a.createElement("strong",null,"Distribution")," of the prediction scores of enhancer-gene connections overlapping ",o.a.createElement("em",null,a)," by sample group across up/downstream genes.")),t&&"array"===n&&o.a.createElement(o.a.Fragment,null,o.a.createElement(K.a,{className:i.text},o.a.createElement("span",null,"\u25a0"),o.a.createElement("strong",null,"Presence")," of enhancer-gene connections overlapping"," ",o.a.createElement("em",null,a)," by samples across sample groups and up/downstream genes."))):""})),Mn=o.a.memo((function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(K.a,null,"..."))})),Tn=a(13),In=Object(Tn.a)((function(e){return{root:{width:36,height:24,padding:4,margin:"-4px 0 -4px -4px",display:"flex",borderRadius:24,transition:"background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},switchBase:{top:4,left:4,padding:2,color:e.palette.grey[500],"&$checked":{transform:"translateX(12px)",color:e.palette.common.white,"& + $track":{opacity:1,backgroundColor:e.palette.primary.main,borderColor:e.palette.primary.main}}},thumb:{width:12,height:12,boxShadow:"none"},track:{border:"1px solid ".concat(e.palette.grey[500]),borderRadius:8,opacity:1,backgroundColor:e.palette.common.white},checked:{}}}))(gn.a),Dn=Object(g.a)((function(e){return{iconRadio:{padding:e.spacing(.5,0),marginLeft:-e.spacing(1)/2,"& .MuiFormControlLabel-label":{lineHeight:1.2}},iconRadioActive:{color:"black"},iconRadioLegend:{margin:e.spacing(2,0,.25,0)},switch:{margin:0}}})),zn=o.a.memo((function(){var e=Pe("egce",Lt),t=Object(c.a)(e,2),a=t[0],n=t[1],i=Pe("egp",Pt),r=Object(c.a)(i,2),s=r[0],l=r[1],u=function(e){return function(){n(e)}},h=Dn();return o.a.createElement(o.a.Fragment,null,o.a.createElement(N.a,{m:1},o.a.createElement(X.a,{className:h.switch,control:o.a.createElement(In,{checked:s,onChange:function(e){l(e.target.checked)},name:"true"}),label:"Gene padding"})),o.a.createElement(N.a,{m:1},o.a.createElement(D.a,{component:"fieldset"},o.a.createElement(pn.a,{component:"legend",className:h.iconRadioLegend},"Gene Cell Encoding"),o.a.createElement(fn.a,{"aria-label":"cellEncoding",name:"cellEncoding",value:a},o.a.createElement(X.a,{label:"Max. ABC prediction score",value:"number",className:h.iconRadio,control:o.a.createElement(ha.a,{size:"small",onClick:u("max-score")},"max-score"===a?o.a.createElement(hn.a,{className:h.iconRadioActive,fontSize:"inherit"}):o.a.createElement(mn.a,{fontSize:"inherit"}))}),o.a.createElement(X.a,{label:"Abs. number of predictions",value:"number",className:h.iconRadio,control:o.a.createElement(ha.a,{size:"small",onClick:u("number")},"number"===a?o.a.createElement(hn.a,{className:h.iconRadioActive,fontSize:"inherit"}):o.a.createElement(mn.a,{fontSize:"inherit"}))}),o.a.createElement(X.a,{label:"Rel. number of predictions per group",value:"percent",className:h.iconRadio,control:o.a.createElement(ha.a,{size:"small",onClick:u("percent")},"percent"===a?o.a.createElement(hn.a,{className:h.iconRadioActive,fontSize:"inherit"}):o.a.createElement(mn.a,{fontSize:"inherit"}))}),o.a.createElement(X.a,{label:"Distribution by prediction score",value:"distribution",className:h.iconRadio,control:o.a.createElement(ha.a,{size:"small",onClick:u("distribution")},"distribution"===a?o.a.createElement(hn.a,{className:h.iconRadioActive,fontSize:"inherit"}):o.a.createElement(mn.a,{fontSize:"inherit"}))}),o.a.createElement(X.a,{label:"Sample array",value:"array",className:h.iconRadio,control:o.a.createElement(ha.a,{size:"small",onClick:u("array")},"array"===a?o.a.createElement(hn.a,{className:h.iconRadioActive,fontSize:"inherit"}):o.a.createElement(mn.a,{fontSize:"inherit"}))})))))})),Gn=a(20),Rn=a(52),Pn=a(194),Ln=Object(i.createContext)(),Bn=Object(g.a)({root:{position:"fixed",zIndex:10,width:1,height:1,background:"transparent",fontWeight:"normal",pointerEvents:"none","& strong":{fontWeight:"bold"}}});function Fn(e){var t=e.children,a=Object(i.useState)({show:!1,title:"",x:0,y:0,arrow:!0,placement:"bottom",classes:{}}),n=Object(c.a)(a,2),r=n[0],s=n[1],l=Object(i.useCallback)((function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.arrow,o=void 0!==i&&i,r=n.placement,c=void 0===r?"bottom":r,l=n.classes,u=void 0===l?{}:l;Number.isNaN(+e)||Number.isNaN(+t)||!a?s({show:!1,title:"",x:0,y:0,arrow:!0,placement:"bottom",classes:{}}):s({show:!0,x:e,y:t,title:a,arrow:o,placement:c,classes:u})}),[]),u=Bn();return o.a.createElement(Ln.Provider,{value:l},t,o.a.createElement(ce.a,{open:r.show,title:r.title,arrow:r.arrow,placement:r.placement,classes:r.classes},o.a.createElement("div",{className:u.root,style:{top:r.y,left:r.x}})))}a(447);var Hn=Object(g.a)((function(e){return{root:{color:e.palette.grey[300],minHeight:"6rem"},plot:{position:"relative",flexGrow:1},plotSvg:{width:"100%",height:"100%"}}})),_n=_e.map((function(e,t){return Object(g.a)((function(a){return{arrow:{color:e},tooltip:{color:He[t],backgroundColor:e,boxShadow:"0 0 3px 0 rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.05)","& .value":{color:"white",background:He[t],padding:"0 0.25em",borderRadius:"0.25rem"}}}}))})),Wn=at.views[0].tracks.top[3].contents[1],Un=Wn.server,Zn=Wn.tilesetUid,Yn=function(){var e=Object(O.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Un,"/tiles/?").concat(t.map((function(e){return"d=".concat(e)})).join("&")));case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Vn={},Qn={};Ye.groups.forEach((function(e,t){Vn[e.label]={name:e.label,size:e.categories.length,index:t},e.categories.forEach((function(t,a){Qn[t]={category:Vn[e.label],index:a}}))}));var Xn=function(e,t,a){var n=Math.pow(t,2),i=e.map((function(e){return{y:a(e.score),data:e}})).sort((function(e,t){return e.y-t.y})),o=null,r=null;function s(e,t){for(var a=o;a;){if(n-.001>Math.pow(a.x-e,2)+Math.pow(a.y-t,2))return!0;a=a.next}return!1}var c,l=Object(Gn.a)(i);try{for(l.s();!(c=l.n()).done;){for(var u=c.value;o&&o.y<u.y-n;)o=o.next;if(s(u.x=0,u.y)){var h=o;u.x=1/0;do{var d=h.x+Math.sqrt(n-Math.pow(h.y-u.y,2));d<u.x&&!s(d,u.y)&&(u.x=d),h=h.next}while(h)}u.next=null,null===o?o=r=u:r=r.next=u}}catch(m){l.e(m)}finally{l.f()}return i},qn=o.a.memo((function(){var e=A(),t=function(){var e=o.a.useContext(Ln);if(void 0===e)throw new Error("useShowTooltip must be used within a TooltipContext");return e}(),a=Object(l.e)(bt),n=Object(l.e)(xt),r=Object(l.e)(Lt),s=Object(l.e)(Qt(e)),u=Object(l.e)(Mt),d=Object(l.e)(Xt),m=Object(l.e)(qt),p=Object(l.e)(Pt),g=Object(l.d)(Bt),b=Object(c.a)(g,2),v=b[0],y=b[1],w=Object(i.useState)(null),x=Object(c.a)(w,2),E=x[0],C=x[1],N=Object(i.useState)(null),M=Object(c.a)(N,2),T=M[0],I=M[1],D=Object(i.useState)(null),z=Object(c.a)(D,2),G=z[0],R=z[1],P=Object(i.useState)(null),L=Object(c.a)(P,2),B=L[0],F=L[1],H=an(B),_=an(r);Object(i.useEffect)((function(){var e=!0;if(null!==s&&null!==G){var t=Object(c.a)(s,2),a=t[0],n=t[1],i=Math.abs(n-a),o=function(e){return e.max_width/Math.pow(2,e.max_zoom)}(G),r=Math.max(0,Math.ceil(Math.log2(i/o/5))),l=G.max_zoom-r,u=o*Math.pow(2,r),d=Math.floor(a/u),m=Math.floor(n/u),p=Object(h.m)(d,m+1).reduce((function(e,t){return e.push("".concat(Zn,".").concat(l,".").concat(t)),e}),[]);return I(!0),Yn(p).then((function(t){e&&(I(!1),C(function(e,t){return e.filter((function(e){return e.xEnd>=t[0]&&e.xStart<t[1]}))}(Object.values(t).flat(),s)))})),function(){e=!1}}}),[s,G]);var W=Object(i.useCallback)((function(e){y(e)}),[y]),U=Object(i.useMemo)((function(){return!!G}),[G]),Z=Object(i.useMemo)((function(){if(E){var e=0,t=1/0,i=0,o={},r={};Object.entries(Vn).forEach((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];r[a]={category:n,numEnhancers:0}}));var s=function(e,t){return e.absDistance-t.absDistance},l=new Pn.a([],s),u=new Pn.a([],s);E.forEach((function(s){var c=s.fields[6];if(a[qe[c]]){var h=s.fields[3];if(!o[h]){var m=+s.fields[4],p=m-d,f=p>0,g=Math.abs(p);o[h]={name:h,position:m,absDistance:g,isDownstream:f,samplesByCategory:{}},Object.values(Vn).forEach((function(e){var t=e.name;e.size;o[h].samplesByCategory[t]=[],o[h].samplesByCategory[t].maxScore=0,o[h].samplesByCategory[t].size=n[t]})),t=Math.min(t,g),i=Math.max(i,g),f?u.push(o[h]):l.push(o[h])}var b=Qn[c].category.name,v={gene:h,sample:c,sampleCategory:b,score:s.importance};o[h].samplesByCategory[b].push(v),s.importance>o[h].samplesByCategory[b].maxScore&&(o[h].samplesByCategory[b].maxScore=s.importance,o[h].samplesByCategory[b].maxScoreSample=v),e=Math.max(e,s.importance),r[b].numEnhancers++}}));for(var h=[];u.length;)h.push(u.pop());for(var m=[];l.length;)m.push(l.pop());return h.forEach((function(e,t){var a=h[t-1];e.relDistance=e.position-(a&&a.position||d)})),m.forEach((function(e,t){var a=h[t-1];e.relDistance=(a&&a.position||d)-e.position})),{minAbsDistance:t,maxAbsDistance:i,maxScore:e,genes:o,genesDownstreamByDist:h,genesUpstreamByDist:m,categoryAggregation:r}}}),[E,n,a]);Object(i.useEffect)((function(){Object(O.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Un,"/tileset_info/?d=").concat(Zn));case 2:return t=e.sent,e.next=5,t.json();case 5:(a=e.sent)[Zn]&&R(a[Zn]);case 7:case"end":return e.stop()}}),e)})))()}),[]);var Y=Hn();Object(i.useLayoutEffect)((function(){if(v){var e=function(){return window.requestAnimationFrame((function(){var e=v.getBoundingClientRect().width;e!==H&&F(e)}))};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),function(){window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}}}),[v]);for(var V=[],Q=0;Q<_n.length;Q++)V.push(_n[Q]());return Object(i.useEffect)((function(){!function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.geneCellEncoding,r=void 0===i?"distribution":i,s=n.prevGeneCellEncoding,l=n.genePadding,u=void 0!==l&&l,d=n.showTooltip,m=void 0===d?h.c:d,p=n.tooltipClasses,f=void 0===p?[]:p,g=n.position,b=void 0===g?"":g,v=n.focusRegion,y=void 0===v?null:v;if(t&&a){var w=Object(Rn.e)(e),x=60,A=60,E=1,k=.5,O=36,C=3,j=1,N=6,M=[0,20],T=Object.values(Vn).length*O+x+A;w.attr("viewbox","0 0 ".concat(t," ").concat(T)).attr("height",T);var I=Object.values(a.categoryAggregation).reduce((function(e,t){return Math.max(e,t.numEnhancers)}),0),D=Object(Rn.d)().domain([1,I]).range([2,O]).clamp(!0),z=Object(Rn.c)().domain([0,1]).range([0,O]).clamp(!0),G=Object(Rn.c)().domain([0,a.maxScore]).range([0,O]).clamp(!0),R=Object(Rn.c)().domain([0,1]).range([1,10]).clamp(!0),P=Object(Rn.d)().domain([1,10]).range([O-E-j,E+j]),L=function(e){return P(R(e))},B=t/2-O,F=Math.floor(B/O),H=a.genesUpstreamByDist.slice(0,F).reverse(),_=a.genesDownstreamByDist.slice(0,F),W=[].concat(Object(S.a)(H),Object(S.a)(_)).reduce((function(e,t){return[Math.min(e[0],t.relDistance),Math.max(e[1],t.relDistance)]}),[1/0,0]),U=Object(c.a)(W,2),Z=U[0],Y=U[1],V=Object(Rn.c)().domain([Z,Y]).range(M),Q=u?H.map((function(e){return Math.round(V(e.relDistance))})):[],X=Oe().domain(H.map((function(e){return e.name}))).range([0,t/2-O/2]).paddingInner(Q),q=u?_.map((function(e){return Math.round(V(e.relDistance))})):[],K=Oe().domain(_.map((function(e){return e.name}))).range([0,t/2-O/2]).paddingInner(q).paddingInnerZeroBased(!0),J=Math.min(X.bandwidth(),K.bandwidth());X.fixedBandwidth(J),K.fixedBandwidth(J);var $=Math.max(0,X.rangeSize()-X.totalWidth()),ee=Math.min(H.reduce((function(e,t){return Math.min(e,t.absDistance)}),1/0),_.reduce((function(e,t){return Math.min(e,t.absDistance)}),1/0)),te=Math.max(H.reduce((function(e,t){return Math.max(e,t.absDistance)}),0),_.reduce((function(e,t){return Math.max(e,t.absDistance)}),0)),ae=Object(Rn.c)().domain([ee,te]).range([2,A]),ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.isRightAligned,n=void 0!==a&&a;e.attr("fill",(function(e,t){return He[t%He.length]})).selectAll("circle").data((function(e){return Xn(e,2*E+k,L)})).join("circle").attr("cx",(function(e){return n?X.bandwidth()-(e.x+2*j):e.x+E+j})).attr("cy",(function(e){return e.y})).attr("r",E)},ie=function(e){var t=Object.values(e[0].samplesByCategory).reduce((function(e,t){return Math.max(e,t.size)}),0);return Math.ceil(Math.sqrt(t*J/O))},oe=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.instanceCache,i=void 0===n?{}:n,o=a.onMouseEnter,r=void 0===o?h.c:o,s=a.onMouseLeave,c=void 0===s?h.c:s,l=a.tooltipTitleGetter,u=void 0===l?null:l,d=J/t,p=function(e){return e%t*d},g=function(e){return Math.floor(e/t)*d};i.current=e.attr("fill",(function(e,t){return He[t%He.length]})).selectAll("rect").data((function(e){return e}),(function(e){return"".concat(e.gene,"|").concat(e.sample)})).join("rect").attr("x",(function(e){return p(Qn[e.sample].index)})).attr("y",(function(e){return g(Qn[e.sample].index)})).attr("width",d).attr("height",d).on("mouseenter",(function(e,t){var a=e.target.getBoundingClientRect(),n=u&&u(t)||t.score.toFixed(3);m(a.x+a.width/2,a.y,n,{arrow:!0,placement:"top",classes:f[Vn[t.sampleCategory].index%f.length]}),r(t)})).on("mouseleave",(function(e){m(),c(e)}))},re=function(e){return o.a.createElement(o.a.Fragment,null,"The enhancer overlapping ",o.a.createElement("strong",null,b),y?" (".concat(y,")"):""," is predicted to regulate"," ",o.a.createElement("strong",null,e.gene)," in sample ",o.a.createElement("strong",null,e.sample)," with a score of ",o.a.createElement("strong",{className:"value"},e.score.toFixed(3)),".")},se={upstream:{current:null},downstream:{current:null}},ce=function(e){var t=function(t){return t.sample===e.sample?1:.2};se.upstream.current.attr("opacity",t),se.downstream.current.attr("opacity",t)},le=function(){se.upstream.current.attr("opacity",1),se.downstream.current.attr("opacity",1)},ue=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.cellWidth,o=void 0===i?O:i,r=n.fillColor,s=void 0===r?_e:r,c=n.forceMaxSize,l=void 0!==c&&c,u=n.textColor,h=void 0===u?He:u,d=n.showText,p=void 0===d||d,g=n.showZero,b=void 0===g||g,v=n.showTooltip,y=void 0!==v&&v,w=n.tooltipTitleGetter,x=void 0===w?null:w,A=l?function(){return t.range()[1]}:function(e){return t(a(e))},E=e.selectAll(".bg").data((function(e){return[e]})).join("rect").attr("class","bg").attr("fill",(function(e){return s[e.row%s.length]})).attr("x",(function(e){return(o-A(e))/2})).attr("y",(function(e){return(O-A(e))/2})).attr("width",A).attr("height",A).attr("opacity",(function(e){return+(a(e)>0)}));if(y?E.on("mouseenter",(function(e,t){var n=e.target.getBoundingClientRect(),i=x&&x(t)||a(t);m(n.x+n.width/2,n.y,i,{arrow:!0,placement:"top",classes:f[t.row%f.length]})})).on("mouseleave",(function(){m()})):E.on("mouseenter",null).on("mouseleave",null),p){var k="font-size: 12px; font-weight: bold;";m&&(k+=" pointer-events: none;"),e.selectAll(".box-text").data((function(e){return[e]})).join("text").attr("class","box-text").attr("fill",(function(e){return h[e.row%h.length]})).attr("style",k).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("x",o/2).attr("y",O/2).attr("opacity",(function(e){return+(a(e)>0||b)})).text((function(e){return a(e)}))}},he=function(e){return o.a.createElement(o.a.Fragment,null,"Found ",e.numEnhancers," active enhancer overlapping ",b," across all"," ",e.category.size," ",Object.values(Vn)[e.row].name," samples.")},de=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("strong",{className:"value"},e.length)," active enhancers found across ",e.size," ",Object.values(Vn)[e.row].name," samples.")},me=function(e){return o.a.createElement(o.a.Fragment,null,"The most likely active enhancer for ",e.maxScoreSample.gene," has an ABC score of ",o.a.createElement("strong",{className:"value"},e.maxScore.toFixed(3))," and is found in ",e.maxScoreSample.sample.replaceAll("_"," ")," (Overall max. ABC score is ",a.maxScore.toFixed(3),").")},pe=w.select("#enhancers").attr("transform","translate(".concat(t/2-O/2,", 0)")),fe=pe.selectAll(".enhancer-gene-aggregate").data(Object.values(a.categoryAggregation).map((function(e,t){return e.row=t,e})),(function(e){return e.category.name})).join("g").attr("class","enhancer-gene-aggregate").attr("transform",(function(e,t){return"translate(0, ".concat(t*O+x,")")}));ue(fe,D,(function(e){return e.numEnhancers}),{fillColor:["#fff"],showTooltip:!0,tooltipTitleGetter:he,forceMaxSize:!0}),w.select("#enhancers").selectAll(".enhancer-box-border").data(Object.values(Vn),(function(e){return e.name})).join("rect").attr("class","enhancer-box-border").attr("fill","none").attr("stroke",(function(e,t){return _e[t%_e.length]})).attr("stroke-width","1").attr("x",0).attr("y",(function(e,t){return t*O+x})).attr("width",O).attr("height",O);var ge=w.select("#genes-upstream").selectAll(".gene-upstream").data(H,(function(e){return e.name})).join("g").attr("class","gene-upstream").attr("transform",(function(e){return"translate(".concat($+X(e.name),", 0)")})),be=X.bandwidth()/2,ve=x-C;ge.selectAll(".gene-upstream-label").data((function(e){return[e]})).join("text").attr("class","gene-label gene-upstream-label").attr("style","font-size: 9px;").attr("transform","translate(".concat(be,",").concat(ve,") rotate(-90)")).attr("fill","black").attr("dominant-baseline","middle").text((function(e){return e.name}));var ye=ge.selectAll(".gene-upstream-cell").data((function(e){return Object.values(e.samplesByCategory).map((function(e,t){return e.row=t,e}))}),(function(e){return e.name})).join("g").attr("class","gene-upstream-cell").attr("transform",(function(e,t){return"translate(0, ".concat(t*O+x,")")}));switch(r!==s&&ye.selectAll("*").remove(),r){case"distribution":ne(ye,{isRightAligned:!0});break;case"array":oe(ye,ie(H),{tooltipTitleGetter:re,instanceCache:se.upstream,onMouseEnter:ce,onMouseLeave:le});break;case"number":case"percent":var we="percent"===r?z:D,xe="percent"===r?function(e){return e.length/e.size}:function(e){return e.length};ue(ye,we,xe,{showText:!1,cellWidth:X.bandwidth(),fillColor:Fe,showTooltip:!0,tooltipTitleGetter:de});break;case"max-score":default:ue(ye,G,(function(e){return e.maxScore}),{showText:!1,cellWidth:X.bandwidth(),fillColor:Fe,showTooltip:!0,tooltipTitleGetter:me})}ge.selectAll(".gene-upstream-border").data(Object.values(Vn),(function(e){return e.name})).join("rect").attr("class","gene-upstream-border").attr("fill","none").attr("stroke",(function(e,t){return _e[t%_e.length]})).attr("stroke-width","1").attr("x",0).attr("y",(function(e,t){return t*O+x})).attr("width",X.bandwidth()).attr("height",O),ge.selectAll(".gene-upstream-distance-bar").data((function(e){return[e]})).join("rect").attr("class","gene-upstream-distance-bar").attr("fill","#bbbbbb").attr("x",X.bandwidth()/2-N/2).attr("y",Object.values(Vn).length*O+x).attr("width",N).attr("height",(function(e){return ae(e.absDistance)})),w.select("#genes-downstream").attr("transform","translate(".concat(t/2+O/2,", 0)"));var Ae=w.select("#genes-downstream").selectAll(".gene-downstream").data(_,(function(e){return e.name})).join("g").attr("class","gene-downstream").attr("transform",(function(e){return"translate(".concat(K(e.name),", 0)")}));Ae.selectAll(".gene-downstream-label").data((function(e){return[e]})).join("text").attr("class","gene-label gene-downstream-label").attr("style","font-size: 9px;").attr("transform","translate(".concat(be,",").concat(ve,") rotate(-90)")).attr("fill","black").attr("dominant-baseline","middle").text((function(e){return e.name}));var Ee=Ae.selectAll(".gene-downstream-cell").data((function(e){return Object.values(e.samplesByCategory).map((function(e,t){return e.row=t,e}))}),(function(e){return e.name})).join("g").attr("class","gene-downstream-cell").attr("transform",(function(e,t){return"translate(0, ".concat(t*O+x,")")}));switch(r!==s&&Ee.selectAll("*").remove(),r){case"distribution":ne(Ee);break;case"array":oe(Ee,ie(_),{tooltipTitleGetter:re,instanceCache:se.downstream,onMouseEnter:ce,onMouseLeave:le});break;case"number":case"percent":var ke="percent"===r?z:D,Ce="percent"===r?function(e){return e.length/e.size}:function(e){return e.length};ue(Ee,ke,Ce,{showText:!1,cellWidth:K.bandwidth(),fillColor:Fe,showTooltip:!0,tooltipTitleGetter:de});break;case"max-score":default:ue(Ee,G,(function(e){return e.maxScore}),{showText:!1,cellWidth:K.bandwidth(),fillColor:Fe,showTooltip:!0,tooltipTitleGetter:me})}Ae.selectAll(".gene-downstream-border").data(Object.values(Vn),(function(e){return e.name})).join("rect").attr("class","gene-downstream-border").attr("fill","none").attr("stroke",(function(e,t){return _e[t%_e.length]})).attr("stroke-width","1").attr("x",0).attr("y",(function(e,t){return t*O+x})).attr("width",K.bandwidth()).attr("height",O),Ae.selectAll(".gene-downstream-distance-bar").data((function(e){return[e]})).join("rect").attr("class","gene-downstream-distance-bar").attr("fill","#bbbbbb").attr("x",K.bandwidth()/2-N/2).attr("y",Object.values(Vn).length*O+x).attr("width",N).attr("height",(function(e){return ae(e.absDistance)}));var je=Math.ceil((te-ee)/1e5),Se=Math.ceil(je/4),Ne=je<=1?[ee,te]:Array(4).fill().map((function(e,t){return 1e5*Math.ceil(ee/1e5)+t*(1e5*Se)}));w.select("#gene-distance-axis").attr("transform","translate(0, ".concat(Object.values(Vn).length*O+x,")")).call(Object(Rn.a)(ae).tickSize(t).tickFormat((function(e){var t=(e/1e6).toFixed(1);return this.parentNode.nextSibling?t:"".concat(t," Mbp distance to enhancer")})).tickValues(Ne)).call((function(e){return e.select(".domain").remove()})).call((function(e){return e.selectAll(".tick line").attr("stroke","#bbbbbb").attr("stroke-width",.5).attr("stroke-dasharray","4,4")})).call((function(e){return e.selectAll(".tick text").attr("fill","#bbbbbb").attr("x",t/2).attr("dy",1).attr("text-anchor","middle").attr("dominant-baseline","hanging")}))}}(v,B,Z,{geneCellEncoding:r,prevGeneCellEncoding:_,genePadding:p,showTooltip:t,classes:Y,tooltipClasses:V,position:m,focusRegion:u})}),[v,B,Z,r,p,t]),o.a.createElement(j.a,{className:Y.root,container:!0,justify:"center",alignItems:"center"},U&&!T?o.a.createElement(j.a,{item:!0,className:Y.plot},o.a.createElement("svg",{ref:W,className:Y.plotSvg},o.a.createElement("g",{id:"enhancers"}),o.a.createElement("g",{id:"gene-distance-axis"}),o.a.createElement("g",{id:"genes-upstream"}),o.a.createElement("g",{id:"genes-downstream"}))):o.a.createElement(f.a,{color:"inherit"}))})),Kn=Object(g.a)((function(e){return{plot:{minHeight:"6rem"}}})),Jn=o.a.memo((function(){var e=Object(l.e)(Mt),t=Kn();return o.a.createElement("div",null,o.a.createElement(On,{id:"enhancer-gene",title:"Enhancer-Gene Connections",popoverDirection:"top",useShowInfo:ia,Info:Nn,Help:Mn,Settings:zn}),o.a.createElement("div",{className:t.plot},e&&o.a.createElement(qn,null)))})),$n=Object(g.a)((function(e){return{root:{display:"flex",justifyContent:"space-between"},text:{fontSize:"0.8rem"}}})),ei=o.a.memo((function(){var e=A(),t=Object(l.e)(jt),a=Object(l.e)(Kt(e)),n=$n(),i=Math.round((a[1]-a[0])/1e3);return t?o.a.createElement("div",{className:n.root},o.a.createElement("span",null,"\u251c"),o.a.createElement(K.a,{align:"center",className:n.text,noWrap:!0},ke(i,1)," ",o.a.createElement("abbr",{title:"kilo base pairs"},"Kbp")),o.a.createElement("span",null,"\u2524")):""})),ti=o.a.memo((function(){return o.a.createElement(K.a,null,"This panel visualizes the DNA accessibility of all 131 samples. Each track is individually normalized. Mouse over a track to see the underlying value. To focus on a specific locus specify a focus variant.")})),ai=Object(g.a)((function(e){return{iconRadioLegend:{margin:e.spacing(2,0,.25,0)},switch:{margin:0}}})),ni=o.a.memo((function(){var e=Pe("dal",Ot),t=Object(c.a)(e,2),a=t[0],n=t[1],i=Pe("darn",Ct),r=Object(c.a)(i,2),s=r[0],l=r[1],u=function(e){return function(){n(e)}},h=ai();return o.a.createElement(o.a.Fragment,null,o.a.createElement(N.a,{m:1},o.a.createElement(X.a,{className:h.switch,control:o.a.createElement(In,{checked:s,onChange:function(e){l(e.target.checked)},name:"true"}),label:"Row-wise normalization"})),o.a.createElement(N.a,{m:1},o.a.createElement(D.a,{component:"fieldset"},o.a.createElement(pn.a,{component:"legend",className:h.iconRadioLegend},"Labels"),o.a.createElement(fn.a,{"aria-label":"dnaAccessLabelStyle",name:"dnaAccessLabelStyle",value:a},o.a.createElement(X.a,{label:"Indicator",value:"indicator",className:h.iconRadio,control:o.a.createElement(ha.a,{size:"small",onClick:u("indicator")},"indicator"===a?o.a.createElement(hn.a,{className:h.iconRadioActive,fontSize:"inherit"}):o.a.createElement(mn.a,{fontSize:"inherit"}))}),o.a.createElement(X.a,{label:"Text",value:"text",className:h.iconRadio,control:o.a.createElement(ha.a,{size:"small",onClick:u("text")},"text"===a?o.a.createElement(hn.a,{className:h.iconRadioActive,fontSize:"inherit"}):o.a.createElement(mn.a,{fontSize:"inherit"}))}),o.a.createElement(X.a,{label:"Hidden",value:"hidden",className:h.iconRadio,control:o.a.createElement(ha.a,{size:"small",onClick:u("hidden")},"hidden"===a?o.a.createElement(hn.a,{className:h.iconRadioActive,fontSize:"inherit"}):o.a.createElement(mn.a,{fontSize:"inherit"}))})))))})),ii=Object(g.a)((function(e){return{root:{position:"absolute",top:0,right:0,bottom:0,left:0},grow:{flexGrow:1}}})),oi=o.a.memo((function(){var e=A(),t=Object(l.f)(Ht),a=Object(l.e)(bt),n=Object(l.e)(Ot),r=Object(l.e)(Ct),s=Object(l.e)(It),c=Object(l.e)(At),d=Object(l.e)(Qt(e)),m=Object(i.useRef)(null),p=J(Object(l.e)(Kt(e)),500),f=Object(i.useCallback)((function(e){null!==e&&(t(e.api),m.current=e.api)}),[t]),g=Object(i.useMemo)((function(){return Object(h.l)(lt(c),ut(d,[2]),ht(s),(t=n,function(e){return e.views[0].tracks.top[3].options.showRowLabels=!(!t||"hidden"===t)&&t,e}),function(e){return function(t){return t.views[0].tracks.top[3].options.rowNormalization=e,t}}(r),dt.apply(void 0,Object(S.a)(p).concat([{force:!0}])),(e=a,function(t){return t.views[0].tracks.top[3].options.rowSelections=nt.filter((function(t,a){return e[a]})),t}))(Object(h.b)(ot));var e,t}),[c,d,p,s,n,a,r]);Object(i.useEffect)((function(){return function(){m.current&&m.current.destroy()}}),[]);var b=ii();return o.a.createElement(j.a,{container:!0,direction:"column",className:b.root},o.a.createElement(On,{id:"dna-accessibility",title:"DNA Accessibility",useShowInfo:ea,Info:ei,Help:ti,Settings:ni}),o.a.createElement(j.a,{item:!0,container:!0,direction:"column",className:b.grow},o.a.createElement(u.HiGlassComponent,{ref:f,viewConfig:g,options:{sizeMode:"scroll",pixelPreciseMarginPadding:!0,containerPaddingX:0,containerPaddingY:0,viewMarginTop:0,viewMarginBottom:0,viewMarginLeft:0,viewMarginRight:0,viewPaddingTop:0,viewPaddingBottom:0,viewPaddingLeft:0,viewPaddingRight:16,globalMousePosition:!0}})))})),ri=Object(g.a)((function(e){return{root:{position:"absolute",display:"flex",top:0,right:0,bottom:0,left:0},toolbar:e.mixins.toolbar,content:{flexGrow:1,padding:e.spacing(1),backgroundColor:"white"},grow:{flexGrow:1},separator:{zIndex:1,margin:"-".concat(e.spacing(1),"px 0"),width:1,background:e.palette.grey[300]},enhancerWrapper:{position:"relative",flexGrow:1,margin:"-8px 0 -8px -8px"},enhancer:{position:"absolute",top:0,right:0,bottom:0,left:0,overflowY:"auto","&> div":{minHeight:"100%"}},enhancerRegions:{position:"relative",flexGrow:1},enhancerGenes:{position:"relative"},dnaAccessibility:{position:"relative",width:"20rem",margin:"-8px -8px -8px 0"}}})),si=o.a.memo((function(){var e=A();Le("vt",At,ft),Le("w",kt),Le("g",St),Le("f",Mt,(function(e){return Array.isArray(e)?De(e):e})),Le("dal",Ot),Le("darn",Ct),Le("dai",jt),Le("eri",Gt),Le("eri",Dt),Le("eri",zt),Le("egi",Rt),Le("egp",Pt),Le("egce",Lt),Le("vs",It),function(e){Le("s",_t(e),Ne)}(e),function(e){Le("e",Wt(e),Ne)}(e);var t=Jt(),a=Object(c.a)(t,2),n=a[0],r=a[1],s=$t(),u=Object(c.a)(s,2),d=u[0],m=u[1],p=Object(l.d)(Nt),f=Object(c.a)(p,2),g=f[0],b=f[1],v=Object(l.d)(Tt),y=Object(c.a)(v,2),w=y[0],x=y[1],E=function(e){e?(r(e.geneName),b(e)):(r(""),b(null))},S=function(e){e?(m(e.geneName),x(e)):(m(""),x(null))},N=ri();return Object(i.useEffect)((function(){Object(O.a)(k.a.mark((function e(){var t,a,i,o,r,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||g){e.next=9;break}return e.next=3,fetch("".concat(We,"&ac=").concat(n));case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,(i=a[0])&&(i.type="gene",E(a[0]));case 9:if(!d||!Object(h.f)(d)||w){e.next=18;break}return e.next=12,fetch("".concat(Ue,"&ac=").concat(d));case 12:return o=e.sent,e.next=15,o.json();case 15:r=e.sent,(s=r[0])&&(s.type="variant",S(r[0]));case 18:case"end":return e.stop()}}),e)})))()}),[]),o.a.createElement("div",{className:N.root},o.a.createElement(Ia,null,o.a.createElement(C.a,null),o.a.createElement(rn,null),o.a.createElement(Ga,null),o.a.createElement(Fn,null,o.a.createElement(j.a,{container:!0,direction:"column",className:N.content,wrap:"nowrap"},o.a.createElement("div",{className:N.toolbar}),o.a.createElement(j.a,{container:!0,className:N.grow,wrap:"nowrap"},o.a.createElement("div",{className:N.enhancerWrapper},o.a.createElement("div",{className:N.enhancer},o.a.createElement(j.a,{container:!0,direction:"column"},o.a.createElement(j.a,{item:!0,className:N.enhancerRegions},o.a.createElement(jn,null)),o.a.createElement(j.a,{item:!0,className:N.enhancerGenes},o.a.createElement(Jn,null))))),o.a.createElement("div",{className:N.separator}),o.a.createElement("div",{className:N.dnaAccessibility},o.a.createElement(oi,null)))))))})),ci=function(e,t){return function(a){return function(n){return e(n)?o.a.createElement(t,n):o.a.createElement(a,n)}}},li=(a(448),Object(d.a)({palette:{primary:{main:"#000"},secondary:{main:"#000"}}})),ui=function(){var e=Object(i.useState)(null),t=Object(c.a)(e,2),a=t[0],n=t[1];Object(i.useEffect)((function(){Object(u.ChromosomeInfo)("https://s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv").then((function(e){void 0===e.totalLength?n(!1):n(e)})).catch((function(){n(!1)}))}),[]);var r=Object(h.l)(ci((function(){return null===a}),v),ci((function(){return!1===a}),y))(si);return o.a.createElement("div",{className:"App"},o.a.createElement(l.a,null,o.a.createElement(m.a,{theme:li},o.a.createElement(x,{chromInfo:a},o.a.createElement(r,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var hi=a(36),di=a(26),mi=a(28);function pi(e){if(!(this instanceof pi?this.constructor:void 0))throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');for(var t=e.services.pubSub,a=function(){function e(t,a){var n=this;Object(di.a)(this,e);var i=t.definition,o=t.getTrackObject,r=t.onNewTilesLoaded;this.animate=r,this.options=a,this.overlaysTrack=o(i.overlaysTrack),this.overlaysTrack?(this.annotationTrackIds=new Set,this.annotationTracks=i.options.annotationTracks.map((function(e){var t=o(e);return t?n.annotationTrackIds.add(t.uuid):console.warn("Child track (uid: ".concat(e,") not found")),t})).filter((function(e){return e})),this.tilesDrawnEndHandlerBound=this.tilesDrawnEndHandler.bind(this),this.drawnAnnotations=new Map,this.tracksDrawingTiles=new Set,this.pubSubs=[],this.annotationTracks.forEach((function(e){e.subscribe("tilesDrawn",n.tilesDrawnEndHandlerBound)}))):console.warn("Overlays track (uid: ".concat(i.overlaysTrack,") not found"))}return Object(mi.a)(e,[{key:"remove",value:function(){var e=this;this.pubSubs.forEach(t.unsubscribe),this.pubSubs=void 0,this.annotationTracks.forEach((function(t){t.unsubscribe("tileDrawn",e.annotationsDrawnHandlerBound)}))}},{key:"tilesDrawnEndHandler",value:function(e){var t=this,a=e.uuid,n=e.annotations,i=void 0===n?[]:n;this.annotationTrackIds.has(a)&&(this.tracksDrawingTiles.add(a),i.forEach((function(e){var a=e.xStartAbs,n=e.xEndAbs,i=e.data;t.drawnAnnotations.set(i.uid,[a,n])})),this.tracksDrawingTiles.size%this.annotationTracks.length||this.updateOverlays())}},{key:"updateOverlays",value:function(){this.overlaysTrack.options.extent=Array.from(this.drawnAnnotations.values()),this.overlaysTrack.draw(),this.tracksDrawingTiles.clear(),this.drawnAnnotations.clear()}}]),e}(),n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return Object(hi.a)(a,i)}pi.config={type:"annotation-overlay",availableOptions:["annotationTracks"],defaultOptions:{annotationTracks:[]}};var fi=pi,gi=a(38),bi=a(29),vi=a(32),yi=a(33),wi=Float32Array.BYTES_PER_ELEMENT,xi="precision mediump float;\n\n  attribute vec2 aPrevPosition;\n  attribute vec2 aCurrPosition;\n  attribute vec2 aNextPosition;\n  attribute float aOffsetSign;\n  attribute float aColorIndex;\n\n  uniform sampler2D uAreaColorTex;\n  uniform float uAreaColorTexRes;\n  uniform mat3 projectionMatrix;\n  uniform mat3 translationMatrix;\n\n  uniform vec4 uLineColor;\n  uniform vec4 uNaNColor;\n  uniform float uWidth;\n  uniform int uMiter;\n\n  varying vec4 vColor;\n\n  void main(void)\n  {\n    mat3 model = projectionMatrix * translationMatrix;\n\n    if (aColorIndex <= -0.5) {\n      // Render line\n      vColor = vec4(uLineColor.rgb, 1.0);\n\n      vec4 prevGlPos = vec4((model * vec3(aPrevPosition, 1.0)).xy, 0.0, 1.0);\n      vec4 currGlPos = vec4((model * vec3(aCurrPosition, 1.0)).xy, 0.0, 1.0);\n      vec4 nextGlPos = vec4((model * vec3(aNextPosition, 1.0)).xy, 0.0, 1.0);\n\n      // Calculate the direction\n      vec2 dir = vec2(0.0);\n\n      if (currGlPos == prevGlPos) {\n        // start point uses (next - current)\n        dir = normalize(nextGlPos.xy - currGlPos.xy);\n      }\n      else if (currGlPos == nextGlPos) {\n        // end point uses (current - previous)\n        dir = normalize(currGlPos.xy - prevGlPos.xy);\n      }\n      else {\n        // somewhere in middle, needs a join:\n        // get directions from (C - B) and (B - A)\n        vec2 dirA = normalize((currGlPos.xy - prevGlPos.xy));\n        if (uMiter == 1) {\n          vec2 dirB = normalize((nextGlPos.xy - currGlPos.xy));\n          // now compute the miter join normal and length\n          vec2 tangent = normalize(dirA + dirB);\n          vec2 perp = vec2(-dirA.y, dirA.x);\n          vec2 miter = vec2(-tangent.y, tangent.x);\n          dir = tangent;\n        } else {\n          dir = dirA;\n        }\n      }\n\n      float width = (projectionMatrix * vec3(uWidth, 0.0, 0.0)).x / 2.0;\n\n      vec2 normal = vec2(-dir.y, dir.x) * width;\n      // normal.x /= aspectRatio;\n      vec4 offset = vec4(normal * aOffsetSign, 0.0, 0.0);\n      gl_Position = currGlPos + offset;\n    } else {\n      // Render area\n      float colorRowIndex = aColorIndex / uAreaColorTexRes;\n\n      vec2 colorTexIndex = vec2(\n        (aColorIndex / uAreaColorTexRes) - colorRowIndex,\n        colorRowIndex / uAreaColorTexRes\n      );\n      vColor = texture2D(uAreaColorTex, colorTexIndex);\n\n      gl_Position = vec4((model * vec3(aCurrPosition, 1.0)).xy, 0.0, 1.0);\n    }\n  }\n",Ai="precision mediump float;\n\n  varying vec4 vColor;\n\n  void main() {\n    gl_FragColor = vColor;\n  }\n",Ei=Array(127).fill().map((function(e,t){var a=.5*(1-t/127)+.5;return[a,a,a,1]})),ki=function(e){return Object.values(e).reduce((function(e,t){return Math.max(e,t.tileData.maxNonZero)}),-1/0)},Oi=function(e){return Object.values(e)[0].tileData.coarseShape[0]},Ci=function(e){return Object(h.h)(Object.values(e).map((function(e){return e.tileData.maxValueByRow})))},ji=function(e,t,a){var n=(a.domain()[1]-a.domain()[0])/(t.domain()[1]-t.domain()[0]),i=t.domain().map(a)[0];e.scale.x=n,e.position.x=-i*n},Si=function(e,t,a){return t.length/e/4/(1+a)-2},Ni=function e(t){if(!(this instanceof e?this.constructor:void 0))throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');for(var a=t.libraries.PIXI,n=t.libraries.d3Format.format,i=t.libraries.d3Scale.scaleLinear,o=t.services.tileProxy,r=function(e){var t=Math.max(2,Math.ceil(Math.sqrt(e.length))),n=new Float32Array(4*Math.pow(t,2));return e.forEach((function(e,t){n[4*t]=e[0],n[4*t+1]=e[1],n[4*t+2]=e[2],n[4*t+3]=e[3]})),[a.Texture.fromBuffer(n,t,t),t]},s=function(e){Object(vi.a)(l,e);var s=Object(yi.a)(l);function l(e,t){var n;return Object(di.a)(this,l),(n=s.call(this,e,t)).updateOptions(),n.pLoading=new a.Graphics,n.pLoading.position.x=0,n.pLoading.position.y=0,n.pMasked.addChild(n.pLoading),n.loadIndicator=new a.Text("Loading data...",{fontSize:n.labelSize||10,fill:8421504}),n.pLoading.addChild(n.loadIndicator),n}return Object(mi.a)(l,[{key:"initTile",value:function(e){this.coarsifyTileValues(e)}},{key:"destroyTile",value:function(){}},{key:"binsPerTile",value:function(){return this.tilesetInfo.bins_per_dimension||256}},{key:"getTilePosAndDimensions",value:function(e,t,a){var n=a||this.binsPerTile();if(this.tilesetInfo.resolutions){var i=this.tilesetInfo.resolutions.map((function(e){return+e})).sort((function(e,t){return t-e}))[e],o=i*n,r=o;return{tileX:i*n*t[0],tileY:i*n*t[1],tileWidth:o,tileHeight:r}}var s=t[0],c=t[1],l=this.tilesetInfo.min_pos[0],u=this.options.reverseYAxis?-this.tilesetInfo.max_pos[1]:this.tilesetInfo.min_pos[1],h=this.tilesetInfo.max_width/Math.pow(2,e),d=this.tilesetInfo.max_width/Math.pow(2,e);return{tileX:l+s*h,tileY:u+c*d,tileWidth:h,tileHeight:d}}},{key:"updateOptions",value:function(){var e=this;switch(this.selectRowsAggregationMode=this.options.selectRowsAggregationMode||"mean",this.selectRowsAggregationMode){case"max":this.selectRowsAggregationFn=h.g;break;case"min":this.selectRowsAggregationFn=h.j;break;case"sum":this.selectRowsAggregationFn=h.o;break;case"mean":default:this.selectRowsAggregationFn=h.i}this.markArea=!!this.options.markArea,this.markAreaColor="grays",this.markColor=t.utils.colorToHex(this.options.markColor||"black"),this.markColorRgbNorm=this.options.markColor?t.utils.colorToRgba(this.options.markColor).slice(0,3).map((function(e){return Math.min(1,Math.max(0,e/255))})):[0,0,0];var a=r(Object(S.a)(Ei)),n=Object(c.a)(a,2);this.markColorTex=n[0],this.markColorTexRes=n[1],this.markNumColors=Ei.length,this.markOpacity=Number.isNaN(+this.options.markOpacity)?1:Math.min(1,Math.max(0,+this.options.markOpacity)),this.markSize=this.options.markSize||2;var i=this.markResolution;this.markResolution=Math.max(1,Math.min(256,this.options.markResolution||64));var o=this.rowHeight;this.rowHeight=Number.isNaN(+this.options.rowHeight)?"auto":+this.options.rowHeight;var s=this.rowPadding;this.rowPadding="auto"===this.rowHeight?0:this.options.rowPadding||0;var l=this.rowNormalization;this.rowNormalization=this.options.rowNormalization||!1;var u=this.rowSelections;this.rowSelections=this.options.rowSelections||this.rowSelections||[];var d=this.showRowLabels;this.showRowLabels=this.options.showRowLabels,i===this.markResolution&&u===this.rowSelections||(this.updateTiles(),this.updateRowLabels(),this.drawLabel()),o===this.rowHeight&&s===this.rowPadding&&l===this.rowNormalization||this.updateScales(),d!==this.showRowLabels&&(this.updateRowLabels(),this.drawLabel()),this.rowLabelAlign=this.options.rowLabelAlign||"left",this.rowLabelSize=this.options.rowLabelSize||12,this.rowCategories=this.options.rowCategories||{},this.rowIdToCategory=function(e){return e.substring(0,e.length-14)},this.rowIdToCategory=this.options.rowIdToCategory?function(t){return t[e.options.rowIdToCategory.fn].apply(t,Object(S.a)(e.options.rowIdToCategory.args))}:h.c}},{key:"removeRowLabels",value:function(){for(;this.pAxis.children.length;)this.pAxis.removeChildAt(0);this.rowLabels&&(this.rowLabels.forEach((function(e){e.destroy()})),this.rowLabels=void 0)}},{key:"updateRowLabels",value:function(){var e=this;if(this.tilesetInfo&&this.tilesetInfo.row_infos){var n=this.rowSelections.length?this.rowSelections.map((function(t){return void 0===e.tilesetInfo.row_infos[t]?"?":e.rowIdToCategory(e.tilesetInfo.row_infos[t].id)})):this.tilesetInfo.row_infos.map((function(t){var a=t.id;return e.rowIdToCategory(a)}));this.removeRowLabels(),"indicator"===this.showRowLabels?this.rowLabels=n.map((function(n){var i=new a.Sprite(a.Texture.WHITE);return i.width=e.rowLabelSize/2,i.height=e.rowLabelSize,i.tint=e.rowCategories[n]?t.utils.colorToHex(e.rowCategories[n].axisLabelColor||Fe[e.rowCategories[n].index%Fe.length]):8421504,i})):this.showRowLabels&&(this.rowLabels=n.map((function(n){return new a.Text(n,{fontSize:e.rowLabelSize,align:"right"===e.rowLabelAlign?"right":"left",fill:e.rowCategories[n]?t.utils.colorToHex(e.rowCategories[n].axisLabelColor||He[e.rowCategories[n].index%He.length]):8421504})})))}}},{key:"drawLabel",value:function(){var e=this;if(this.showRowLabels){if(this.showRowLabels&&!this.rowLabels&&this.updateRowLabels(),this.rowLabels){var t=Object(c.a)(this.dimensions,1)[0],a=Object(c.a)(this.position,2),n=a[0],i=a[1];this.pAxis.position.x="right"===this.axisAlign?n+t:n,this.pAxis.position.y=i,this.pAxis.clear();var o=0,r="right"===this.axisAlign?-3:3,s=this.getRowHeight(),l=Object(c.a)(s,2)[1],u=l/2;this.rowLabels.forEach((function(t,a){t.x=r,t.y=o-e.rowPadding+u,t.anchor.x="right"===e.axisAlign?1:0,t.anchor.y=.5,o+=l,e.pAxis.addChild(t)}))}}else if(this.rowLabels)for(;this.pAxis.children.length;)this.pAxis.removeChildAt(0)}},{key:"rerender",value:function(e){this.options=e,this.updateOptions(),this.updateExistingGraphics()}},{key:"hasFetchedTiles",value:function(){return Object.values(this.fetchedTiles).length}},{key:"coarsifyTileValues",value:function(e){var t=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),a=t.tileX,n=t.tileWidth,i=Object(c.a)(e.tileData.shape,1)[0],o=Math.floor(256/this.markResolution),r=n/this.markResolution,s=r/2;e.tileData.binXPos=Array(this.markResolution).fill();for(var l=0;l<=this.markResolution;l++)e.tileData.binXPos[l]=a+r*l+s;e.tileData.valuesByRow=Array(i).fill().map((function(){return[]})),e.tileData.maxValueByRow=Array(i).fill(-1/0);for(var u=0;u<i;u++)for(var d=0;d<256;d+=o){var m=Object(h.i)(e.tileData.dense.subarray(256*u+d,256*u+d+o));e.tileData.valuesByRow[u].push(m),e.tileData.maxValueByRow[u]=m>e.tileData.maxValueByRow[u]?m:e.tileData.maxValueByRow[u]}this.rowSelections.length&&(e.tileData.valuesByRow=this.rowSelections.map((function(t){return e.tileData.valuesByRow[t]})).filter(h.c),e.tileData.maxValueByRow=this.rowSelections.map((function(t){return e.tileData.maxValueByRow[t]})).filter(h.c)),e.tileData.coarseShape=[e.tileData.valuesByRow.length,this.markResolution]}},{key:"updateTiles",value:function(){Object.values(this.fetchedTiles).forEach(this.coarsifyTileValues.bind(this))}},{key:"updateScales",value:function(){var e=this,t=Object.values(this.fetchedTiles);if(t.length){var a=Oi(t),n=this.getRowHeight(),o=Object(c.a)(n,1)[0],r=this.getTrackHeight(a,o),s=ki(this.fetchedTiles);if(this.valueScale=i().domain([0,s]).range([o,0]),this.colorIndexScale=i().domain([0,s]).range([0,this.markNumColors]).clamp(!0),this.rowNormalization){var l=Ci(this.fetchedTiles);this.rowValueScales={},this.rowColorIndexScales={};for(var u=0;u<a;u++)this.rowValueScales[u]=i().domain([0,l[u]]).range([o,0]),this.rowColorIndexScales[u]=i().domain([0,l[u]]).range([0,this.markNumColors]).clamp(!0);this.valueScaleByRow=function(t,a){return Number.isNaN(t)?o:e.rowValueScales[a](t)},this.colorIndexScaleByRow=function(t,a){return Number.isNaN(t)?-2:e.rowColorIndexScales[a](t)}}else this.valueScaleByRow=function(t,a){return Number.isNaN(t)?o:e.valueScale(t)},this.colorIndexScaleByRow=function(t,a){return Number.isNaN(t)?-2:e.colorIndexScale(t)};this.rowScale=i().domain([0,a]).range([0,r+this.rowPadding])}}},{key:"tilesToData",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.markArea,i=a.maxRows,o=void 0===i?1/0:i,r=a.rowHeight;if(!e.length)return[];var s=Math.min(o,Oi(e)),c=Array(s).fill().map((function(){return[]})),l=Array(s).fill().map((function(){return[]})),u=Array(s).fill().map((function(){return[]}));e.forEach((function(e){e.tileData.valuesByRow.forEach((function(a,i){i>=o||a.forEach((function(a,o){var s=t._xScale(e.tileData.binXPos[o]),h=t.rowScale(i),d=h+t.valueScaleByRow(a,i);c[i].push(s,d,s,d),l[i].push(-1,-1),u[i].push(1,-1),n&&(c[i].push(s,d,s,h+r),l[i].push(t.colorIndexScaleByRow(a,i),0),u[i].push(0,0))}))}))}));for(var d=n?8:4,m=n?4:2,p=0;p<s;p++){var f,g,b,v,y,w;if((f=c[p]).unshift.apply(f,Object(S.a)(c[p].slice(0,d))),p>0)(y=l[p]).unshift.apply(y,Object(S.a)(l[p].slice(0,m))),(w=u[p]).unshift.apply(w,Object(S.a)(u[p].slice(0,m)));(g=c[p]).push.apply(g,Object(S.a)(c[p].slice(-d))),(b=l[p]).push.apply(b,Object(S.a)(l[p].slice(-m))),(v=u[p]).push.apply(v,Object(S.a)(u[p].slice(-m)))}return[new Float32Array(c.flatMap(h.c)),new Float32Array(l.flatMap(h.c)),new Float32Array(u.flatMap(h.c))]}},{key:"toLineIndices",value:function(e,t,a){var n=a?12:6,i=a?4:2,o=new Uint32Array((t-1)*e*n),r=0;if(a)for(var s=0;s<e;s++)for(var c=0;c<t-1;c++){var l=s*(t+2)*i+c*i,u=l+1,h=l+2,d=l+3,m=l+4,p=l+5,f=l+6,g=l+7,b=r*n;o[b]=h,o[b+1]=d,o[b+2]=f,o[b+3]=f,o[b+4]=d,o[b+5]=g,o[b+6]=l,o[b+7]=u,o[b+8]=m,o[b+9]=m,o[b+10]=u,o[b+11]=p,r++}else for(var v=0;v<e;v++)for(var y=0;y<t-1;y++){var w=v*(t+2)*i+y*i,x=w+1,A=w+2,E=w+3,k=r*n;o[k]=w,o[k+1]=x,o[k+2]=A,o[k+3]=A,o[k+4]=x,o[k+5]=E,r++}return o}},{key:"getRowHeight",value:function(e){var t=Object(c.a)(this.dimensions,2)[1];return"auto"===this.rowHeight?[Math.floor(t/e),Math.floor(t/e)]:[this.rowHeight,this.rowHeight+this.rowPadding]}},{key:"getTrackHeight",value:function(e,t){var a=Object(c.a)(this.dimensions,2)[1];return"auto"===this.rowHeight?a:t*e+this.rowPadding*(e-1)}},{key:"renderLines",value:function(){this.drawnAtScale=i().domain(Object(S.a)(this.xScale().domain())).range(Object(S.a)(this.xScale().range()));var e=Object.values(this.fetchedTiles),t=Oi(e),n=this.getRowHeight(t),o=Object(c.a)(n,1)[0],r=this.tilesToData(e,{maxRows:t,markArea:this.markArea,rowHeight:o}),s=Object(c.a)(r,3),l=s[0],u=s[1],h=s[2],d=Si(t,l,this.markArea),m=this.toLineIndices(t,d,this.markArea),p=new a.UniformGroup({uLineColor:[].concat(Object(S.a)(this.markColorRgbNorm),[1]),uNaNColor:[1,1,1,1],uAreaColorTex:this.markColorTex,uAreaColorTexRes:this.markColorTexRes,uWidth:.25,uMiter:1}),f=a.Shader.from(xi,Ai,p),g=new a.Geometry,b=this.markArea?4:2;g.addAttribute("aPrevPosition",l,2,!1,a.TYPES.FLOAT,2*wi,0),g.addAttribute("aCurrPosition",l,2,!1,a.TYPES.FLOAT,2*wi,2*wi*b),g.addAttribute("aNextPosition",l,2,!1,a.TYPES.FLOAT,2*wi,2*wi*b*2),g.addAttribute("aOffsetSign",h,1),g.addAttribute("aColorIndex",u,1),g.addIndex(m);var v=new a.Mesh(g,f),y=new a.Graphics;y.addChild(v),this.pMain.x=this.position[0],this.lineGraphics&&(this.pMain.removeChild(this.lineGraphics),this.lineGraphics.destroy()),this.pMain.addChild(y),this.lineGraphics=y,ji(this.lineGraphics,this._xScale,this.drawnAtScale),this.draw(),this.animate()}},{key:"updateExistingGraphics",value:function(){this.updateLoadIndicator(),this.hasFetchedTiles()&&(this.updateScales(),this.renderLines())}},{key:"updateLoadIndicator",value:function(){var e=Object(c.a)(this.position,2),t=e[0],a=e[1];this.pLoading.position.x=t+6,this.pLoading.position.y=a+6,this.fetching.size?this.pLoading.addChild(this.loadIndicator):this.pLoading.removeChild(this.loadIndicator)}},{key:"refreshTiles",value:function(){Object(gi.a)(Object(bi.a)(l.prototype),"refreshTiles",this).call(this),this.updateLoadIndicator()}},{key:"setPosition",value:function(e){Object(gi.a)(Object(bi.a)(l.prototype),"setPosition",this).call(this,e);var t=Object(c.a)(this.position,2);this.pMain.position.x=t[0],this.pMain.position.y=t[1]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.lineGraphics&&ji(this.lineGraphics,e,this.drawnAtScale),this.refreshTiles(),this.draw()}},{key:"getVisibleData",value:function(e,t){var a=this;if(!this.hasFetchedTiles())return"";var i=this.calculateZoomLevel(),r=Oi(this.fetchedTiles),s=this.getRowHeight(r),l=Object(c.a)(s,2)[1],u=o.calculateTileWidth(this.tilesetInfo,i,this.tilesetInfo.tile_size),h=this._xScale.invert(e)/u,d=this.tilesetInfo.tile_size*(h-Math.floor(h)),m=Math.floor(Math.max(0,(t+this.rowPadding)/l)),p=this.rowSelections[m],f=this.tileToLocalId([i,Math.floor(h)]),g=this.fetchedTiles[f],b=Math.floor(d)/Math.floor(256/this.markResolution),v="",y="<em>unknown</em>";if(void 0===p)return v;if(g){this.tilesetInfo.shape||(d=g.tileData.dense.length*(h-Math.floor(h)));var w=null;if(w=this.tilesetInfo.shape?Array.isArray(p)&&"client"===this.options.selectRowsAggregationMethod?p.map((function(e){return a.tilesetInfo.shape[0]*e+Math.floor(d)})):p&&"client"===this.options.selectRowsAggregationMethod?this.tilesetInfo.shape[0]*p+Math.floor(d):this.tilesetInfo.shape[0]*m+Math.floor(d):g.tileData.dense.length*m+Math.floor(d),Array.isArray(w)){var x=w.map((function(e){return g.tileData.dense[e]}));v=y=n(".3f")(this.selectRowsAggregationFn(x)),v+="<br/>",v+="".concat(w.length,"-item ").concat(this.options.selectRowsAggregationMode)}else v=y=n(".3f")(g.tileData.valuesByRow[m][b]),Array.isArray(p)&&(y+="<br/>",y+="".concat(p.length,"-item ").concat(this.options.selectRowsAggregationMode))}if(this.tilesetInfo.row_infos){var A="";void 0!==p&&(A=this.tilesetInfo.row_infos[p]);var E="object"===typeof A?this.rowIdToCategory(A.id):A,k=this.rowCategories[E]?this.rowCategories[E].axisLabelColor||He[this.rowCategories[E].index%He.length]:"#666666",O=this.rowCategories[E]?this.rowCategories[E].axisLabelColor||_e[this.rowCategories[E].index%_e.length]:"#ffffff";return'<div style="margin: -0.25rem; padding: 0 0.25rem; background: '.concat(O,'"><strong style="color: ').concat(k,';">').concat(E,":</strong> ").concat(y,"</div>")}return v}},{key:"getMouseOverHtml",value:function(e,t){return this.tilesetInfo?this.getVisibleData(e,t):""}},{key:"exportSVG",value:function(){var e="http://www.w3.org/2000/svg",t=null,a=null,n=Object(gi.a)(Object(bi.a)(l.prototype),"exportSVG",this).call(this),i=Object(c.a)(n,2);a=i[0],t=i[1],a.setAttribute("class","ridge-plot-track");var o=document.createElement("g");t.appendChild(o),o.setAttribute("transform","translate(".concat(this.position[0],", ").concat(this.position[1],")"));var r=Object.values(this.fetchedTiles),s=Oi(r),u=this.getRowHeight(s),h=Object(c.a)(u,1)[0],d=this.markArea?8:4,m=this.tilesToData(r,{maxRows:s,markArea:this.markArea,rowHeight:h}),p=Object(c.a)(m,1)[0],f=Object(Rn.b)().x((function(e){return e[0]})).y((function(e){return e[1]})),g=p.length/s,b=function(e){for(var t=[],a=d,n=e.length-d,i=a;i<n;i+=d)t.push([e[i],e[i+1]]);return t},v=this.markArea?this.options.colorRange&&this.options.colorRange[0]||"#ffffff":"none";if(this.markArea&&this.options.colorRange){var y=this.options.colorRange.length,w=document.createElementNS(e,"defs"),x=document.createElementNS(e,"linearGradient");x.setAttribute("id","RidgePlotGradient"),x.setAttribute("x1","0"),x.setAttribute("y1","1"),x.setAttribute("x2","0"),x.setAttribute("y2","0"),this.options.colorRange.forEach((function(t,a){var n=document.createElementNS(e,"stop");n.setAttribute("offset","".concat(Math.round(a/(y-1)*100),"%")),n.setAttribute("stop-color",t),x.appendChild(n)})),w.appendChild(x),a.insertBefore(w,a.firstChild),v="url(#RidgePlotGradient)"}for(var A=0;A<s;A++){var E=b(p.subarray(A*g,(A+1)*g)),k=document.createElement("path"),O=f(E),C=this.rowScale(A)+this.valueScaleByRow(0,A),j=O.indexOf(","),S=+O.substring(1,j),N=+O.substring(j+1,O.indexOf("L")),M=(O="M".concat(S-1,",").concat(C,"L").concat(S-1,",").concat(N,"L").concat(O.substring(1))).lastIndexOf(","),T=+O.substring(O.lastIndexOf("L")+1,M),I=+O.substring(M+1);O+="L".concat(T+1,",").concat(I,"L").concat(T+1,",").concat(C),k.setAttribute("d",O),k.setAttribute("fill",v),k.setAttribute("stroke",this.options.markColor||"black"),k.setAttribute("stroke-width",(this.options.markSize||2)/8),o.appendChild(k)}return[a,t]}}]),l}(t.tracks.HorizontalLine1DPixiTrack),l=arguments.length,u=new Array(l>1?l-1:0),d=1;d<l;d++)u[d-1]=arguments[d];return Object(hi.a)(s,u)};Ni.config={type:"ridge-plot",datatype:["multivec"],orientation:"1d",name:"RidgePlot"};var Mi=Ni,Ti=function(e,t){return e[0]<t[1]&&e[1]>=t[0]},Ii="\n  precision mediump float;\n  attribute vec2 aPosition;\n  attribute float aOpacity;\n  attribute float aHighlight;\n\n  uniform mat3 projectionMatrix;\n  uniform mat3 translationMatrix;\n  uniform float uPointSize;\n\n  varying float vHighlight;\n  varying float vOpacity;\n\n  void main(void)\n  {\n    vHighlight = aHighlight;\n    vOpacity = aOpacity;\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aPosition, 1.0)).xy, 0.0, 1.0);\n    gl_PointSize = uPointSize;\n  }\n",Di="\n  precision mediump float;\n\n  uniform vec4 uColor;\n  uniform vec4 uColorHighlight;\n\n  varying float vHighlight;\n  varying float vOpacity;\n\n  void main() {\n    float isNotFocused = 1.0 - vHighlight;\n\n    float r = uColor.r * isNotFocused + uColorHighlight.r * vHighlight;\n    float g = uColor.g * isNotFocused + uColorHighlight.g * vHighlight;\n    float b = uColor.b * isNotFocused + uColorHighlight.b * vHighlight;\n\n    gl_FragColor = vec4(r, g, b, 1.0) * vOpacity;\n  }\n",zi=function(e){return[e.cX-e.widthHalf,e.y,e.cX+e.widthHalf,e.y,e.cX+e.widthHalf,e.y+e.height,e.cX-e.widthHalf,e.y+e.height]},Gi=function(e,t){var a=4*t;return[a,a+1,a+2,a+2,a+3,a]},Ri=function(e){return[e.opacity,e.opacity,e.opacity,e.opacity]},Pi=function(e){return[e.highlight,e.highlight,e.highlight,e.highlight]},Li=function(e){return Math.abs(+e.fields[1]+(+e.fields[2]-+e.fields[1])/2-(+e.fields[4]+(+e.fields[4]-+e.fields[5])/2))},Bi=function(e){return Object.values(e).reduce((function(e,t){return Math.max(e,t.tileData.reduce((function(e,t){return Math.max(e,t.distance)}),0))}),0)},Fi=function(e,t,a){var n=(a.domain()[1]-a.domain()[0])/(t.domain()[1]-t.domain()[0]),i=t.domain().map(a)[0];e.scale.x=n,e.position.x=-i*n},Hi=function(e){return"".concat(e.fields[0],":").concat(e.fields[1],"-").concat(e.fields[2])},_i=function e(t){if(!(this instanceof e?this.constructor:void 0))throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');for(var a=t.libraries.PIXI,n=t.libraries.d3Scale,i=n.scaleLinear,o=n.scaleLog,r=t.services.tileProxy,s=t.configs.MAX_CLICK_DELAY,l=o().domain([1,10]).range([.1,1]).clamp(!0),u=function(e){Object(vi.a)(o,e);var n=Object(yi.a)(o);function o(e,t){var i;Object(di.a)(this,o),(i=n.call(this,e,t)).pLegend=new a.Graphics,i.pMasked.addChild(i.pLegend),i.legendMin=1/0,i.legendMax=-1/0,i.bg=new a.Sprite(a.Texture.WHITE);var r=Object(c.a)(i.dimensions,2);i.bg.width=r[0],i.bg.height=r[1],i.bg.interactive=!0,i.bg.interactiveChildren=!1,i.bg.alpha=0;var l=performance.now();return i.bg.mousedown=function(){l=performance.now()},i.bg.mouseup=function(e){performance.now()-l<s&&i.clickHandler(e)},i.updateOptions(),i.pLoading=new a.Graphics,i.pLoading.position.x=0,i.pLoading.position.y=0,i.pMasked.addChild(i.pLoading),i.loadIndicator=new a.Text("Loading data...",{fontSize:i.labelSize||10,fill:8421504}),i.pLoading.addChild(i.loadIndicator),i}return Object(mi.a)(o,[{key:"initTile",value:function(e){e.intervalTree=new ge.a([]),e.tileData.forEach((function(t,a){t.distance=Li(t)||-1,t.cX=t.xStart+(t.xEnd-t.xStart)/2,t.regionId=Hi(t),t.isLeftToRight=t.xStart<t.xEnd,e.intervalTree.insert([t.xStart,t.xEnd],a)}))}},{key:"updateStratificationOption",value:function(){var e=this;if(!this.options.stratification)return this.categoryField=void 0,this.categoryToGroup=void 0,this.groupToColor=void 0,this.numGroups=0,this.numCategories=0,void(this.groupLabels=[]);this.categoryField=this.options.stratification.categoryField,this.getCategory=function(t){return t.fields[e.categoryField].toLowerCase()},this.categoryToGroup=new Map,this.categoryToY=new Map,this.yToCategory=new Map,this.groupToColor=new Map,this.groupSizes=this.options.stratification.groups.map((function(t){return t.categories.filter((function(t){return e.valueFilter(t)})).length})),this.filteredGroups=this.options.stratification.groups.filter((function(t,a){return e.groupSizes[a]>0})),this.numGroups=this.filteredGroups.length,this.numCategories=this.groupSizes.reduce((function(e,t){return e+t}),0),this.groupLabels=this.options.stratification.groups.map((function(e,t){return e.label||"Group ".concat(t)}));var n=0;this.options.stratification.groups.forEach((function(a,i){e.groupToColor.set(i,[t.utils.colorToHex(a.color||Fe[i%Fe.length]),t.utils.colorToHex(a.backgroundColor||_e[i%_e.length]),t.utils.colorToHex(a.backgroundColor||He[i%He.length])]),a.categories.filter((function(t){return e.valueFilter(t)})).forEach((function(t,a){var o=t.toLowerCase();e.categoryToGroup.set(o,i),e.categoryToY.set(o,n+a),e.yToCategory.set(n+a,o)})),n+=e.groupSizes[i]})),this.groupLabelsPixiText=this.groupLabels.map((function(n,i){return new a.Text(n,{fontSize:e.labelSize,align:"right"===e.axisAlign?"right":"left",fill:t.utils.colorToHex(e.options.stratification.groups[i].axisLabelColor||He[i%He.length])})}))}},{key:"updateOptions",value:function(){var e=this;switch(this.axisAlign=this.options.axisAlign||"left",this.labelColor=t.utils.colorToHex(this.options.labelColor||"black"),this.labelSize=this.options.labelSize||12,this.markColor=t.utils.colorToHex(this.options.markColor||"black"),this.markColorRgbNorm=this.options.markColor?t.utils.colorToRgba(this.options.markColor).slice(0,3).map((function(e){return Math.min(1,Math.max(0,e/255))})):[0,0,0],this.markOpacity=Number.isNaN(+this.options.markOpacity)?1:Math.min(1,Math.max(0,+this.options.markOpacity)),this.markSize=this.options.markSize||2,this.markMinWidth=this.options.markMinWidth||this.markSize,this.markHeight=this.options.markHeight||this.markSize,this.rowHeight=this.options.rowHeight||this.markHeight,this.markColorHighlight=t.utils.colorToHex(this.options.markColorHighlight||"red"),this.markColorHighlightRgbNorm=this.options.markColorHighlight?t.utils.colorToRgba(this.options.markColorHighlight).slice(0,3).map((function(e){return Math.min(1,Math.max(0,e/255))})):[1,0,0],this.markColorDehighlight=t.utils.colorToHex(this.options.markColorDehighlight||"#999999"),this.markColorDehighlightRgbNorm=this.options.markColorDehighlight?t.utils.colorToRgba(this.options.markColorDehighlight).slice(0,3).map((function(e){return Math.min(1,Math.max(0,e/255))})):[.6,.6,.6],this.markOpacityFocus=Number.isNaN(+this.options.markOpacityFocus)?this.markOpacity:Math.min(1,Math.max(0,+this.options.markOpacityFocus)),this.filterSet=this.options.filter&&this.options.filter.set?this.options.filter.set.reduce((function(e,t){return e.add(t),e}),new Set):null,this.filterField=this.options.filter&&this.options.filter.field,this.valueFilter=this.filterSet?function(t){return e.filterSet.has(t)}:function(){return!0},this.itemFilter=this.valueFilter&&this.filterField?function(t){return e.valueFilter(t.fields[e.filterField])}:function(){return!0},this.getImportance=this.options.importanceField?function(t){return+t.fields[e.options.importanceField]}:function(e){return e.distance},this.opacityEncoding=this.options.opacityEncoding||"solid",this.opacityEncoding){case"frequency":this.opacityScale=function(){return.1};break;case"highestImportance":case"closestImportance":var a=this.options.importanceDomain||[1,1e3],n=i().domain(a).range([1,10]);this.opacityScale=function(e){return l(n(e))};break;case"solid":default:this.opacityScale=function(){return 1}}this.focusRegion=this.options.focusRegion?this.options.focusRegion:[1/0,1/0],this.getRegion=this.options.focusRegion?function(e){return[e.xStart,e.xEnd]}:void 0,this.focusGene=this.options.focusGene?this.options.focusGene.toLowerCase():void 0,this.getGene=this.options.geneField?function(t){return t.fields[e.options.geneField].toLowerCase()}:void 0,this.focusStyle=this.options.focusStyle?this.options.focusStyle.toLowerCase():void 0,this.minImportance=this.options.minImportance||0,this.updateStratificationOption()}},{key:"rerender",value:function(e){this.options=e,this.updateOptions(),this.updateExistingGraphics()}},{key:"hasFetchedTiles",value:function(){return Object.values(this.fetchedTiles).length}},{key:"updateScales",value:function(){if(Object.values(this.fetchedTiles).length){var e=Object(c.a)(this.dimensions,2)[1];this.maxDist=Bi(this.fetchedTiles),this.heightScale=i().domain([0,this.maxDist]).range([Math.min(12,e/10),e]),this.categoryHeightScale=i().domain([0,this.numCategories]).range([0,this.numCategories*this.rowHeight]),this.valueScale=i().domain([0,this.maxDist]).range([e,0]),this.valueScaleInverted=i().domain([0,this.maxDist]).range([0,e])}}},{key:"itemToIndicatorCategory",value:function(e,t){return{cX:this._xScale(e.cX),y:this.categoryHeightScale(this.categoryToY.get(this.getCategory(e))),opacity:this.opacityScale(this.getImportance(e)),highlight:t&&e.__focus,widthHalf:Math.max(this.markMinWidth/2,Math.abs(this._xScale(e.xStart)-this._xScale(e.xEnd))/2),height:this.markHeight,__item:e}}},{key:"isItemInFocus",value:function(){var e=this;return this.getGene&&this.focusGene&&this.getRegion&&this.focusRegion?function(t){return t.__focus=e.getGene(t)===e.focusGene&&Ti(e.getRegion(t),e.focusRegion),t.__focus}:this.getGene&&this.focusGene?function(t){return t.__focus=e.getGene(t)===e.focusGene,t.__focus}:this.getRegion&&this.focusRegion?function(t){return t.__focus=Ti(e.getRegion(t),e.focusRegion),t.__focus}:function(e){return e.__focus=!1,!0}}},{key:"itemToIndicatorReducer",value:function(e,t){var a=this;return"highlighting"===this.focusStyle?function(n,i,o){return e(i),a.itemFilter(i)&&t(n,i),n}:function(n,i){return e(i)&&a.itemFilter(i)&&t(n,i),n}}},{key:"getPoints",value:function(e){var t=this,a=[],n=function(a,n){return a.push(t.itemToIndicatorCategory(n,e))};"highestImportance"===this.opacityEncoding?(a={},n=function(a,n){if(a[n.regionId]){var i=t.getImportance(a[n.regionId].__item);t.getImportance(n)>i&&(a[n.regionId]=t.itemToIndicatorCategory(n,e))}else a[n.regionId]=t.itemToIndicatorCategory(n,e)}):"closestImportance"===this.opacityEncoding&&(a={},n=function(a,n){(!a[n.regionId]||n.distance<a[n.regionId].__item.distance)&&(a[n.regionId]=t.itemToIndicatorCategory(n,e))});var i=this.isItemInFocus(),o=this.itemToIndicatorReducer(i,n);return Object.values(this.fetchedTiles).flatMap((function(e){return Object.values(e.tileData.reduce(o,a))}))}},{key:"renderIndicatorPoints",value:function(){this.drawnAtScale=i().domain(Object(S.a)(this.xScale().domain())).range(Object(S.a)(this.xScale().range()));var e=!("highlighting"!==this.focusStyle||!(this.focusGene&&this.getGene||this.focusRegion&&this.getRegion)),t=this.getPoints(e),n=new Float32Array(t.flatMap(zi)),o=new Uint16Array(t.flatMap(Gi)),r=new Float32Array(t.flatMap(Ri)),s=new Float32Array(t.flatMap(Pi)),l=new a.UniformGroup({uColor:[].concat(e?Object(S.a)(this.markColorDehighlightRgbNorm):Object(S.a)(this.markColorRgbNorm),[this.markOpacity]),uColorHighlight:[].concat(Object(S.a)(this.markColorHighlightRgbNorm),[this.markOpacity]),uHighlighting:e}),u=a.Shader.from(Ii,Di,l),h=new a.Geometry;h.addAttribute("aPosition",n,2),h.addAttribute("aOpacity",r,1),h.addAttribute("aHighlight",s,1),h.addIndex(o);var d=new a.Mesh(h,u),m=new a.Graphics;m.addChild(this.bg),m.addChild(d);var p=Object(c.a)(this.dimensions,2);this.bg.width=p[0],this.bg.height=p[1],this.pMain.x=this.position[0],this.indicatorPointGraphics&&(this.indicatorPointGraphics.removeChild(this.bg),this.pMain.removeChild(this.indicatorPointGraphics)),this.pMain.addChild(m),this.indicatorPointGraphics=m,Fi(this.indicatorPointGraphics,this._xScale,this.drawnAtScale),this.draw(),this.animate()}},{key:"renderIndicatorCategoryAxis",value:function(){var e=this,t=Object(c.a)(this.dimensions,1)[0],a=Object(c.a)(this.position,2),n=a[0],i=a[1];this.pAxis.position.x="right"===this.axisAlign?n+t:n,this.pAxis.position.y=i,this.pAxis.clear();var o=0,r=0,s="right"===this.axisAlign?-5:5,l="right"===this.axisAlign?-t:t,u="right"===this.axisAlign?-3:3,h=this.pAxis.children.length;this.pAxis.lineStyle(1,0,1,0),this.groupLabelsPixiText.forEach((function(t,a){h<a+1&&e.pAxis.addChild(t);var n=e.pAxis.children[a];if(0!==e.groupSizes[a]){var i=e.categoryHeightScale(e.groupSizes[a]);r+=i,n.x=u,n.y=o+i/2,n.anchor.x="right"===e.axisAlign?1:0,n.anchor.y=.5,n.alpha=1,"highlighting"===e.options.focusStyle?e.pAxis.beginFill(16777215,.66):e.pAxis.beginFill(e.groupToColor.get(a)[1],.66),e.pAxis.lineStyle(0),"right"===e.axisAlign?e.pAxis.drawRect(n.x-n.width,n.y-n.height/2,n.width,n.height):e.pAxis.drawRect(n.x,n.y-n.height/2,n.width,n.height),e.pAxis.endFill(),e.pAxis.lineStyle(1,0,1,0),e.pAxis.moveTo(0,o),e.pAxis.lineTo(s,o),e.options.stratification.axisShowGroupSeparator&&we(e.pAxis,0,l,o,5),o=r}else n.alpha=0})),this.pAxis.moveTo(0,0),this.pAxis.lineTo(0,r),this.pAxis.lineTo(s,r),this.options.stratification.axisShowGroupSeparator&&we(this.pAxis,0,l,r,5)}},{key:"renderIndicatorLegend",value:function(){if(this.pLegend.clear(),-1===this.opacityEncoding.indexOf("Importance"))return this.legendMinText&&(this.pLegend.removeChild(this.legendMinText),this.legendMinText.destroy(),this.legendMinText=void 0),void(this.legendMaxText&&(this.pLegend.removeChild(this.legendMaxText),this.legendMaxText.destroy(),this.legendMaxText=void 0));var e=Object(c.a)(this.dimensions,1)[0],t=Object(c.a)(this.position,2),n=t[0],i=t[1],o=this.categoryHeightScale.range(),r=Object(c.a)(o,2)[1],s="right"===this.options.legendAlign,l=!("highlighting"!==this.focusStyle||!(this.focusGene&&this.getGene||this.focusRegion&&this.getRegion));this.pLegend.position.x=s?n+e:n;var u=this.options.importanceDomain||[1,1e3],h=Object(c.a)(u,2),d=h[0],m=h[1];Math.abs(d-this.legendMin)>Be&&(this.legendMinText&&(this.pLegend.removeChild(this.legendMinText),this.legendMinText.destroy()),this.legendMinText=new a.Text(ke(d,3),{fontSize:this.labelSize,align:s?"right":"left",fill:8421504}),this.legendMinText.x=0,this.legendMinText.y=3,this.legendMinText.anchor.x=s?1:0,this.pLegend.addChild(this.legendMinText)),Math.abs(m-this.legendMax)>Be&&(this.legendMaxText&&(this.pLegend.removeChild(this.legendMaxText),this.legendMaxText.destroy()),this.legendMaxText=new a.Text(ke(m,3),{fontSize:this.labelSize,align:s?"right":"left",fill:8421504}),this.legendMaxText.x=0,this.legendMaxText.y=3,this.legendMaxText.anchor.x=s?1:0,this.pLegend.addChild(this.legendMaxText));var p=this.legendMinText.getBounds().width,f=this.legendMaxText.getBounds().width,g=s?-(f+42+6):p+12,b=18+6*l/2;this.pLegend.beginFill(16777215),this.pLegend.lineStyle(1,13421772),s?(this.legendMinText.x=g-6,this.pLegend.drawRoundedRect(-(42+p+f+18+.5),0,42+p+f+18,b,3)):(this.legendMaxText.x=g+42+12,this.pLegend.drawRoundedRect(.5,0,42+p+f+18,18+6*l/2,3)),this.pLegend.endFill(),this.pLegend.lineStyle(0);for(var v=0;v<5;v++){var y=this.opacityScale(d+v/4*m);this.pLegend.beginFill(this.markColor,y),this.pLegend.drawRect(9*v+g,3+3*!l,6,6),this.pLegend.endFill(),l&&(this.pLegend.beginFill(this.markColorHighlight,y),this.pLegend.drawRect(9*v+g,12,6,6),this.pLegend.endFill())}s?(this.legendMinText.x=g-6,this.legendMaxText.x=-3):(this.legendMinText.x=3,this.legendMaxText.x=g+42+6),this.pLegend.position.y=i+r-6-b}},{key:"updateIndicators",value:function(){this.renderIndicatorCategoryAxis(),this.renderIndicatorLegend(),this.renderIndicatorPoints()}},{key:"updateLoadIndicator",value:function(){var e=Object(c.a)(this.position,2),t=e[0],a=e[1];this.pLoading.position.x=t+6,this.pLoading.position.y=a+6,this.fetching.size?this.pLoading.addChild(this.loadIndicator):this.pLoading.removeChild(this.loadIndicator)}},{key:"updateExistingGraphics",value:function(){this.updateLoadIndicator(),this.hasFetchedTiles()&&(this.updateScales(),this.updateIndicators())}},{key:"drawTile",value:function(e){var t=this;if(e.graphics.clear(),this.updateLoadIndicator(),!this.options.stratification.axisNoGroupColor){var a=0,n=0;this.groupSizes.forEach((function(i,o){n+=t.categoryHeightScale(i),e.graphics.beginFill(t.groupToColor.get(o)[1]),e.graphics.drawRect(0,a,t.dimensions[0],Math.abs(n-a)),a=n})),e.graphics.endFill()}}},{key:"getElementAtPosition",value:function(e,t){var a=this;if(this.tilesetInfo){var n=this.calculateZoomLevel(),i=r.calculateTileWidth(this.tilesetInfo,n,this.tilesetInfo.tile_size),o=this.tileToLocalId([n,Math.floor(this._xScale.invert(e)/i)]),s=this.fetchedTiles[o];if(s){var c,l=this.yToCategory.get(Math.floor(this.categoryHeightScale.invert(t))),u=this._xScale.invert(e-1),h=this._xScale.invert(e+1);return s.intervalTree.search([u,h]).forEach((function(e){var t=s.tileData[e];return a.getCategory(t)===l&&(c=t,!0)})),{item:c,category:l,tileId:o}}}}},{key:"getMouseOverHtml",value:function(e,t){var a=this.getElementAtPosition(e,t);if(!a)return"";var n=a.item,i=a.category;if(n){var o=this.groupToColor.get(this.categoryToGroup.get(i)),r=Object(c.a)(o,3),s=r[1],l=r[2],u="#".concat(l.toString(16)),h="#".concat(s.toString(16)),d=this.getImportance(n).toFixed(2);return'<div style="margin: -0.25rem; padding: 0 0.25rem; background: '.concat(h,'"><strong style="color: ').concat(u,';">').concat(i,":</strong> ").concat(d,"</div>")}return""}},{key:"clickHandler",value:function(e){var t=Object(c.a)(this.position,2),a=t[0],n=t[1],i=e.data.global.x-a,o=e.data.global.y-n,r=this.getElementAtPosition(i,o);r&&this.pubSub.publish("app.click",{type:"annotation",event:e,payload:r})}},{key:"setPosition",value:function(e){Object(gi.a)(Object(bi.a)(o.prototype),"setPosition",this).call(this,e);var t=Object(c.a)(this.position,2);this.pMain.position.x=t[0],this.pMain.position.y=t[1]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.indicatorPointGraphics&&Fi(this.indicatorPointGraphics,e,this.drawnAtScale),this.refreshTiles(),this.draw()}},{key:"refreshTiles",value:function(){Object(gi.a)(Object(bi.a)(o.prototype),"refreshTiles",this).call(this),this.updateLoadIndicator()}},{key:"renderIndicatorCategoryAxisAsSvg",value:function(){var e=this,t=document.createElement("g");t.setAttribute("id","axis");var a=Object(c.a)(this.dimensions,1)[0],n=Object(c.a)(this.position,2),i=n[0],o=n[1];this.pAxis.position.x="right"===this.axisAlign?i+a:i,this.pAxis.position.y=o,t.setAttribute("transform","translate(".concat(this.pAxis.position.x,", ").concat(this.pAxis.position.y,")"));var r=0,s=0,l="right"===this.axisAlign?-5:5,u="right"===this.axisAlign?-a:a,h="right"===this.axisAlign?-3:3,d=function(e,t,a,n,i,o){var r=document.createElement("rect");return r.setAttribute("x",e),r.setAttribute("y",t),r.setAttribute("width",a),r.setAttribute("height",n),r.setAttribute("fill",i),r.setAttribute("fill-opacity",o),r.setAttribute("stroke-width",0),r},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stroke,a=void 0===t?"#000000":t,n=e.strokeWidth,i=void 0===n?1:n,o=e.strokeDasharray,r=void 0===o?null:o;return function(e,t,n,o){var s=document.createElement("line");return s.setAttribute("x1",e),s.setAttribute("y1",t),s.setAttribute("x2",n),s.setAttribute("y2",o),s.setAttribute("stroke",a),s.setAttribute("stroke-width",i),r&&s.setAttribute("stroke-dasharray",r),s}},p=m({strokeDasharray:"5"}),f="highlighting"===this.options.focusStyle;return this.groupLabelsPixiText.forEach((function(a,n){var i=e.categoryHeightScale(e.groupSizes[n]);s+=i,a.x=h,a.y=r+i/2;var o=f?"#ffffff":"#".concat(e.groupToColor.get(n)[1].toString(16));"right"===e.axisAlign?t.appendChild(d(a.x-a.width,a.y-a.height/4,a.width,a.height,o,.66)):t.appendChild(d(a.x,a.y-a.height/4,a.width,a.height,o,.66)),t.appendChild(function(e){var t=document.createElement("text");return t.setAttribute("x",e.x),t.setAttribute("y",e.y+e.height/4),t.setAttribute("fill",e._style._fill),t.setAttribute("text-anchor","right"===e._style._align?"end":"start"),t.setAttribute("style","font: ".concat(e._font,";")),t.textContent=e.text,t}(a)),t.appendChild(m()(0,r,l,r)),e.options.stratification.axisShowGroupSeparator&&t.appendChild(p(0,r,u,r)),r=s})),t.appendChild(m()(0,0,0,s)),this.options.stratification.axisShowGroupSeparator&&t.appendChild(p(0,s,u,s)),t}},{key:"exportSVG",value:function(){var e=null,t=null,a=Object(gi.a)(Object(bi.a)(o.prototype),"superSVG",this).call(this),n=Object(c.a)(a,2);t=n[0],e=n[1],t.setAttribute("class","exported-stratified-bed-track");var i=document.createElement("g");e.appendChild(i),i.setAttribute("transform","translate(".concat(this.position[0],",").concat(this.position[1],")"));var r=!("highlighting"!==this.focusStyle||!(this.focusGene&&this.getGene||this.focusRegion&&this.getRegion)),s=this.getPoints(r),l=r?this.options.markColorDehighlight||"#999999":this.options.markColor||"black",u=this.options.markColorHighlight||"red";return s.forEach((function(e,t){var a=e.cX,n=e.y,o=e.widthHalf,r=e.opacity,s=e.highlight,c=e.height,h=document.createElement("rect");h.setAttribute("x",a-o),h.setAttribute("y",n),h.setAttribute("width",2*o),h.setAttribute("height",c),h.setAttribute("fill",s?u:l),h.setAttribute("fill-opacity",r),h.setAttribute("stroke-width",0),i.appendChild(h)})),t.appendChild(this.renderIndicatorCategoryAxisAsSvg()),[t,e]}}]),o}(t.tracks.HorizontalLine1DPixiTrack),h=arguments.length,d=new Array(h>1?h-1:0),m=1;m<h;m++)d[m-1]=arguments[m];return Object(hi.a)(u,d)};_i.config={type:"stratified-bed",datatype:["arcs","bedlike"],orientation:"1d",name:"Arcs1D",thumbnail:(new DOMParser).parseFromString('<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M4 2.1L.5 3.5v12l5-2 5 2 5-2v-12l-5 2-3.17-1.268" fill="none" stroke="currentColor"/><path d="M10.5 3.5v12" fill="none" stroke="currentColor" stroke-opacity=".33" stroke-dasharray="1,2,0,0"/><path d="M5.5 13.5V6" fill="none" stroke="currentColor" stroke-opacity=".33" stroke-width=".9969299999999999" stroke-dasharray="1.71,3.43,0,0"/><path d="M9.03 5l.053.003.054.006.054.008.054.012.052.015.052.017.05.02.05.024 4 2 .048.026.048.03.046.03.044.034.042.037.04.04.037.04.036.042.032.045.03.047.028.048.025.05.022.05.02.053.016.053.014.055.01.055.007.055.005.055v.056l-.002.056-.005.055-.008.055-.01.055-.015.054-.017.054-.02.052-.023.05-.026.05-.028.048-.03.046-.035.044-.035.043-.038.04-4 4-.04.037-.04.036-.044.032-.045.03-.046.03-.048.024-.05.023-.05.02-.052.016-.052.015-.053.012-.054.01-.054.005-.055.003H8.97l-.053-.003-.054-.006-.054-.008-.054-.012-.052-.015-.052-.017-.05-.02-.05-.024-4-2-.048-.026-.048-.03-.046-.03-.044-.034-.042-.037-.04-.04-.037-.04-.036-.042-.032-.045-.03-.047-.028-.048-.025-.05-.022-.05-.02-.053-.016-.053-.014-.055-.01-.055-.007-.055L4 10.05v-.056l.002-.056.005-.055.008-.055.01-.055.015-.054.017-.054.02-.052.023-.05.026-.05.028-.048.03-.046.035-.044.035-.043.038-.04 4-4 .04-.037.04-.036.044-.032.045-.03.046-.03.048-.024.05-.023.05-.02.052-.016.052-.015.053-.012.054-.01.054-.005L8.976 5h.054zM5 10l4 2 4-4-4-2-4 4z" fill="currentColor"/><path d="M7.124 0C7.884 0 8.5.616 8.5 1.376v3.748c0 .76-.616 1.376-1.376 1.376H3.876c-.76 0-1.376-.616-1.376-1.376V1.376C2.5.616 3.116 0 3.876 0h3.248zm.56 5.295L5.965 1H5.05L3.375 5.295h.92l.354-.976h1.716l.375.975h.945zm-1.596-1.7l-.592-1.593-.58 1.594h1.172z" fill="currentColor"/></svg>',"text/xml").documentElement,availableOptions:["arcStyle","flip1D","labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor"],defaultOptions:{arcStyle:"ellipse",flip1D:"no",labelColor:"black",labelPosition:"hidden",trackBorderWidth:0,trackBorderColor:"black"},optionsInfo:{arcStyle:{name:"Arc Style",inlineOptions:{circle:{name:"Circle",value:"circle"},ellipse:{name:"Ellipse",value:"ellipse"}}}}};var Wi=_i,Ui=function e(t){if(!(this instanceof e?this.constructor:void 0))throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');for(var a=t.libraries.d3Array.range,n=t.libraries.d3Scale.scaleBand,i=t.services.tileProxy,o=t.utils.colorToHex,r=function(e){Object(vi.a)(r,e);var t=Object(yi.a)(r);function r(){return Object(di.a)(this,r),t.apply(this,arguments)}return Object(mi.a)(r,[{key:"setValueScale",value:function(){if(this.valueScale=null,this.options&&this.options.valueColumn){var e=this.options.colorEncodingRange?+this.options.colorEncodingRange[0]:this.minVisibleValueInTiles(+this.options.valueColumn),t=this.options.colorEncodingRange?+this.options.colorEncodingRange[1]:this.maxVisibleValueInTiles(+this.options.valueColumn);if(this.options.valueColumn){var a=this.makeValueScale(e,this.calculateMedianVisibleValue(+this.options.valueColumn),t,2),n=Object(c.a)(a,1);this.valueScale=n[0]}}}},{key:"finalDotYPos",value:function(e,t){return Math.max(t,Math.min(this.dimensions[1]-t,e))}},{key:"drawPoly",value:function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[t,n,a,n,a,this.dimensions[1],t,this.dimensions[1]],r=Math.max(2,a-t),s=r*(1+2*i);return e.rectGraphics.drawCircle(t,this.finalDotYPos(n,r),s),o}},{key:"renderRows",value:function(e,t,i,r,s,c){var l=this,u=+e.tileId.split(".")[0];this.initialize();for(var h=n().domain(a(i)).range([r,s]).paddingInner(0),d=this.options.focusRegion||[1/0,1/0],m=[],p=[],f=0;f<t.length;f++){for(var g=0;g<t[f].length;g++){var b=t[f][g].value,v=b.fields,y=+b.chrOffset,w=+v[1]+y,x=+v[2]+y,A=h(f)+h.step()/2;this.valueScale&&(A=this.valueScale(+v[+this.options.valueColumn-1]));var E=A,k=this._xScale(w),O=this._xScale(x);if(!(u in this.drawnRects)||!(b.uid in this.drawnRects[u])){this.drawnRects[u]||(this.drawnRects[u]={});var C=[k,O,E,b,w,x];w<=d[1]&&x>=d[0]?p.push(C):m.push(C)}}e.rectGraphics.lineStyle(0),e.rectGraphics.beginFill(16777215),m.forEach((function(t){l.drawPoly(e,t[0],t[1],t[2],!0)}));var j=this.options.markColor||"black",S=this.options.fillOpacity||.3;e.rectGraphics.lineStyle(1,o(j),S),e.rectGraphics.beginFill(o(j),S),m.forEach((function(t){var a=l.drawPoly(e,t[0],t[1],t[2]);l.drawnRects[u][t[4].uid]=[a,{start:t[4],end:t[5],value:t[3],tile:e,fill:c},e.tileId]})),j=this.options.markColorFocus||"red",S=this.options.markOpacityFocus||.6,e.rectGraphics.lineStyle(1,o(j),S),e.rectGraphics.beginFill(o(j),S),p.forEach((function(t){var a=l.drawPoly(e,t[0],t[1],t[2]);l.drawnRects[u][t[4].uid]=[a,{start:t[4],end:t[5],value:t[3],tile:e,fill:c},e.tileId]})),e.rectGraphics.endFill()}return e.rectGraphics.interactive=!0,e.rectGraphics.buttonMode=!0,e.rectGraphics.mouseup=function(e){l.hoveringSnp&&l.pubSub.publish("app.click",{type:"snp",event:e,payload:l.hoveringSnp})},[m,p]}},{key:"getMouseOverHtml",value:function(e,t){var a=this;if(this.hoveringSnp=void 0,!this.tilesetInfo||!this.options.toolTip||!this.valueScale)return"";var n=this.calculateZoomLevel(),o=i.calculateTileWidth(this.tilesetInfo,n,this.tilesetInfo.tile_size),r=this._xScale.invert(e)/o,s=Math.floor(r),c=this.tileToLocalId([n,s]),l=this.fetchedTiles[c];if(!l)return"";var u=3;if(l.tileData.forEach((function(t){var n=Math.abs(a._xScale(t.xStart)-e);n<u&&(a.hoveringSnp=t,u=n)})),!this.hoveringSnp)return"";var h=this.finalDotYPos(this.valueScale(this.hoveringSnp.importance),2);if(Math.abs(h-(t-1))>6)return"";var d=this.hoveringSnp.fields[this.options.toolTip.name.field],m=(+this.hoveringSnp.fields[this.options.toolTip.value.field]).toFixed(this.options.toolTip.value.numDecimals||2),p="";return this.options.toolTip.other&&(this.options.toolTip.other.forEach((function(e){var t=e.label||"",n=(+a.hoveringSnp.fields[e.field]).toFixed(e.numDecimals||2);p+="".concat(t,": ").concat(n,";")})),p=" (".concat(p.substr(0,p.length-1),")")),"<div><strong>".concat(d,":</strong> ").concat(m).concat(p,"</div>")}},{key:"exportSVG",value:function(){var e=this,t=null,a=null,n=Object(gi.a)(Object(bi.a)(r.prototype),"exportSVG",this).call(this),i=Object(c.a)(n,2);a=i[0],t=i[1],a.setAttribute("class","exported-snp-track");var o=document.createElement("g");t.appendChild(o),o.setAttribute("transform","translate(".concat(this.position[0],",").concat(this.position[1],")")),this.visibleAndFetchedTiles().filter((function(e){return e.plusStrandRows})).forEach((function(t){var a=e.renderRows(t,t.plusStrandRows,t.plusStrandRows.length,0,e.dimensions[1],"blue"),n=Object(c.a)(a,2),i=n[0],r=n[1];i.forEach((function(t){var a=document.createElement("circle");a.setAttribute("fill",e.options.markColor||"black"),a.setAttribute("stroke-width",0),a.setAttribute("opacity",e.options.markOpacity||.33),a.setAttribute("r",e.options.markSize),a.setAttribute("cx",t[0]),a.setAttribute("cy",t[2]),o.appendChild(a)})),r.forEach((function(t){var a=document.createElement("circle");a.setAttribute("fill",e.options.markColorFocus||"red"),a.setAttribute("stroke-width",0),a.setAttribute("opacity",e.options.markOpacityFocus||.66),a.setAttribute("r",e.options.markSize+1),a.setAttribute("cx",t[0]),a.setAttribute("cy",t[2]),o.appendChild(a)}))}));var s=document.createElement("g");if(s.setAttribute("id","axis"),a.appendChild(s),s.setAttribute("transform","translate(".concat(this.axis.pAxis.position.x,", ").concat(this.axis.pAxis.position.y,")")),"left"===this.options.axisPositionHorizontal||"top"===this.options.axisPositionVertical){var l=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);s.appendChild(l)}else if("right"===this.options.axisPositionHorizontal||"bottom"===this.options.axisPositionVertical){var u=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);s.appendChild(u)}return[a,t]}}]),r}(t.tracks.BedLikeTrack),s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];return Object(hi.a)(r,l)};Ui.config={type:"point-annotation",datatype:["arcs","bedlike"],orientation:"1d",name:"Arcs1D",thumbnail:(new DOMParser).parseFromString('<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M4 2.1L.5 3.5v12l5-2 5 2 5-2v-12l-5 2-3.17-1.268" fill="none" stroke="currentColor"/><path d="M10.5 3.5v12" fill="none" stroke="currentColor" stroke-opacity=".33" stroke-dasharray="1,2,0,0"/><path d="M5.5 13.5V6" fill="none" stroke="currentColor" stroke-opacity=".33" stroke-width=".9969299999999999" stroke-dasharray="1.71,3.43,0,0"/><path d="M9.03 5l.053.003.054.006.054.008.054.012.052.015.052.017.05.02.05.024 4 2 .048.026.048.03.046.03.044.034.042.037.04.04.037.04.036.042.032.045.03.047.028.048.025.05.022.05.02.053.016.053.014.055.01.055.007.055.005.055v.056l-.002.056-.005.055-.008.055-.01.055-.015.054-.017.054-.02.052-.023.05-.026.05-.028.048-.03.046-.035.044-.035.043-.038.04-4 4-.04.037-.04.036-.044.032-.045.03-.046.03-.048.024-.05.023-.05.02-.052.016-.052.015-.053.012-.054.01-.054.005-.055.003H8.97l-.053-.003-.054-.006-.054-.008-.054-.012-.052-.015-.052-.017-.05-.02-.05-.024-4-2-.048-.026-.048-.03-.046-.03-.044-.034-.042-.037-.04-.04-.037-.04-.036-.042-.032-.045-.03-.047-.028-.048-.025-.05-.022-.05-.02-.053-.016-.053-.014-.055-.01-.055-.007-.055L4 10.05v-.056l.002-.056.005-.055.008-.055.01-.055.015-.054.017-.054.02-.052.023-.05.026-.05.028-.048.03-.046.035-.044.035-.043.038-.04 4-4 .04-.037.04-.036.044-.032.045-.03.046-.03.048-.024.05-.023.05-.02.052-.016.052-.015.053-.012.054-.01.054-.005L8.976 5h.054zM5 10l4 2 4-4-4-2-4 4z" fill="currentColor"/><path d="M7.124 0C7.884 0 8.5.616 8.5 1.376v3.748c0 .76-.616 1.376-1.376 1.376H3.876c-.76 0-1.376-.616-1.376-1.376V1.376C2.5.616 3.116 0 3.876 0h3.248zm.56 5.295L5.965 1H5.05L3.375 5.295h.92l.354-.976h1.716l.375.975h.945zm-1.596-1.7l-.592-1.593-.58 1.594h1.172z" fill="currentColor"/></svg>',"text/xml").documentElement,availableOptions:["arcStyle","flip1D","labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","strokeColor","strokeWidth","trackBorderWidth","trackBorderColor"],defaultOptions:{arcStyle:"ellipse",flip1D:"no",labelColor:"black",labelPosition:"hidden",strokeColor:"black",strokeWidth:1,trackBorderWidth:0,trackBorderColor:"black"},optionsInfo:{arcStyle:{name:"Arc Style",inlineOptions:{circle:{name:"Circle",value:"circle"},ellipse:{name:"Ellipse",value:"ellipse"}}}}};var Zi=Ui,Yi="\nprecision mediump float;\nattribute vec2 aPosition;\nattribute float aColorIdx;\nattribute float aFocused;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform sampler2D uColorMapTex;\nuniform float uColorMapTexRes;\nuniform sampler2D uColorMapFocusTex;\nuniform float uColorMapFocusTexRes;\n\nvarying vec4 vColor;\nvarying vec4 vColorFocused;\nvarying float vFocused;\n\nvoid main(void)\n{\n  // Half a texel (i.e., pixel in texture coordinates)\n  float eps = 0.5 / uColorMapTexRes;\n  float colorRowIndex = floor((aColorIdx + eps) / uColorMapTexRes);\n  vec2 colorTexIndex = vec2(\n    (aColorIdx / uColorMapTexRes) - colorRowIndex + eps,\n    (colorRowIndex / uColorMapTexRes) + eps\n  );\n  vColor = texture2D(uColorMapTex, colorTexIndex);\n\n  float eps2 = 0.5 / uColorMapFocusTexRes;\n  float colorRowIndex2 = floor((aColorIdx + eps2) / uColorMapFocusTexRes);\n  vec2 colorTexIndex2 = vec2(\n    (aColorIdx / uColorMapFocusTexRes) - colorRowIndex2 + eps2,\n    (colorRowIndex2 / uColorMapFocusTexRes) + eps2\n  );\n  vColorFocused = texture2D(uColorMapFocusTex, colorTexIndex2);\n\n  vFocused = aFocused;\n\n  gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aPosition, 1.0)).xy, 0.0, 1.0);\n}\n",Vi="\n  precision mediump float;\n\n  varying vec4 vColor;\n  varying vec4 vColorFocused;\n  varying float vFocused;\n\n  void main() {\n    float isNotFocused = 1.0 - vFocused;\n\n    float r = vColor.r * isNotFocused + vColorFocused.r * vFocused;\n    float g = vColor.g * isNotFocused + vColorFocused.g * vFocused;\n    float b = vColor.b * isNotFocused + vColorFocused.b * vFocused;\n\n    gl_FragColor = vec4(r, g, b, 1.0);\n  }\n",Qi=function(e){return e.reduce((function(e,t){return Math.max(e,t.histogramMax)}),0)},Xi=function(e,t,a){var n=(a.domain()[1]-a.domain()[0])/(t.domain()[1]-t.domain()[0]),i=t.domain().map(a)[0];e.scale.x=n,e.position.x=-i*n},qi=function(e){return[e.xStart,e.yStart,e.xEnd,e.yStart,e.xEnd,e.yEnd,e.xStart,e.yStart,e.xStart,e.yEnd,e.xEnd,e.yEnd]},Ki=function(e){return[e.colorIdx,e.colorIdx,e.colorIdx,e.colorIdx,e.colorIdx,e.colorIdx]},Ji=function(e){return[e.focused,e.focused,e.focused,e.focused,e.focused,e.focused]},$i=function e(t){if(!(this instanceof e?this.constructor:void 0))throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');for(var a=t.libraries.PIXI,n=t.libraries.d3Scale,i=n.scaleLinear,o=n.scaleLog,r=t.services.tileProxy,s=t.utils.colorToHex,l=o().domain([1,10]).range([.1,1]).clamp(!0),u=function(e){return t.utils.colorToRgba(e).slice(0,3).map((function(e){return Math.min(1,Math.max(0,e/255))}))},h=function(e){Object(vi.a)(n,e);var t=Object(yi.a)(n);function n(e,i){var o;return Object(di.a)(this,n),(o=t.call(this,e,i)).updateOptions(),o.pLoading=new a.Graphics,o.pLoading.position.x=0,o.pLoading.position.y=0,o.pMasked.addChild(o.pLoading),o.loadIndicator=new a.Text("Loading data...",{fontSize:o.labelSize||10,fill:8421504}),o.pLoading.addChild(o.loadIndicator),o}return Object(mi.a)(n,[{key:"initTile",value:function(e){e.histogramMax=0,this.updateTileFocusMap(e)}},{key:"updateTileHistogram",value:function(e){var t=this,a=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),n=a.tileX,i=a.tileWidth/this.numBins;e.binXPos=new Float32Array(this.numBins+1),e.histogram1d=new Float32Array(this.numBins),e.histogram2d=new Float32Array(this.numBins*this.numGroups),e.histogram2dNumPred=new Uint8Array(this.numBins*this.numGroups);for(var o=0,r=0;r<=this.numBins;r++)e.binXPos[r]=n+i*r;var s=new Map,c=this.numBins-1;e.tileData.filter(this.itemFilter).forEach((function(a){for(var r=t.categoryToGroup.get(a.fields[t.categoryField].toLowerCase()),l=Math.max(0,Math.min(c,Math.round((t.getStart(a)-n)/i))),u=Math.max(0,Math.min(c,Math.round((t.getEnd(a)-n)/i))),h=Math.abs(u-l),d=t.getImportance(a),m=t.getCategory(a),p=r*t.numBins,f=0;f<=h;f++){var g=l+f,b=p+g,v=s.get(m)||{};v[g]||(v[g]=v[g]||d>0,e.histogram2dNumPred[b]+=v[g],s.set(m,v)),e.histogram2d[b]+=d,e.histogram1d[g]+=d,o=Math.max(o,e.histogram1d[g])}})),e.histogramMax=o}},{key:"updateHistograms",value:function(){Object.values(this.fetchedTiles).forEach(this.updateTileHistogram.bind(this))}},{key:"updateTileFocusMap",value:function(e){e.focusMap=new Float32Array(this.numBins);var t=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),a=t.tileX,n=t.tileWidth;if(a<=this.focusRegion[1]&&a+n>=this.focusRegion[0])for(var i=n/this.numBins,o=Math.max(0,Math.round((this.focusRegion[0]-a)/i)),r=Math.min(this.numBins-1,Math.round((this.focusRegion[1]-a)/i)),s=Math.abs(r-o),c=0;c<=s;c++)e.focusMap[c]=1}},{key:"updateFocusMap",value:function(){Object.values(this.fetchedTiles).forEach(this.updateTileFocusMap.bind(this))}},{key:"updateStratificationOption",value:function(){var e=this;if(!this.options.stratification)return this.categoryField=void 0,this.categoryToGroup=void 0,this.groupToColor=void 0,this.numGroups=0,this.numFilteredGroups=0,this.numCategories=0,void(this.groupLabels=[]);this.categoryField=this.options.stratification.categoryField,this.getCategory=function(t){return t.fields[e.categoryField].toLowerCase()},this.categoryToGroup=new Map,this.categoryToY=new Map,this.groupToColor=new Map,this.groupSizes=this.options.stratification.groups.map((function(t){return t.categories.filter((function(t){return e.valueFilter(t)})).length})),this.filteredGroups=this.options.stratification.groups.filter((function(t,a){return e.groupSizes[a]>0})),this.numGroups=this.options.stratification.groups.length,this.numFilteredGroups=this.filteredGroups.length,this.numCategories=this.groupSizes.reduce((function(e,t){return e+t}),0),this.groupLabels=this.options.stratification.groups.map((function(e,t){return e.label||"Group ".concat(t)}));var t=0;this.options.stratification.groups.forEach((function(a,n){e.groupToColor.set(n,[s(a.color||Fe[n%Fe.length]),s(a.backgroundColor||_e[n%_e.length])]),a.categories.filter((function(t){return e.valueFilter(t)})).forEach((function(a,i){e.categoryToGroup.set(a.toLowerCase(),n),e.categoryToY.set(a.toLowerCase(),t+i)})),t+=e.groupSizes[n]})),this.groupLabelsPixiText=this.groupLabels.map((function(t,n){return new a.Text(t,{fontSize:e.labelSize,align:"right"===e.axisAlign?"right":"left",fill:s(e.options.stratification.groups[n].axisLabelColor||He[n%He.length])})}))}},{key:"updateOptions",value:function(){var e=this;this.axisAlign=this.options.axisAlign||"left",this.labelColor=s(this.options.labelColor||"black"),this.labelSize=this.options.labelSize||12,this.colorMap=this.options.colorMap||Object(S.a)(Fe),this.colorMapRgbNorm=this.colorMap.map(u);var t=ye(a,this.colorMapRgbNorm),n=Object(c.a)(t,2);this.colorMapTex=n[0],this.colorMapTexRes=n[1],this.colorMapFocus=this.options.colorMapFocus||Object(S.a)(He),this.colorMapFocusRgbNorm=this.colorMapFocus.map(u);var o=ye(a,this.colorMapFocusRgbNorm),r=Object(c.a)(o,2);this.colorMapFocusTex=r[0],this.colorMapFocusTexRes=r[1],this.markColor=s(this.options.markColor||"black"),this.markColorRgbNorm=this.options.markColor?u(this.options.markColor):[0,0,0],this.markOpacity=Number.isNaN(+this.options.markOpacity)?1:Math.min(1,Math.max(0,+this.options.markOpacity)),this.markSize=this.options.markSize||2,this.markColorFocus=s(this.options.markColorFocus||"red"),this.markColorFocusRgbNorm=this.options.markColorFocus?u(this.options.markColorFocus):[1,0,0],this.markOpacityFocus=Number.isNaN(+this.options.markOpacityFocus)?this.markOpacity:Math.min(1,Math.max(0,+this.options.markOpacityFocus)),this.markSizeFocus=this.options.markSizeFocus||this.markSize,this.binSize=this.options.binSize||8,this.numBins=this.tilesetInfo?Math.round(this.tilesetInfo.tile_size/this.binSize):1024/this.binSize,this.getOffset=!Number.isNaN(+this.options.offsetField)&&this.options.offsetField>=0?function(t){return e.chromOffsets[t.fields[e.options.offsetField]]}:function(){return 0},this.getStart=!Number.isNaN(+this.options.startField)&&this.options.startField>=0?function(t){return e.getOffset(t)+ +t.fields[e.options.startField]}:function(e){return e.xStart},this.getEnd=!Number.isNaN(+this.options.endField)&&this.options.endField>=0?function(t){return e.getOffset(t)+ +t.fields[e.options.endField]}:function(e){return e.xEnd},this.getImportance=this.options.importanceField?function(t){return+t.fields[e.options.importanceField]}:function(){return 1};var h=this.options.importanceDomain||[1e3,1];this.filterSet=this.options.filter&&this.options.filter.set?this.options.filter.set.reduce((function(e,t){return e.add(t),e}),new Set):null,this.filterField=this.options.filter&&this.options.filter.field,this.valueFilter=this.filterSet?function(t){return e.filterSet.has(t)}:function(){return!0},this.itemFilter=this.valueFilter&&this.filterField?function(t){return e.valueFilter(t.fields[e.filterField])}:function(){return!0};var d=i().domain(h).range([1,10]);this.opacityScale=function(e){return l(d(e))},this.focusRegion=this.options.focusRegion?this.options.focusRegion:[1/0,1/0],this.focusGene=this.options.focusGene?this.options.focusGene.toLowerCase():void 0,this.minImportance=this.options.minImportance||0,this.updateStratificationOption(),this.updateFocusMap(),this.updateHistograms(),this.updateScales()}},{key:"updateLoadIndicator",value:function(){var e=Object(c.a)(this.position,2),t=e[0],a=e[1];this.pLoading.position.x=t+6,this.pLoading.position.y=a+6,this.fetching.size?this.pLoading.addChild(this.loadIndicator):this.pLoading.removeChild(this.loadIndicator)}},{key:"computeChromOffets",value:function(){var e,t;this.tilesetInfo&&(this.tilesetInfo.chromsizes?(e=this.tilesetInfo.chromsizes.map((function(e){return e[0]})),t=this.tilesetInfo.chromsizes.map((function(e){return e[1]}))):(e=this.tilesetInfo.chrom_names.split("\t"),t=this.tilesetInfo.chrom_sizes.split("\t").map((function(e){return+e}))),this.chromOffsets=e.reduce((function(e,a,n){var i=Object(c.a)(e,2),o=i[0],r=i[1];return o[a]=r,[o,r+t[n]]}),[{},0])[0])}},{key:"refreshTiles",value:function(){for(var e,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];if((e=Object(gi.a)(Object(bi.a)(n.prototype),"refreshTiles",this)).call.apply(e,[this].concat(a)),this.computeChromOffets(),this.updateLoadIndicator(),this.tilesetInfo){var o=this.numBins;this.numBins=Math.round(this.tilesetInfo.tile_size/this.binSize),o!==this.numBins&&(this.updateHistograms(),this.updateScales())}}},{key:"rerender",value:function(e){this.options=e,this.updateOptions(),this.updateExistingGraphics()}},{key:"updateScales",value:function(){var e=Object.values(this.fetchedTiles);if(e.length){var t=Object(c.a)(this.dimensions,2)[1];this.histMax=Qi(e),this.heightScale=i().domain([0,this.histMax]).range([t,0]),this.valueScale=this.heightScale,this.valueScaleInverted=i().domain([0,this.histMax]).range([0,t])}}},{key:"histToSegments",value:function(e){for(var t=[],a=0;a<this.numBins;a++){var n=0;if(e.histogram1d[a]>0)for(var i=0;i<this.numGroups;i++){var o=e.histogram2d[i*this.numBins+a];o&&(t.push({xStart:this._xScale(e.binXPos[a]),xEnd:this._xScale(e.binXPos[a+1]),yStart:this.heightScale(n),yEnd:this.heightScale(n+o),colorIdx:i%this.colorMap.length,focused:e.focusMap[a]}),n+=o)}}return t}},{key:"renderStackedBars",value:function(){this.drawnAtScale=i().domain(Object(S.a)(this.xScale().domain())).range(Object(S.a)(this.xScale().range()));var e=Object.values(this.fetchedTiles).flatMap(this.histToSegments.bind(this)),t=new Float32Array(e.flatMap(qi)),n=new Float32Array(e.flatMap(Ki)),o=new Float32Array(e.flatMap(Ji)),r=new a.UniformGroup({uColorMapTex:this.colorMapTex,uColorMapTexRes:this.colorMapTexRes,uColorMapFocus:this.colorMapFocusTex,uColorMapFocusTexRes:this.colorMapFocusTexRes}),s=a.Shader.from(Yi,Vi,r),c=new a.Geometry;c.addAttribute("aPosition",t,2),c.addAttribute("aColorIdx",n,1),c.addAttribute("aFocused",o,1);var l=new a.Mesh(c,s,new a.State,a.DRAW_MODES.TRIANGLES),u=new a.Graphics;u.addChild(l),this.pMain.x=this.position[0],this.indicatorPointGraphics&&this.pMain.removeChild(this.indicatorPointGraphics),this.pMain.addChild(u),this.indicatorPointGraphics=u,Xi(this.indicatorPointGraphics,this._xScale,this.drawnAtScale),this.draw(),this.animate()}},{key:"renderTrack",value:function(){this.drawAxis(this.valueScaleInverted),this.renderStackedBars()}},{key:"hasFetchedTiles",value:function(){return Object.values(this.fetchedTiles).length}},{key:"updateExistingGraphics",value:function(){this.updateLoadIndicator(),this.hasFetchedTiles()&&(this.updateHistograms(),this.updateScales(),this.renderTrack())}},{key:"getMouseOverHtml",value:function(e,t){if(!this.tilesetInfo)return"";var a=this.calculateZoomLevel(),n=r.calculateTileWidth(this.tilesetInfo,a,this.tilesetInfo.tile_size),i=this._xScale.invert(e)/n,o=Math.floor(i),s=this.tileToLocalId([a,o]),l=this.fetchedTiles[s];if(!l)return"";for(var u=i-o,h=Math.floor(this.numBins*u),d=[],m=[],p=0,f=0,g=0;g<this.numGroups;g++){f+=l.histogram2d[g*this.numBins+h];var b=l.histogram2dNumPred[g*this.numBins+h];m.push(b),p+=b,d.push(f)}var v=this.heightScale.invert(t),y=d.findIndex((function(e){return e>v}));if(y>=0){var w=this.groupToColor.get(y),x=Object(c.a)(w,2),A=x[0],E=x[1],k="#".concat(A.toString(16)),O="#".concat(E.toString(16)),C=l.histogram2dNumPred[y*this.numBins+h];return'<div style="margin: -0.25rem; padding: 0 0.25rem; background: '.concat(O,'"><strong style="color: ').concat(k,';">').concat(this.groupLabels[y],":</strong> ").concat(C," of ").concat(p," samples</div>")}return""}},{key:"setPosition",value:function(e){Object(gi.a)(Object(bi.a)(n.prototype),"setPosition",this).call(this,e);var t=Object(c.a)(this.position,2);this.pMain.position.x=t[0],this.pMain.position.y=t[1]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.indicatorPointGraphics&&Xi(this.indicatorPointGraphics,e,this.drawnAtScale),this.refreshTiles(),this.draw()}},{key:"exportSVG",value:function(){var e=this,t=null,a=null,i=Object(gi.a)(Object(bi.a)(n.prototype),"superSVG",this).call(this),o=Object(c.a)(i,2);a=o[0],t=o[1],a.setAttribute("class","exported-stacked-bar-track");var r=document.createElement("g");t.appendChild(r),r.setAttribute("transform","translate(".concat(this.position[0],",").concat(this.position[1],")")),Object.values(this.fetchedTiles).flatMap(this.histToSegments.bind(this)).forEach((function(t){var a=t.xStart,n=t.xEnd,i=t.yStart,o=t.yEnd,s=t.colorIdx,c=document.createElement("rect");c.setAttribute("x",n),c.setAttribute("y",o),c.setAttribute("width",Math.abs(n-a)),c.setAttribute("height",Math.abs(o-i)),c.setAttribute("fill",e.colorMap[s]),c.setAttribute("stroke-width",0),r.appendChild(c)}));var s=document.createElement("g");if(s.setAttribute("id","axis"),a.appendChild(s),s.setAttribute("transform","translate(".concat(this.axis.pAxis.position.x,", ").concat(this.axis.pAxis.position.y,")")),"left"===this.options.axisPositionHorizontal||"top"===this.options.axisPositionVertical){var l=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);s.appendChild(l)}else if("right"===this.options.axisPositionHorizontal||"bottom"===this.options.axisPositionVertical){var u=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);s.appendChild(u)}return[a,t]}}]),n}(t.tracks.HorizontalLine1DPixiTrack),d=arguments.length,m=new Array(d>1?d-1:0),p=1;p<d;p++)m[p-1]=arguments[p];return Object(hi.a)(h,m)};$i.config={type:"stacked-bar",datatype:["bedlike"],orientation:"1d",name:"Advanced Stacked Bars Track",thumbnail:(new DOMParser).parseFromString('<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M4 2.1L.5 3.5v12l5-2 5 2 5-2v-12l-5 2-3.17-1.268" fill="none" stroke="currentColor"/><path d="M10.5 3.5v12" fill="none" stroke="currentColor" stroke-opacity=".33" stroke-dasharray="1,2,0,0"/><path d="M5.5 13.5V6" fill="none" stroke="currentColor" stroke-opacity=".33" stroke-width=".9969299999999999" stroke-dasharray="1.71,3.43,0,0"/><path d="M9.03 5l.053.003.054.006.054.008.054.012.052.015.052.017.05.02.05.024 4 2 .048.026.048.03.046.03.044.034.042.037.04.04.037.04.036.042.032.045.03.047.028.048.025.05.022.05.02.053.016.053.014.055.01.055.007.055.005.055v.056l-.002.056-.005.055-.008.055-.01.055-.015.054-.017.054-.02.052-.023.05-.026.05-.028.048-.03.046-.035.044-.035.043-.038.04-4 4-.04.037-.04.036-.044.032-.045.03-.046.03-.048.024-.05.023-.05.02-.052.016-.052.015-.053.012-.054.01-.054.005-.055.003H8.97l-.053-.003-.054-.006-.054-.008-.054-.012-.052-.015-.052-.017-.05-.02-.05-.024-4-2-.048-.026-.048-.03-.046-.03-.044-.034-.042-.037-.04-.04-.037-.04-.036-.042-.032-.045-.03-.047-.028-.048-.025-.05-.022-.05-.02-.053-.016-.053-.014-.055-.01-.055-.007-.055L4 10.05v-.056l.002-.056.005-.055.008-.055.01-.055.015-.054.017-.054.02-.052.023-.05.026-.05.028-.048.03-.046.035-.044.035-.043.038-.04 4-4 .04-.037.04-.036.044-.032.045-.03.046-.03.048-.024.05-.023.05-.02.052-.016.052-.015.053-.012.054-.01.054-.005L8.976 5h.054zM5 10l4 2 4-4-4-2-4 4z" fill="currentColor"/><path d="M7.124 0C7.884 0 8.5.616 8.5 1.376v3.748c0 .76-.616 1.376-1.376 1.376H3.876c-.76 0-1.376-.616-1.376-1.376V1.376C2.5.616 3.116 0 3.876 0h3.248zm.56 5.295L5.965 1H5.05L3.375 5.295h.92l.354-.976h1.716l.375.975h.945zm-1.596-1.7l-.592-1.593-.58 1.594h1.172z" fill="currentColor"/></svg>',"text/xml").documentElement,availableOptions:["flip1D","labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","strokeColor","strokeWidth","trackBorderWidth","trackBorderColor"],defaultOptions:{flip1D:"no",labelColor:"black",labelPosition:"hidden",strokeColor:"black",strokeWidth:1,trackBorderWidth:0,trackBorderColor:"black"}};var eo=$i,to=a(85),ao=a(509);function no(e){if(!(this instanceof no?this.constructor:void 0))throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');for(var t=function(e){Object(vi.a)(a,e);var t=Object(yi.a)(a);function a(e,n){var i;Object(di.a)(this,a),i=t.call(this,e,n);var o=Object(fe.a)(),r=o.publish,s=o.subscribe,c=o.unsubscribe;return i.publish=r,i.subscribe=s,i.unsubscribe=c,i.collectAnnotationsBound=i.collectAnnotations.bind(Object(to.a)(i)),i.updateOptions(),i}return Object(mi.a)(a,[{key:"updateOptions",value:function(){this.options.maxPerTile=this.options.maxPerTile||50}},{key:"drawPoly",value:function(){}},{key:"renderRows",value:function(){}},{key:"collectAnnotations",value:function(e){var t=+e.tileId.split(".")[0];this.initialize();for(var a=this.options.focusRegion||[1/0,1/0],n=[],i=[].concat(Object(S.a)(e.plusStrandRows||[]),Object(S.a)(e.minusStrandRows||[])),o=[],r=[],s=0;s<i.length;s++)for(var c=0;c<i[s].length;c++){var l=i[s][c].value,u=l.fields,h=+l.chrOffset,d=+u[1]+h,m=+u[2]+h,p=this._xScale(d),f=this._xScale(m);if(!(t in this.drawnRects)||!(l.uid in this.drawnRects[t])){this.drawnRects[t]||(this.drawnRects[t]={});var g={xStartScreen:p,xEndScreen:f,xStartAbs:d,xEndAbs:m,data:l,isFocused:d<=a[1]&&m>=a[0]},b=Object(ao.a)(r,l.importance);r.splice(b,0,l.importance),o.splice(b,0,n.push(g)-1)}}return n.length<=this.options.maxPerTile?n:o.slice(0,this.options.maxPerTile).map((function(e){return n[e]}))}},{key:"rerender",value:function(){this.updateOptions(),this.updateExistingGraphics()}},{key:"updateExistingGraphics",value:function(){Object(gi.a)(Object(bi.a)(a.prototype),"updateExistingGraphics",this).call(this);var e=Object.values(this.visibleAndFetchedTiles()).map(this.collectAnnotationsBound).reduce((function(e,t){return e.concat(t)}),[]);this.publish("tilesDrawn",{uuid:this.uuid,annotations:e})}},{key:"getMouseOverHtml",value:function(){return""}}]),a}(e.tracks.BedLikeTrack),a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return Object(hi.a)(t,n)}no.config={type:"tss",datatype:["bedlike"]};var io=no,oo=function e(t){if(!(this instanceof e?this.constructor:void 0))throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');for(var a=function(){return Math.random().toString(36).substring(2)},n=function(){function e(t){Object(di.a)(this,e),this.dataConfig=t}return Object(mi.a)(e,[{key:"tilesetInfo",value:function(e){var t=this;this.tilesetInfoLoading=!0,this.tilesetInfoData||(this.tilesetInfoData=new Promise((function(e,n){var i=a(),o=setTimeout((function(){return n(new Error("Could not load tileset info for ".concat(t.dataConfig.id)))}),1e4);fe.b.subscribe("localBed:tilesetInfo:".concat(i),(function(a){clearTimeout(o),t.tilesetInfoLoading=!1,e(a)}),1),fe.b.publish("localBed:requestTilesetInfo",{fileId:t.dataConfig.id,requestId:i})}))),this.tilesetInfoData.then((function(t){e(t)}))}},{key:"fetchTilesDebounced",value:function(e,t){var a=this;Promise.all(t.map((function(e){return a.tile(e.split("."))}))).then((function(a){e(a.reduce((function(e,a,n){return e[t[n]]=a,e}),{}))}))}},{key:"tile",value:function(e){var t=this,n=Object(c.a)(e,2),i=n[0],o=n[1];return new Promise((function(e,n){var r=a(),s=setTimeout((function(){return n(new Error("Could not load tile ".concat(i,".").concat(o," for ").concat(t.dataConfig.id," (request: ").concat(r,")")))}),1e4);fe.b.subscribe("localBed:tile:".concat(r),(function(t){clearTimeout(s),e(t)}),1),fe.b.publish("localBed:requestTile",{fileId:t.dataConfig.id,z:+i,x:+o,requestId:r})}))}}]),e}(),i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];return Object(hi.a)(n,o)};oo.config={type:"localBed"};var ro=oo;a(449);Object(n.a)({dataFetcher:ro,config:ro.config},{pluginType:"dataFetcher"}),Object(n.a)({track:Mi,config:Mi.config}),Object(n.a)({track:Wi,config:Wi.config}),Object(n.a)({track:Zi,config:Zi.config}),Object(n.a)({track:eo,config:eo.config}),Object(n.a)({track:io,config:io.config}),Object(n.a)({track:fi,config:fi.config,isMetaTrack:!0}),s.a.render(o.a.createElement(ui,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[339,1,2]]]);
//# sourceMappingURL=main.519fad0f.chunk.js.map
(this["webpackJsonpenhancer-promoter-vis"]=this["webpackJsonpenhancer-promoter-vis"]||[]).push([[0],{120:function(t,i,e){t.exports=e(229)},125:function(t,i,e){},220:function(t,i,e){},221:function(t,i,e){},222:function(t,i,e){},224:function(t,i,e){},225:function(t,i,e){},229:function(t,i,e){"use strict";e.r(i);var o=e(58),a=e(1),r=e.n(a),n=e(10),s=e.n(n),l=(e(125),e(9)),c=e(69),h=e(49),u=(e(220),function(){return r.a.createElement("div",{className:"full-wh app-initializing"},r.a.createElement("span",null,"Initializing..."))}),d=(e(221),function(){return r.a.createElement("div",{className:"full-wh app-error"},r.a.createElement("span",null,"Failed to initialize!"))}),p=(e(222),Object(a.createContext)()),m=function(t){var i=t.children,e=function(t,i){var e=Object(a.useState)(null),o=Object(l.a)(e,2),r=o[0],n=o[1];return[r,{onChange:function(t){n(t.target.value),i&&i(t)},name:t,type:"radio"}]}(t.name,t.onChange),o=Object(l.a)(e,2)[1];return r.a.createElement(p.Provider,{value:o},i)},f=function(t){var i=Object(a.useContext)(p);return r.a.createElement("label",{className:"fb fb-align-center radio-button"},r.a.createElement("input",Object.assign({},t,i)),t.label)},v=function(t,i){var e=Math.max(2,Math.ceil(Math.sqrt(i.length))),o=new Float32Array(4*Math.pow(e,2));return i.forEach((function(t,i){o[4*i]=t[0],o[4*i+1]=t[1],o[4*i+2]=t[2],o[4*i+3]=t[3]})),[t.Texture.fromBuffer(o,e,e),e]},g=function(t,i,e,o,a){for(var r=e-i,n=Math.sign(r),s=Math.abs(r),l=2*a,c=Math.ceil(s/l),h=0;h<c;h++)t.moveTo(i+h*l*n,o),t.lineTo(i+(h*l+a)*n,o)},_=(e(223),e(224),{editable:!0,trackSourceServers:["//higlass.io/api/v1","https://resgen.io/api/v1/gt/paper-data"],views:[{uid:"view1",genomePositionSearchBox:{autocompleteServer:"//higlass.io/api/v1",autocompleteId:"OHJakQICQD6gTD7skx4EWA",chromInfoServer:"//higlass.io/api/v1",chromInfoId:"hg19",visible:!0},chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",tracks:{top:[{type:"horizontal-chromosome-labels",options:{color:"#999999",stroke:"white",fontSize:10,fontIsLeftAligned:!0,showMousePosition:!1,mousePositionColor:"#000000"},tilesetUid:"ADfY_RtsQR6oKOMyrq6qhw",height:12,server:"https://resgen.io/api/v1",uid:"chroms"},{type:"horizontal-gene-annotations",uid:"genes",height:48,server:"https://resgen.io/api/v1",tilesetUid:"NCifnbrKQu6j-ohVWJLoJw",options:{fontSize:9,labelColor:"black",geneAnnotationHeight:12,geneLabelPosition:"outside",geneStrandSpacing:2}},{type:"point-annotation",uid:"ibd-snps",server:"https://resgen.io/api/v1",tilesetUid:"VF5-RDXWTxidGMJU7FeaxA",height:36,options:{axisPositionHorizontal:"right",markColor:"black",markColorFocus:"#cc0078",markSize:2,markOpacity:.33,markOpacityFocus:.66,valueColumn:7,focusRegion:[1761419571,1761419621],name:"IBD SNPs",toolTip:{name:{field:3},value:{field:6,numDecimals:2},other:[{label:"Post. Prob.",field:7,numDecimals:2}]}}},{type:"stacked-bar",server:"https://resgen.io/api/v1",tilesetUid:"PGXLE50tQyOayNXKUnX4fQ",height:96,uid:"stacked-bars",options:{binSize:4,axisAlign:"right",axisPositionHorizontal:"right",labelPosition:"hidden",markColor:"black",markColorFocus:"#cc0078",markSize:4,markOpacity:.33,arcStyle:"indicator",indicatorStyle:"category-rect",labelColor:"black",trackBorderWidth:0,trackBorderColor:"black",geneField:6,importanceField:7,importanceDomain:[0,1],focusRegion:[1761419571,1761419621],name:"By Celltype",stratification:{categoryField:10,axisShowGroupSeparator:!0,groups:[{label:"Mononuclear Phagocytes",categories:["THP1_LPS_4hr-Engreitz","THP_pmaLPS_ATAC_6h","CD14-positive_monocyte_treated_with_LPS_4h-Novakovic2016","CD14-positive_monocyte_treated_with_BG_1h-Novakovic2016","CD14-positive_monocyte_treated_with_RPMI_d6-Novakovic2016","THP1-Engreitz","THP_pmaLPS_ATAC_96h","CD14-positive_monocyte_treated_with_BG_d1-Novakovic2016","THP_pmaLPS_ATAC_72h","THP-1_monocyte-VanBortle2017","CD14-positive_monocyte_treated_with_LPS_d1-Novakovic2016","CD14-positive_monocyte-ENCODE","THP_pmaLPS_ATAC_2h","dendritic_cell_treated_with_Lipopolysaccharide_0_ng-mL_for_0_hour-Garber2017","CD14-positive_monocyte_treated_with_RPMI_1h-Novakovic2016","U937_LPS_4hr-Engreitz","CD14-positive_monocyte-Novakovic2016","dendritic_cell_treated_with_Lipopolysaccharide_100_ng-mL_for_6_hour-Garber2017","CD14-positive_monocyte_treated_with_BG_4h-Novakovic2016","THP_pmaLPS_ATAC_0h","HAP1","THP-1_macrophage-VanBortle2017","dendritic_cell_treated_with_Lipopolysaccharide_100_ng-mL_for_1_hour-Garber2017","U937-Engreitz","CD14-positive_monocyte_treated_with_RPMI_d1-Novakovic2016","CD14-positive_monocyte_treated_with_RPMI_4h-Novakovic2016","CD14-positive_monocyte_treated_with_LPS_d6-Novakovic2016","CD14-positive_monocyte_treated_with_LPS_1h-Novakovic2016","THP_pmaLPS_ATAC_24h","THP_pmaLPS_ATAC_1h","dendritic_cell_treated_with_Lipopolysaccharide_100_ng-mL_for_2_hour-Garber2017","CD14-positive_monocyte_treated_with_BG_d6-Novakovic2016","dendritic_cell_treated_with_Lipopolysaccharide_100_ng-mL_for_30_minute-Garber2017","THP_pmaLPS_ATAC_120h","dendritic_cell_treated_with_Lipopolysaccharide_100_ng-mL_for_4_hour-Garber2017","THP_pmaLPS_ATAC_48h","CD14-positive_monocytes-Roadmap","THP_pmaLPS_ATAC_12h"]},{label:"B Cells",categories:["Karpas-422-ENCODE","BJAB-Engreitz","BJAB_anti-IgM_anti-CD40_4hr-Engreitz","B_cell-ENCODE","OCI-LY7-ENCODE","GM12878-Roadmap","MM.1S-ENCODE","CD19-positive_B_cell-Roadmap","CD8-positive_alpha-beta_T_cell-ENCODE"]},{label:"T Cells",categories:["Jurkat_anti-CD3_PMA_4hr-Engreitz","Jurkat-Engreitz","CD3-positive_T_cell-Roadmap","CD4-positive_helper_T_cell-ENCODE","CD8-positive_alpha-beta_T_cell-Corces2016","thymus_fetal-Roadmap","CD4-positive_helper_T_cell-Corces2016","T-cell-ENCODE"]},{label:"Other haematopoietic cells",categories:["spleen-ENCODE","K562-Roadmap","CD56-positive_natural_killer_cells-Roadmap","erythroblast-Corces2016","CD34-positive_mobilized-Roadmap","megakaryocyte-erythroid_progenitor-Corces2016","natural_killer_cell-Corces2016","IMR90-Roadmap"]},{label:"Fibroblasts",categories:["foreskin_fibroblast-Roadmap","fibroblast_of_dermis-Roadmap","fibroblast_of_arm-ENCODE","astrocyte-ENCODE","fibroblast_of_lung-Roadmap"]},{label:"Epithelial",categories:["small_intestine_fetal-Roadmap","epithelial_cell_of_prostate-ENCODE","HCT116-ENCODE","MCF-7-ENCODE","adrenal_gland_fetal-ENCODE","H7","keratinocyte-Roadmap","MCF10A-Ji2017","pancreas-Roadmap","mammary_epithelial_cell-Roadmap","stomach-Roadmap","LoVo","A549_treated_with_ethanol_0.02_percent_for_1_hour-Roadmap","PC-9-ENCODE","H1-hESC-Roadmap","thyroid_gland-ENCODE","HT29","MDA-MB-231","iPS_DF_19.11_Cell_Line-Roadmap","large_intestine_fetal-Roadmap","Panc1-ENCODE","adrenal_gland-ENCODE","MCF10A_treated_with_TAM24hr-Ji2017","trophoblast_cell-ENCODE","H1_BMP4_Derived_Trophoblast_Cultured_Cells-Roadmap","uterus-ENCODE","body_of_pancreas-ENCODE","stomach_fetal-Roadmap","H9-Roadmap","transverse_colon-ENCODE","H1_BMP4_Derived_Mesendoderm_Cultured_Cells-Roadmap","breast_epithelium-ENCODE","induced_pluripotent_stem_cell-ENCODE","LNCAP","H1_Derived_Mesenchymal_Stem_Cells-Roadmap","ovary-Roadmap","sigmoid_colon-ENCODE","skeletal_muscle_myoblast-Roadmap","bipolar_neuron_from_iPSC-ENCODE","coronary_artery_smooth_muscle_cell-Miller2016","SK-N-SH-ENCODE","muscle_of_trunk_fetal-Roadmap"]},{label:"Other",categories:["adipose_tissue-ENCODE","HeLa-S3-Roadmap","hepatocyte-ENCODE","heart_ventricle-ENCODE","spinal_cord_fetal-ENCODE","coronary_artery-ENCODE","HepG2-Roadmap","muscle_of_leg_fetal-Roadmap","gastrocnemius_medialis-ENCODE","brite_adipose-Loft2014","placenta-Roadmap","liver-ENCODE","A673-ENCODE","white_adipose-Loft2014","cardiac_muscle_cell-ENCODE","osteoblast-ENCODE","H1_Derived_Neuronal_Progenitor_Cultured_Cells-Roadmap","endothelial_cell_of_umbilical_vein-Roadmap","NCCIT","myotube_originated_from_skeletal_muscle_myoblast-Roadmap","psoas_muscle-Roadmap","endothelial_cell_of_umbilical_vein_vegf_stim_4_hours-zhang2013","endothelial_cell_of_umbilical_vein_vegf_stim_12_hours-zhang2013"]}]}}},{type:"bed-matrix",server:"https://resgen.io/api/v1",tilesetUid:"PGXLE50tQyOayNXKUnX4fQ",height:403,uid:"indicatorByCellTypes",options:{axisAlign:"right",labelPosition:"hidden",markColor:"black",markColorFocus:"#cc0078",markSize:4,markMinWidth:4,markHeight:3,rowHeight:3,markOpacity:.33,arcStyle:"indicator",indicatorStyle:"category-rect",labelColor:"black",trackBorderWidth:0,trackBorderColor:"black",geneField:6,importanceField:7,importanceDomain:[0,1],name:"By Celltype",axisPositionHorizontal:"right",stratification:{categoryField:10,axisShowGroupSeparator:!0,groups:[{label:"Mononuclear Phagocytes",categories:["THP1_LPS_4hr-Engreitz","THP_pmaLPS_ATAC_6h","CD14-positive_monocyte_treated_with_LPS_4h-Novakovic2016","CD14-positive_monocyte_treated_with_BG_1h-Novakovic2016","CD14-positive_monocyte_treated_with_RPMI_d6-Novakovic2016","THP1-Engreitz","THP_pmaLPS_ATAC_96h","CD14-positive_monocyte_treated_with_BG_d1-Novakovic2016","THP_pmaLPS_ATAC_72h","THP-1_monocyte-VanBortle2017","CD14-positive_monocyte_treated_with_LPS_d1-Novakovic2016","CD14-positive_monocyte-ENCODE","THP_pmaLPS_ATAC_2h","dendritic_cell_treated_with_Lipopolysaccharide_0_ng-mL_for_0_hour-Garber2017","CD14-positive_monocyte_treated_with_RPMI_1h-Novakovic2016","U937_LPS_4hr-Engreitz","CD14-positive_monocyte-Novakovic2016","dendritic_cell_treated_with_Lipopolysaccharide_100_ng-mL_for_6_hour-Garber2017","CD14-positive_monocyte_treated_with_BG_4h-Novakovic2016","THP_pmaLPS_ATAC_0h","HAP1","THP-1_macrophage-VanBortle2017","dendritic_cell_treated_with_Lipopolysaccharide_100_ng-mL_for_1_hour-Garber2017","U937-Engreitz","CD14-positive_monocyte_treated_with_RPMI_d1-Novakovic2016","CD14-positive_monocyte_treated_with_RPMI_4h-Novakovic2016","CD14-positive_monocyte_treated_with_LPS_d6-Novakovic2016","CD14-positive_monocyte_treated_with_LPS_1h-Novakovic2016","THP_pmaLPS_ATAC_24h","THP_pmaLPS_ATAC_1h","dendritic_cell_treated_with_Lipopolysaccharide_100_ng-mL_for_2_hour-Garber2017","CD14-positive_monocyte_treated_with_BG_d6-Novakovic2016","dendritic_cell_treated_with_Lipopolysaccharide_100_ng-mL_for_30_minute-Garber2017","THP_pmaLPS_ATAC_120h","dendritic_cell_treated_with_Lipopolysaccharide_100_ng-mL_for_4_hour-Garber2017","THP_pmaLPS_ATAC_48h","CD14-positive_monocytes-Roadmap","THP_pmaLPS_ATAC_12h"]},{label:"B Cells",categories:["Karpas-422-ENCODE","BJAB-Engreitz","BJAB_anti-IgM_anti-CD40_4hr-Engreitz","B_cell-ENCODE","OCI-LY7-ENCODE","GM12878-Roadmap","MM.1S-ENCODE","CD19-positive_B_cell-Roadmap","CD8-positive_alpha-beta_T_cell-ENCODE"]},{label:"T Cells",categories:["Jurkat_anti-CD3_PMA_4hr-Engreitz","Jurkat-Engreitz","CD3-positive_T_cell-Roadmap","CD4-positive_helper_T_cell-ENCODE","CD8-positive_alpha-beta_T_cell-Corces2016","thymus_fetal-Roadmap","CD4-positive_helper_T_cell-Corces2016","T-cell-ENCODE"]},{label:"Other haematopoietic cells",categories:["spleen-ENCODE","K562-Roadmap","CD56-positive_natural_killer_cells-Roadmap","erythroblast-Corces2016","CD34-positive_mobilized-Roadmap","megakaryocyte-erythroid_progenitor-Corces2016","natural_killer_cell-Corces2016","IMR90-Roadmap"]},{label:"Fibroblasts",categories:["foreskin_fibroblast-Roadmap","fibroblast_of_dermis-Roadmap","fibroblast_of_arm-ENCODE","astrocyte-ENCODE","fibroblast_of_lung-Roadmap"]},{label:"Epithelial",categories:["small_intestine_fetal-Roadmap","epithelial_cell_of_prostate-ENCODE","HCT116-ENCODE","MCF-7-ENCODE","adrenal_gland_fetal-ENCODE","H7","keratinocyte-Roadmap","MCF10A-Ji2017","pancreas-Roadmap","mammary_epithelial_cell-Roadmap","stomach-Roadmap","LoVo","A549_treated_with_ethanol_0.02_percent_for_1_hour-Roadmap","PC-9-ENCODE","H1-hESC-Roadmap","thyroid_gland-ENCODE","HT29","MDA-MB-231","iPS_DF_19.11_Cell_Line-Roadmap","large_intestine_fetal-Roadmap","Panc1-ENCODE","adrenal_gland-ENCODE","MCF10A_treated_with_TAM24hr-Ji2017","trophoblast_cell-ENCODE","H1_BMP4_Derived_Trophoblast_Cultured_Cells-Roadmap","uterus-ENCODE","body_of_pancreas-ENCODE","stomach_fetal-Roadmap","H9-Roadmap","transverse_colon-ENCODE","H1_BMP4_Derived_Mesendoderm_Cultured_Cells-Roadmap","breast_epithelium-ENCODE","induced_pluripotent_stem_cell-ENCODE","LNCAP","H1_Derived_Mesenchymal_Stem_Cells-Roadmap","ovary-Roadmap","sigmoid_colon-ENCODE","skeletal_muscle_myoblast-Roadmap","bipolar_neuron_from_iPSC-ENCODE","coronary_artery_smooth_muscle_cell-Miller2016","SK-N-SH-ENCODE","muscle_of_trunk_fetal-Roadmap"]},{label:"Other",categories:["adipose_tissue-ENCODE","HeLa-S3-Roadmap","hepatocyte-ENCODE","heart_ventricle-ENCODE","spinal_cord_fetal-ENCODE","coronary_artery-ENCODE","HepG2-Roadmap","muscle_of_leg_fetal-Roadmap","gastrocnemius_medialis-ENCODE","brite_adipose-Loft2014","placenta-Roadmap","liver-ENCODE","A673-ENCODE","white_adipose-Loft2014","cardiac_muscle_cell-ENCODE","osteoblast-ENCODE","H1_Derived_Neuronal_Progenitor_Cultured_Cells-Roadmap","endothelial_cell_of_umbilical_vein-Roadmap","NCCIT","myotube_originated_from_skeletal_muscle_myoblast-Roadmap","psoas_muscle-Roadmap","endothelial_cell_of_umbilical_vein_vegf_stim_4_hours-zhang2013","endothelial_cell_of_umbilical_vein_vegf_stim_12_hours-zhang2013"]}]}}}]},overlays:[{uid:"region-focus",includes:["chroms","genes","ibd-snps","microglia","stacked-bars","indicatorByCellTypes"],options:{extent:[[1761419596,1761419597]],minWidth:3,fill:"#cc0078",fillOpacity:.05,strokeWidth:0,outline:"#cc0078",outlineOpacity:.33,outlineWidth:1,outlinePos:["left","right"]}},{uid:"gene-focus",includes:["genes"],options:{extent:[],minWidth:3,fill:"#cc0078",fillOpacity:.25,stroke:"#cc0078",strokeWidth:1,outlineWidth:0}}],layout:{w:12,h:12,x:0,y:0},initialXDomain:[1761366260,1761603836],initialYDomain:[1761257024,1761318261]}]}),y={sizeMode:"bounded"},b=function(t){var i=Object(a.useState)(""),e=Object(l.a)(i,2),o=e[0],n=e[1],s=Object(a.useState)("chr10:81046453"),u=Object(l.a)(s,2),d=u[0],p=u[1],v=Object(a.useState)("pValue"),g=Object(l.a)(v,2),b=g[0],C=g[1],k=Object(a.useState)(y),S=Object(l.a)(k,2),x=S[0],E=(S[1],Object(a.useState)(_)),O=Object(l.a)(E,2),T=O[0],M=O[1],w=Object(a.useRef)(null),F=function(t,i,e){var o=JSON.parse(JSON.stringify(T)),a=o.views[0].tracks.top.length;t?(o.views[0].tracks.top[a-1].options.focusGene=t,o.views[0].overlays[1].options.extent=[[i,e]]):(delete o.views[0].tracks.top[a-1].options.focusGene,delete o.views[0].overlays[1].options.extent),M(o)},D=function(i){var e=Object(h.b)(T),o=function(t,i){var e;if(t.indexOf&&t.indexOf(":")>=0){var o=t.split(":"),a=Object(l.a)(o,2),r=a[0],n=a[1];e=i.chrPositions[r].pos+ +n}else e=+t;return e}(i,t.chromInfo),a=Number.isNaN(+o)?[]:[o-.5,o+.5];e.views[0].tracks.top[2].options.focusRegion=a,e.views[0].tracks.top[4].options.focusRegion=a,e.views[0].overlays[0].options.extent=[a],M(e)},A=Object(h.a)(D,500),P=function(t){"gene-annotation"===t.type?(n(t.payload.name),F(t.payload.name,t.payload.xStart,t.payload.xEnd)):"snp"===t.type&&(p("".concat(t.payload.fields[0],":").concat(t.payload.fields[1])),D(t.payload.xStart))},R=Object(a.useCallback)((function(t){null!==t&&(w.current=t.api,t.api.on("click",P))}),[]);return r.a.createElement("div",{className:"Viewer"},r.a.createElement("aside",null,r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"focus-gene",className:"main-label"},"Focus gene:"),r.a.createElement("div",{className:"flex-box"},r.a.createElement("input",{type:"text",id:"focus-gene",value:o,readOnly:!0,disabled:!0,placeholder:"Click on a gene"}),r.a.createElement("button",{onClick:function(){n(""),F()}},"clear"))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"focus-variant",className:"main-label"},"Focus variant:"),r.a.createElement("div",{className:"flex-box"},r.a.createElement("input",{type:"text",id:"focus-variant",value:d,onChange:function(t){p(t.target.value),A(t.target.value)},placeholder:"chr10:81046453"}),r.a.createElement("button",{onClick:function(){p(""),D("")}},"clear"))),r.a.createElement("div",null,r.a.createElement("label",{className:"main-label"},"Variant y-scale:"),r.a.createElement(m,{name:"variantYScale",onChange:function(t){C(t.target.value),function(t){var i=Object(h.b)(T);i.views[0].tracks.top[2].options.valueColumn="pValue"===t?7:8,M(i)}(t.target.value)}},r.a.createElement(f,{label:"p-value",value:"pValue",checked:"pValue"===b}),r.a.createElement(f,{label:"Posterior probability",value:"posteriorProbability",checked:"posteriorProbability"===b})))),r.a.createElement("div",{className:"higlass-container"},r.a.createElement(c.HiGlassComponent,{ref:R,viewConfig:T,options:x})))},C=function(t,i){return function(e){return function(o){return t(o)?r.a.createElement(i,o):r.a.createElement(e,o)}}},k=(e(225),function(){var t=Object(a.useState)(null),i=Object(l.a)(t,2),e=i[0],o=i[1];Object(a.useEffect)((function(){Object(c.ChromosomeInfo)("https://s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv").then((function(t){void 0===t.totalLength?o(!1):o(t)})).catch((function(){o(!1)}))}),[]);var n=Object(h.c)(C((function(){return null===e}),u),C((function(){return!1===e}),d))(b);return r.a.createElement("div",{className:"App"},r.a.createElement(n,{chromInfo:e}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var S=e(31),x=e(21),E=e(13),O=e(32),T=e(33),M=e(18),w=e(12),F=e(34),D=e(35),A=e(119),P=e.n(A),R="\n  precision mediump float;\n  attribute vec2 aPosition;\n  attribute float aOpacity;\n  attribute float aFocused;\n\n  uniform mat3 projectionMatrix;\n  uniform mat3 translationMatrix;\n  uniform float uPointSize;\n  uniform vec4 uColor;\n  uniform vec4 uColorFocused;\n\n  varying vec4 vColor;\n  varying vec4 vColorFocused;\n  varying float vOpacity;\n  varying float vFocused;\n\n  void main(void)\n  {\n    vColor = uColor;\n    vColorFocused = uColorFocused;\n    vOpacity = aOpacity;\n    vFocused = aFocused;\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aPosition, 1.0)).xy, 0.0, 1.0);\n    gl_PointSize = uPointSize;\n  }\n",N="\n  precision mediump float;\n  varying vec4 vColor;\n  varying vec4 vColorFocused;\n  varying float vOpacity;\n  varying float vFocused;\n\n  void main() {\n    float isNotFocused = 1.0 - vFocused;\n\n    float r = vColor.r * isNotFocused + vColorFocused.r * vFocused;\n    float g = vColor.g * isNotFocused + vColorFocused.g * vFocused;\n    float b = vColor.b * isNotFocused + vColorFocused.b * vFocused;\n\n    gl_FragColor = vec4(r, g, b, 1.0) * vOpacity;\n  }\n",L=["#c76526","#dca237","#eee462","#469b76","#3170ad","#6fb2e4","#000000","#999999"],I=["#a65420","#b7872e","#9f9841","#3a8162","#295d90","#4a7798","#000000","#666666"],H=["#f6e5db","#f9f0de","#fcfbe5","#e0eee8","#dde7f1","#e7f2fb","#d5d5d5","#ffffff"],z=function(t){return[t.cX-t.widthHalf,t.y,t.cX+t.widthHalf,t.y,t.cX+t.widthHalf,t.y+t.height,t.cX-t.widthHalf,t.y+t.height]},G=function(t,i){var e=4*i;return[e,e+1,e+2,e+2,e+3,e]},j=function(t){return[t.opacity,t.opacity,t.opacity,t.opacity]},B=function(t){return[t.focused,t.focused,t.focused,t.focused]},W=function(t){return t.tileData.length&&void 0!==t.tileData[0].yStart},V=function(t){return t.xEnd-t.xStart},X=function(t){return Math.abs(t.xStart+(t.xEnd-t.xStart)/2-(t.yStart+(t.yEnd-t.yStart)/2))},Y=function(t){return t.xStart},U=function(t){return t.xStart+(t.xEnd-t.xStart)/2},J=function(t){return t.xEnd},K=function(t){return t.yStart+(t.yEnd-t.yStart)/2},Q=function(t){return Object.values(t).reduce((function(t,i){return Math.max(t,i.tileData.reduce((function(t,i){return Math.max(t,i.width)}),0))}),0)},q=function(t,i,e){var o=(e.domain()[1]-e.domain()[0])/(i.domain()[1]-i.domain()[0]),a=i.domain().map(e)[0];t.scale.x=o,t.position.x=-a*o},Z=function t(i){if(!(this instanceof t?this.constructor:void 0))throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');for(var e=i.libraries.PIXI,o=i.libraries.d3Scale,a=o.scaleLinear,r=o.scaleLog,n=i.services.tileProxy,s=r().domain([1,10]).range([.1,1]).clamp(!0),c=function(t){Object(F.a)(r,t);var o=Object(D.a)(r);function r(t,i){var e;return Object(O.a)(this,r),(e=o.call(this,t,i)).updateOptions(),e}return Object(T.a)(r,[{key:"initTile",value:function(t){var i=W(t),e=i?X:V,o=i?U:Y,a=i?K:J,r=[];t.tileData.forEach((function(t,i){t.width=e(t),t.start=o(t),t.end=a(t),t.isLeftToRight=t.start<t.end,r.push([t.xStart,t.xEnd,i])})),t.intervalTree=P()(r)}},{key:"updateStratificationOption",value:function(){var t=this;if(!this.options.stratification)return this.categoryField=void 0,this.categoryToGroup=void 0,this.groupToColor=void 0,this.numGroups=0,this.numCategories=0,void(this.groupLabels=[]);this.categoryField=this.options.stratification.categoryField,this.getCategory=function(i){return i.fields[t.categoryField].toLowerCase()},this.categoryToGroup=new Map,this.categoryToY=new Map,this.yToCategory=new Map,this.groupToColor=new Map,this.numGroups=this.options.stratification.groups.length,this.groupSizes=this.options.stratification.groups.map((function(t){return t.categories.length})),this.numCategories=this.groupSizes.reduce((function(t,i){return t+i}),0),this.groupLabels=this.options.stratification.groups.map((function(t,i){return t.label||"Group ".concat(i)}));var o=0;this.options.stratification.groups.forEach((function(e,a){t.groupToColor.set(a,[i.utils.colorToHex(e.color||L[a%L.length]),i.utils.colorToHex(e.backgroundColor||H[a%L.length])]),e.categories.forEach((function(i,e){var r=i.toLowerCase();t.categoryToGroup.set(r,a),t.categoryToY.set(r,o+e),t.yToCategory.set(o+e,r)})),o+=e.categories.length})),this.groupLabelsPixiText=this.groupLabels.map((function(o,a){return new e.Text(o,{fontSize:t.labelSize,align:"right"===t.axisAlign?"right":"left",fill:i.utils.colorToHex(t.options.stratification.groups[a].axisLabelColor||I[a%I.length])})}))}},{key:"updateOptions",value:function(){var t=this;this.axisAlign=this.options.axisAlign||"left",this.labelColor=i.utils.colorToHex(this.options.labelColor||"black"),this.labelSize=this.options.labelSize||12,this.markColor=i.utils.colorToHex(this.options.markColor||"black"),this.markColorRgbNorm=this.options.markColor?i.utils.colorToRgba(this.options.markColor).slice(0,3).map((function(t){return Math.min(1,Math.max(0,t/255))})):[0,0,0],this.markOpacity=Number.isNaN(+this.options.markOpacity)?1:Math.min(1,Math.max(0,+this.options.markOpacity)),this.markSize=this.options.markSize||2,this.markMinWidth=this.options.markMinWidth||this.markSize,this.markHeight=this.options.markHeight||this.markSize,this.rowHeight=this.options.rowHeight||this.markHeight,this.markColorFocus=i.utils.colorToHex(this.options.markColorFocus||"red"),this.markColorFocusRgbNorm=this.options.markColorFocus?i.utils.colorToRgba(this.options.markColorFocus).slice(0,3).map((function(t){return Math.min(1,Math.max(0,t/255))})):[1,0,0],this.markOpacityFocus=Number.isNaN(+this.options.markOpacityFocus)?this.markOpacity:Math.min(1,Math.max(0,+this.options.markOpacityFocus)),this.getImportance=this.options.importanceField?function(i){return+i.fields[t.options.importanceField]}:function(t){return t.width};var e=this.options.importanceDomain||[1e3,1],o=a().domain(e).range([1,10]);this.opacityScale=function(t){return s(o(t))},this.focusRegion=this.options.focusRegion?this.options.focusRegion:[1/0,1/0],this.focusGene=this.options.focusGene?this.options.focusGene.toLowerCase():void 0,this.getGene=this.options.geneField?function(i){return i.fields[t.options.geneField].toLowerCase()}:void 0,this.minImportance=this.options.minImportance||0,this.updateStratificationOption()}},{key:"rerender",value:function(t){this.options=t,this.updateOptions(),this.updateExistingGraphics()}},{key:"updateScales",value:function(){if(Object.values(this.fetchedTiles).length){var t=Object(l.a)(this.dimensions,2)[1];this.maxWidth=Q(this.fetchedTiles),this.heightScale=a().domain([0,this.maxWidth]).range([Math.min(12,t/10),t]),this.categoryHeightScale=a().domain([0,this.numCategories]).range([0,this.numCategories*this.rowHeight]),this.valueScale=a().domain([0,this.maxWidth]).range([t,0]),this.valueScaleInverted=a().domain([0,this.maxWidth]).range([0,t])}}},{key:"itemToIndicatorCategory",value:function(t){return{cX:this._xScale(t.start),y:this.categoryHeightScale(this.categoryToY.get(this.getCategory(t))),opacity:this.opacityScale(this.getImportance(t)),focused:t.xStart<=this.focusRegion[1]&&t.xEnd>=this.focusRegion[0],widthHalf:Math.max(this.markMinWidth/2,Math.abs(this._xScale(t.xStart)-this._xScale(t.xEnd))/2),height:this.markHeight}}},{key:"itemToIndicatorReducer",value:function(t){var i=this;return this.getGene&&this.focusGene?function(e,o){return i.getGene(o)===i.focusGene&&e.push(t(o)),e}:function(i,e){return i.push(t(e)),i}}},{key:"renderIndicatorPoints",value:function(){this.drawnAtScale=a().domain(Object(E.a)(this.xScale().domain())).range(Object(E.a)(this.xScale().range()));var t=this.itemToIndicatorReducer(this.itemToIndicatorCategory.bind(this)),i=Object.values(this.fetchedTiles).flatMap((function(i){return i.tileData.reduce(t,[])})),o=new Float32Array(i.flatMap(z)),r=new Uint16Array(i.flatMap(G)),n=new Float32Array(i.flatMap(j)),s=new Float32Array(i.flatMap(B)),l=new e.UniformGroup({uColor:[].concat(Object(E.a)(this.markColorRgbNorm),[this.markOpacity]),uColorFocused:[].concat(Object(E.a)(this.markColorFocusRgbNorm),[this.markOpacity])}),c=e.Shader.from(R,N,l),h=new e.Geometry;h.addAttribute("aPosition",o,2),h.addAttribute("aOpacity",n,1),h.addAttribute("aFocused",s,1),h.addIndex(r);var u=new e.Mesh(h,c),d=new e.Graphics;d.addChild(u),this.pMain.x=this.position[0],this.indicatorPointGraphics&&this.pMain.removeChild(this.indicatorPointGraphics),this.pMain.addChild(d),this.indicatorPointGraphics=d,q(this.indicatorPointGraphics,this._xScale,this.drawnAtScale),this.draw(),this.animate()}},{key:"renderIndicatorDistanceAxis",value:function(t){this.drawAxis(t)}},{key:"renderIndicatorCategoryAxis",value:function(){var t=this,i=Object(l.a)(this.dimensions,1)[0],e=Object(l.a)(this.position,2),o=e[0],a=e[1];this.pAxis.position.x="right"===this.axisAlign?o+i:o,this.pAxis.position.y=a,this.pAxis.clear();var r=0,n=0,s="right"===this.axisAlign?-5:5,c="right"===this.axisAlign?-i:i,h="right"===this.axisAlign?-3:3,u=this.pAxis.children.length;this.pAxis.lineStyle(1,0,1,0),this.groupLabelsPixiText.forEach((function(i,e){var o=t.categoryHeightScale(t.groupSizes[e]);n+=o,i.x=h,i.y=r+o/2,i.anchor.x="right"===t.axisAlign?1:0,i.anchor.y=.5,u<e+1&&t.pAxis.addChild(i),t.pAxis.moveTo(0,r),t.pAxis.lineTo(s,r),t.options.stratification.axisShowGroupSeparator&&g(t.pAxis,0,c,r,5),r=n})),this.pAxis.moveTo(0,0),this.pAxis.lineTo(0,n),this.pAxis.lineTo(s,n),this.options.stratification.axisShowGroupSeparator&&g(this.pAxis,0,c,n,5)}},{key:"updateIndicators",value:function(){this.renderIndicatorCategoryAxis(this.valueScaleInverted),this.renderIndicatorPoints()}},{key:"updateExistingGraphics",value:function(){this.updateScales(),this.updateIndicators()}},{key:"drawTile",value:function(t,i){var e=this;if(t.graphics.clear(),t.tileData.length&&!this.options.stratification.axisNoGroupColor){var o=0,a=0;this.groupSizes.forEach((function(i,r){a+=e.categoryHeightScale(i),t.graphics.beginFill(e.groupToColor.get(r)[1]),t.graphics.drawRect(0,o,e.dimensions[0],Math.abs(a-o)),o=a})),t.graphics.endFill()}}},{key:"getMouseOverHtml",value:function(t,i){var e=this;if(!this.tilesetInfo)return"";var o=this.calculateZoomLevel(),a=n.calculateTileWidth(this.tilesetInfo,o,this.tilesetInfo.tile_size),r=this.tileToLocalId([o,Math.floor(this._xScale.invert(t)/a)]),s=this.fetchedTiles[r];if(!s)return"";var c,h=this.yToCategory.get(Math.floor(this.categoryHeightScale.invert(i))),u=this._xScale.invert(t-1),d=this._xScale.invert(t+1);if(s.intervalTree.queryInterval(u,d,(function(t){var i=s.tileData[t[2]];return e.getCategory(i)===h&&(c=i,!0)})),c){var p=this.groupToColor.get(this.categoryToGroup.get(h)),m=Object(l.a)(p,2),f=m[0],v=m[1],g="#".concat(f.toString(16)),_="#".concat(v.toString(16)),y=this.getImportance(c).toFixed(2);return'<div style="margin: 0 -0.25rem; padding: 0 0.25rem; background: '.concat(_,'"><strong style="color: ').concat(g,';">').concat(h,":</strong> ").concat(y,"</div>")}return""}},{key:"setPosition",value:function(t){Object(M.a)(Object(w.a)(r.prototype),"setPosition",this).call(this,t);var i=Object(l.a)(this.position,2);this.pMain.position.x=i[0],this.pMain.position.y=i[1]}},{key:"zoomed",value:function(t,i){this.xScale(t),this.yScale(i),this.indicatorPointGraphics&&q(this.indicatorPointGraphics,t,this.drawnAtScale),this.refreshTiles(),this.draw()}},{key:"exportSVG",value:function(){var t=this,i=null,e=null,o=Object(M.a)(Object(w.a)(r.prototype),"superSVG",this).call(this),a=Object(l.a)(o,2);e=a[0],i=a[1],e.setAttribute("class","exported-arcs-track");var n=document.createElement("g");return i.appendChild(n),n.setAttribute("transform","translate(".concat(this.position[0],",").concat(this.position[1],")")),this.visibleAndFetchedTiles().forEach((function(i){t.polys=[],t.drawTile(i,!0);var e,o=Object(x.a)(t.polys);try{for(o.s();!(e=o.n()).done;){var a=e.value,r=a.polyStr,s=a.opacity,l=document.createElement("path");l.setAttribute("fill","transparent"),l.setAttribute("opacity",s),l.setAttribute("d",r),n.appendChild(l)}}catch(c){o.e(c)}finally{o.f()}})),[e,i]}}]),r}(i.tracks.HorizontalLine1DPixiTrack),h=arguments.length,u=new Array(h>1?h-1:0),d=1;d<h;d++)u[d-1]=arguments[d];return Object(S.a)(c,u)};Z.config={type:"bed-matrix",datatype:["arcs","bedlike"],orientation:"1d",name:"Arcs1D",thumbnail:(new DOMParser).parseFromString('<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M4 2.1L.5 3.5v12l5-2 5 2 5-2v-12l-5 2-3.17-1.268" fill="none" stroke="currentColor"/><path d="M10.5 3.5v12" fill="none" stroke="currentColor" stroke-opacity=".33" stroke-dasharray="1,2,0,0"/><path d="M5.5 13.5V6" fill="none" stroke="currentColor" stroke-opacity=".33" stroke-width=".9969299999999999" stroke-dasharray="1.71,3.43,0,0"/><path d="M9.03 5l.053.003.054.006.054.008.054.012.052.015.052.017.05.02.05.024 4 2 .048.026.048.03.046.03.044.034.042.037.04.04.037.04.036.042.032.045.03.047.028.048.025.05.022.05.02.053.016.053.014.055.01.055.007.055.005.055v.056l-.002.056-.005.055-.008.055-.01.055-.015.054-.017.054-.02.052-.023.05-.026.05-.028.048-.03.046-.035.044-.035.043-.038.04-4 4-.04.037-.04.036-.044.032-.045.03-.046.03-.048.024-.05.023-.05.02-.052.016-.052.015-.053.012-.054.01-.054.005-.055.003H8.97l-.053-.003-.054-.006-.054-.008-.054-.012-.052-.015-.052-.017-.05-.02-.05-.024-4-2-.048-.026-.048-.03-.046-.03-.044-.034-.042-.037-.04-.04-.037-.04-.036-.042-.032-.045-.03-.047-.028-.048-.025-.05-.022-.05-.02-.053-.016-.053-.014-.055-.01-.055-.007-.055L4 10.05v-.056l.002-.056.005-.055.008-.055.01-.055.015-.054.017-.054.02-.052.023-.05.026-.05.028-.048.03-.046.035-.044.035-.043.038-.04 4-4 .04-.037.04-.036.044-.032.045-.03.046-.03.048-.024.05-.023.05-.02.052-.016.052-.015.053-.012.054-.01.054-.005L8.976 5h.054zM5 10l4 2 4-4-4-2-4 4z" fill="currentColor"/><path d="M7.124 0C7.884 0 8.5.616 8.5 1.376v3.748c0 .76-.616 1.376-1.376 1.376H3.876c-.76 0-1.376-.616-1.376-1.376V1.376C2.5.616 3.116 0 3.876 0h3.248zm.56 5.295L5.965 1H5.05L3.375 5.295h.92l.354-.976h1.716l.375.975h.945zm-1.596-1.7l-.592-1.593-.58 1.594h1.172z" fill="currentColor"/></svg>',"text/xml").documentElement,availableOptions:["arcStyle","flip1D","labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor"],defaultOptions:{arcStyle:"ellipse",flip1D:"no",labelColor:"black",labelPosition:"hidden",trackBorderWidth:0,trackBorderColor:"black"},optionsInfo:{arcStyle:{name:"Arc Style",inlineOptions:{circle:{name:"Circle",value:"circle"},ellipse:{name:"Ellipse",value:"ellipse"}}}}};var $=Z,tt="\n  precision mediump float;\n  attribute vec2 aPosition;\n  attribute float aOpacity;\n  attribute float aFocused;\n\n  uniform mat3 projectionMatrix;\n  uniform mat3 translationMatrix;\n  uniform float uPointSize;\n  uniform vec4 uColor;\n  uniform vec4 uColorFocused;\n\n  varying vec4 vColor;\n  varying vec4 vColorFocused;\n  varying float vOpacity;\n  varying float vFocused;\n\n  void main(void)\n  {\n    vColor = uColor;\n    vColorFocused = uColorFocused;\n    vOpacity = aOpacity;\n    vFocused = aFocused;\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aPosition, 1.0)).xy, 0.0, 1.0);\n    gl_PointSize = uPointSize;\n  }\n",it="\n  #ifdef GL_OES_standard_derivatives\n  #extension GL_OES_standard_derivatives : enable\n  #endif\n\n  precision mediump float;\n\n  varying vec4 vColor;\n  varying vec4 vColorFocused;\n  varying float vOpacity;\n  varying float vFocused;\n\n  void main() {\n    float r = 0.0, delta = 0.0, alpha = 1.0;\n    vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n    r = dot(cxy, cxy);\n\n    #ifdef GL_OES_standard_derivatives\n      delta = fwidth(r);\n      alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n    #endif\n\n    gl_FragColor = vec4(vColor.rgb, alpha * vColor.a);\n  }\n",et="\n  precision mediump float;\n  varying vec4 vColor;\n  varying vec4 vColorFocused;\n  varying float vOpacity;\n  varying float vFocused;\n\n  void main() {\n    float isNotFocused = 1.0 - vFocused;\n\n    float r = vColor.r * isNotFocused + vColorFocused.r * vFocused;\n    float g = vColor.g * isNotFocused + vColorFocused.g * vFocused;\n    float b = vColor.b * isNotFocused + vColorFocused.b * vFocused;\n\n    gl_FragColor = vec4(r, g, b, 1.0) * vOpacity;\n  }\n",ot=["#c76526","#dca237","#eee462","#469b76","#3170ad","#6fb2e4","#000000","#999999"],at=["#a65420","#b7872e","#9f9841","#3a8162","#295d90","#4a7798","#000000","#666666"],rt=["#f6e5db","#f9f0de","#fcfbe5","#e0eee8","#dde7f1","#e7f2fb","#d5d5d5","#ffffff"],nt=function(t){return t.tileData.length&&void 0!==t.tileData[0].yStart},st=function(t){return t.xEnd-t.xStart},lt=function(t){return Math.abs(t.xStart+(t.xEnd-t.xStart)/2-(t.yStart+(t.yEnd-t.yStart)/2))},ct=function(t){return t.xStart},ht=function(t){return t.xStart+(t.xEnd-t.xStart)/2},ut=function(t){return t.xEnd},dt=function(t){return t.yStart+(t.yEnd-t.yStart)/2},pt=function(t){return Object.values(t).reduce((function(t,i){return Math.max(t,i.tileData.reduce((function(t,i){return Math.max(t,i.width)}),0))}),0)},mt=function(t,i,e){var o=(e.domain()[1]-e.domain()[0])/(i.domain()[1]-i.domain()[0]),a=i.domain().map(e)[0];t.scale.x=o,t.position.x=-a*o},ft=function t(i){if(!(this instanceof t?this.constructor:void 0))throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');for(var e=i.libraries.PIXI,o=i.libraries.d3Scale,a=o.scaleLinear,r=o.scaleLog,n=r().domain([1,10]).range([.1,1]).clamp(!0),s=function(t){Object(F.a)(r,t);var o=Object(D.a)(r);function r(t,i){var e;return Object(O.a)(this,r),(e=o.call(this,t,i)).updateOptions(),e}return Object(T.a)(r,[{key:"initTile",value:function(t){var i=nt(t),e=i?lt:st,o=i?ht:ct,a=i?dt:ut;t.tileData.forEach((function(t){t.width=e(t),t.start=o(t),t.end=a(t),t.isLeftToRight=t.start<t.end}))}},{key:"updateTileWidthHistogram",value:function(t){var i=Math.max(this.dimensions[1]/this.pointSize),e=this.maxWidth/i,o=0;t.widthHistogramLeft=new Uint32Array(i),t.widthHistogramRight=new Uint32Array(i),t.tileData.forEach((function(i){var a=Math.round(i.width/e);i.histPos=i.isLeftToRight?t.widthHistogramRight[a]++:t.widthHistogramLeft[a]++,o=o>i.histPos?o:i.histPos})),t.widthHistogramMax=o}},{key:"updateWidthHistograms",value:function(){Object.values(this.fetchedTiles).forEach(this.updateTileWidthHistogram.bind(this))}},{key:"updateStratificationOption",value:function(){var t=this;if(!this.options.stratification)return this.categoryField=void 0,this.categoryToGroup=void 0,this.groupToColor=void 0,this.numGroups=0,this.numCategories=0,void(this.groupLabels=[]);this.categoryField=this.options.stratification.categoryField,this.categoryToGroup=new Map,this.categoryToY=new Map,this.groupToColor=new Map,this.numGroups=this.options.stratification.groups.length,this.groupSizes=this.options.stratification.groups.map((function(t){return t.categories.length})),this.numCategories=this.groupSizes.reduce((function(t,i){return t+i}),0),this.groupLabels=this.options.stratification.groups.map((function(t,i){return t.label||"Group ".concat(i)}));var o=0;this.options.stratification.groups.forEach((function(e,a){t.groupToColor.set(a,[i.utils.colorToHex(e.color||ot[a%ot.length]),i.utils.colorToHex(e.backgroundColor||rt[a%ot.length])]),e.categories.forEach((function(i,e){t.categoryToGroup.set(i.toLowerCase(),a),t.categoryToY.set(i.toLowerCase(),o+e)})),o+=e.categories.length})),this.groupLabelsPixiText=this.groupLabels.map((function(o,a){return new e.Text(o,{fontSize:t.labelSize,align:"right"===t.axisAlign?"right":"left",fill:i.utils.colorToHex(t.options.stratification.groups[a].axisLabelColor||at[a%at.length])})}))}},{key:"updateOptions",value:function(){var t=this;this.axisAlign=this.options.axisAlign||"left",this.labelColor=i.utils.colorToHex(this.options.labelColor||"black"),this.labelSize=this.options.labelSize||12,this.markColor=i.utils.colorToHex(this.options.markColor||"black"),this.markColorRgbNorm=this.options.markColor?i.utils.colorToRgba(this.options.markColor).slice(0,3).map((function(t){return Math.min(1,Math.max(0,t/255))})):[0,0,0],this.markOpacity=Number.isNaN(+this.options.markOpacity)?1:Math.min(1,Math.max(0,+this.options.markOpacity)),this.markSize=this.options.markSize||2,this.markColorFocus=i.utils.colorToHex(this.options.markColorFocus||"red"),this.markColorFocusRgbNorm=this.options.markColorFocus?i.utils.colorToRgba(this.options.markColorFocus).slice(0,3).map((function(t){return Math.min(1,Math.max(0,t/255))})):[1,0,0],this.markOpacityFocus=Number.isNaN(+this.options.markOpacityFocus)?this.markOpacity:Math.min(1,Math.max(0,+this.options.markOpacityFocus)),this.markSizeFocus=this.options.markSizeFocus||this.markSize,this.strokeColor=this.markColor||i.utils.colorToHex(this.options.strokeColor||"black"),this.strokeWidth=this.options.strokeWidth||this.markSize,this.getImportance=this.options.importanceField?function(i){return+i.fields[t.options.importanceField]}:function(t){return t.width};var e=this.options.importanceDomain||[1e3,1],o=a().domain(e).range([1,10]);this.opacityScale=function(t){return n(o(t))},this.focusRegion=this.options.focusRegion?this.options.focusRegion:[1/0,1/0],this.focusGene=this.options.focusGene?this.options.focusGene.toLowerCase():void 0,this.getGene=this.options.geneField?function(i){return i.fields[t.options.geneField].toLowerCase()}:void 0,this.minImportance=this.options.minImportance||0,this.updateStratificationOption(),this.updateWidthHistograms()}},{key:"rerender",value:function(t){this.options=t,this.updateOptions(),this.updateExistingGraphics()}},{key:"updateScales",value:function(){if(Object.values(this.fetchedTiles).length){var t=Object(l.a)(this.dimensions,2)[1],i=this.markSize/2;this.maxWidth=pt(this.fetchedTiles),this.heightScale=a().domain([0,this.maxWidth]).range([Math.min(12,t/10),t]),this.fullHeightScale=a().domain([this.maxWidth,0]).range([Math.min(i,t/10),Math.max(t-i,9*t/10)]),this.fullHeightScaleInverted=a().domain([0,this.maxWidth]).range([Math.min(i,t/10),Math.max(t-i,9*t/10)]),this.incomingHeightScale=a().domain([0,this.maxWidth]).range([t/2,t]),this.outgoingHeightScale=a().domain([0,this.maxWidth]).range([t/2,0]),this.categoryHeightScale=a().domain([0,this.numCategories]).range([0,this.numCategories*this.markSize]),this.valueScale=a().domain([0,this.maxWidth]).range([t,0]),this.valueScaleInverted=a().domain([0,this.maxWidth]).range([0,t])}}},{key:"itemToIndicatorDiverging",value:function(t){return{startX:this._xScale(t.start),endX:this._xScale(t.end),startY:this.outgoingHeightScale(t.width),endY:this.incomingHeightScale(t.width),opacity:this.opacityScale(this.getImportance(t)),size:this.markSize}}},{key:"itemToIndicatorStart",value:function(t){return{x:this._xScale(t.start),y:this.fullHeightScale(t.width),opacity:this.opacityScale(this.getImportance(t)),size:this.markSize}}},{key:"itemToIndicatorEnd",value:function(t){return{x:this._xScale(t.end),y:this.fullHeightScaleInverted(t.width),opacity:this.opacityScale(this.getImportance(t)),size:this.markSize}}},{key:"itemToIndicatorCategory",value:function(t){return{cX:this._xScale(t.start),cY:this.categoryHeightScale(this.categoryToY.get(t.fields[this.categoryField].toLowerCase())),wHalf:Math.max(this.markSize/2,Math.abs(this._xScale(t.xStart)-this._xScale(t.xEnd))/2),opacity:this.opacityScale(this.getImportance(t)),focused:t.xStart<=this.focusRegion[1]&&t.xEnd>=this.focusRegion[0],size:this.markSize,sizeHalf:this.markSize/2}}},{key:"itemToIndicatorReducer",value:function(t){var i=this;return this.getGene&&this.focusGene?function(e,o){return i.getGene(o)===i.focusGene&&e.push(t(o)),e}:function(i,e){return i.push(t(e)),i}}},{key:"renderIndicatorPoints",value:function(t,i,o,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=n.vertexShader,l=void 0===s?tt:s,c=n.fragmentShader,h=void 0===c?it:c,u=n.drawTriangles,d=void 0!==u&&u;this.drawnAtScale=a().domain(Object(E.a)(this.xScale().domain())).range(Object(E.a)(this.xScale().range()));var p=Object.values(this.fetchedTiles).flatMap((function(i){return i.tileData.reduce(t,[])})),m=new Float32Array(p.flatMap(i)),f=new Float32Array(p.flatMap(o)),v=new Float32Array(p.flatMap(r)),g=new e.UniformGroup({uPointSize:this.markSize,uColor:[].concat(Object(E.a)(this.markColorRgbNorm),[this.markOpacity]),uColorFocused:[].concat(Object(E.a)(this.markColorFocusRgbNorm),[this.markOpacity])}),_=e.Shader.from(l,h,g),y=new e.Geometry;y.addAttribute("aPosition",m,2),y.addAttribute("aOpacity",f,1),y.addAttribute("aFocused",v,1);var b=new e.Mesh(y,_,new e.State,d?e.DRAW_MODES.TRIANGLES:e.DRAW_MODES.POINTS),C=new e.Graphics;C.addChild(b),this.pMain.x=this.position[0],this.indicatorPointGraphics&&this.pMain.removeChild(this.indicatorPointGraphics),this.pMain.addChild(C),this.indicatorPointGraphics=C,mt(this.indicatorPointGraphics,this._xScale,this.drawnAtScale),this.draw(),this.animate()}},{key:"renderIndicatorDistanceAxis",value:function(t){this.drawAxis(t)}},{key:"renderIndicatorCategoryAxis",value:function(){var t=this,i=Object(l.a)(this.dimensions,1)[0],e=Object(l.a)(this.position,2),o=e[0],a=e[1];this.pAxis.position.x="right"===this.axisAlign?o+i:o,this.pAxis.position.y=a,this.pAxis.clear();var r=0,n=0,s="right"===this.axisAlign?-5:5,c="right"===this.axisAlign?-i:i,h="right"===this.axisAlign?-3:3,u=this.pAxis.children.length;this.pAxis.lineStyle(1,0,1,0),this.groupLabelsPixiText.forEach((function(i,e){var o=t.categoryHeightScale(t.groupSizes[e]);n+=o,i.x=h,i.y=r+o/2,i.anchor.x="right"===t.axisAlign?1:0,i.anchor.y=.5,u<e+1&&t.pAxis.addChild(i),t.pAxis.moveTo(0,r),t.pAxis.lineTo(s,r),t.options.stratification.axisShowGroupSeparator&&g(t.pAxis,0,c,r,5),r=n})),this.pAxis.moveTo(0,0),this.pAxis.lineTo(0,n),this.pAxis.lineTo(s,n),this.options.stratification.axisShowGroupSeparator&&g(this.pAxis,0,c,n,5)}},{key:"updateIndicators",value:function(){var t=this.itemToIndicatorDiverging.bind(this),i=function(t){return[t.startX,t.startY,t.endX,t.endY]},e=function(t){return t.opacity},o=function(t){return t.focused},a=it,r=!1;"category"===this.options.indicatorStyle?(t=this.itemToIndicatorCategory.bind(this),i=function(t){return[t.cX,t.cY]},a=et,this.renderIndicatorCategoryAxis(this.valueScaleInverted)):"category-rect"===this.options.indicatorStyle?(t=this.itemToIndicatorCategory.bind(this),i=function(t){return[t.cX-t.wHalf,t.cY,t.cX+t.wHalf,t.cY,t.cX+t.wHalf,t.cY+t.size,t.cX+t.wHalf,t.cY+t.size,t.cX-t.wHalf,t.cY+t.size,t.cX-t.wHalf,t.cY]},e=function(t){return[t.opacity,t.opacity,t.opacity,t.opacity,t.opacity,t.opacity]},o=function(t){return[t.focused,t.focused,t.focused,t.focused,t.focused,t.focused]},a=et,r=!0,this.renderIndicatorCategoryAxis(this.valueScaleInverted)):"start-only"===this.options.indicatorStyle?(t=this.itemToIndicatorStart.bind(this),i=function(t){return[t.x,t.y]},this.renderIndicatorDistanceAxis(this.valueScale)):"end-only"===this.options.indicatorStyle&&(t=this.itemToIndicatorEnd.bind(this),i=function(t){return[t.x,t.y]},this.renderIndicatorDistanceAxis(this.valueScaleInverted)),t=this.itemToIndicatorReducer(t),this.renderIndicatorPoints(t,i,e,o,{fragmentShader:a,drawTriangles:r})}},{key:"updateExistingGraphics",value:function(){this.updateScales(),this.updateWidthHistograms(),"indicator"===this.options.arcStyle&&this.updateIndicators()}},{key:"drawTile",value:function(t,i){var e=this;if(t.graphics.clear(),t.tileData.length){if("indicator"===this.options.arcStyle){var o=Object(l.a)(this.dimensions,2),a=o[0],r=o[1];if(this.options.indicatorStyle.startsWith("category")){if(!this.options.stratification.axisNoGroupColor){var n=0,s=0;this.groupSizes.forEach((function(i,o){s+=e.categoryHeightScale(i),t.graphics.beginFill(e.groupToColor.get(o)[1]),t.graphics.drawRect(0,n,a,Math.abs(s-n)),n=s})),t.graphics.endFill()}}else{var c=Math.round(r/2)-.5;"start-only"===this.options.indicatorStyle?c=r-.5:"end-only"===this.options.indicatorStyle&&(c=.5),t.graphics.lineStyle(1,0,.2),t.graphics.moveTo(0,c),t.graphics.lineTo(a,c)}}for(var h=0;h<t.tileData.length;h++){var u=t.tileData[h];"circle"===this.options.arcStyle?this.drawCircle(t.graphics,u,i):"indicator"===this.options.arcStyle||this.drawEllipse(t.graphics,u,i)}}}},{key:"drawIndicator",value:function(t,i){var e=this._xScale(i.start),o=this._xScale(i.end),a=this.outgoingHeightScale(i.width),r=this.incomingHeightScale(i.width),n=this.opacityScale(this.getImportance(i));t.lineStyle(0,0,0),t.beginFill(4033753,n),t.drawCircle(e,a,this.pointSize),t.endFill(),t.beginFill(12680613,n),t.drawCircle(o,r,this.pointSize),t.endFill(),i.start<=this.focusRegion[1]&&i.end>=this.focusRegion[0]&&(i.start>=this.focusRegion[0]||i.end<=this.focusRegion[1])&&(t.lineStyle(this.pointSize,12680613,n),t.moveTo(e,r),t.lineTo(o,r),t.endFill())}},{key:"drawCircle",value:function(t,i,e,o){var r=this._xScale(i.start),n=this._xScale(i.end),s=Object(l.a)(this.dimensions,2),c=s[0],h=s[1],u=Object(l.a)(this.position,2)[1],d=(n-r)/2,p=(n-r)/2,m=(p*p+d*d)/(2*d),f=(r+n)/2,v=h-d+m,g="";o&&(g+="M".concat(r,",").concat(u+h)),t.moveTo(r,u+h);var _=Math.max(0,r),y=Math.min(c,n),b=this.markColor,C=this.markSize,k=this.markOpacity;i.start<=this.focusRegion[1]&&i.end>=this.focusRegion[0]&&(i.start>=this.focusRegion[0]||i.end<=this.focusRegion[1])&&(b=this.markColorFocus,C=this.markSizeFocus,k=this.markOpacityFocus),t.lineStyle(C,b,k);var S=Math.acos(Math.min(Math.max(-(_-f)/m,-1),1)),x=Math.acos(Math.min(Math.max(-(y-f)/m,-1),1));this.options.flip&&(v=0,x=-Math.PI,t.moveTo(r,0),o&&(g+="M".concat(r,",0")));for(var E=a().domain([0,9]).range([S,x]),O=0;O<10;O++){var T=f-m*Math.cos(E(O)),M=v-m*Math.sin(E(O));t.lineTo(T,M),o&&(g+="L".concat(T,",").concat(M))}o&&this.polys.push({polyStr:g,opacity:k})}},{key:"drawEllipse",value:function(t,i,e,o,r){var n=this._xScale(i.start),s=this._xScale(i.end),c=Object(l.a)(this.dimensions,2)[1],h=this.heightScale(i.width),u=s-n,d=u/2,p=(n+s)/2,m=c,f=Math.PI,v="";r&&(v+="M".concat(n,",").concat(c)),t.moveTo(n,c),this.options.flip&&(m=0,f=-Math.PI,t.moveTo(n,0),r&&(v+="M".concat(n,",0")));var g=this.markColor,_=this.markSize,y=this.markOpacity;i.start<=this.focusRegion[1]&&i.end>=this.focusRegion[0]&&(i.start>=this.focusRegion[0]||i.end<=this.focusRegion[1])&&(g=this.markColorFocus,_=this.markSizeFocus,y=this.markOpacityFocus),t.lineStyle(_,g,y);for(var b=10*Math.round(Math.abs(u)/200),C=a().domain([0,b-1]).range([0,f]),k=0;k<b;k++){var S=p-d*Math.cos(C(k)),x=m-h*Math.sin(C(k));t.lineTo(S,x),r&&(v+="L".concat(S,",").concat(x))}r&&this.polys.push({polyStr:v,opacity:y})}},{key:"getMouseOverHtml",value:function(){}},{key:"setPosition",value:function(t){Object(M.a)(Object(w.a)(r.prototype),"setPosition",this).call(this,t);var i=Object(l.a)(this.position,2);this.pMain.position.x=i[0],this.pMain.position.y=i[1]}},{key:"zoomed",value:function(t,i){this.xScale(t),this.yScale(i),this.indicatorPointGraphics&&mt(this.indicatorPointGraphics,t,this.drawnAtScale),this.refreshTiles(),this.draw()}},{key:"exportSVG",value:function(){var t=this,i=null,e=null,o=Object(M.a)(Object(w.a)(r.prototype),"superSVG",this).call(this),a=Object(l.a)(o,2);e=a[0],i=a[1],e.setAttribute("class","exported-arcs-track");var n=document.createElement("g");i.appendChild(n),n.setAttribute("transform","translate(".concat(this.position[0],",").concat(this.position[1],")"));var s=this.options.strokeColor?this.options.strokeColor:"blue",c=this.options.strokeWidth?this.options.strokeWidth:2;return this.visibleAndFetchedTiles().forEach((function(i){t.polys=[],t.drawTile(i,!0);var e,o=Object(x.a)(t.polys);try{for(o.s();!(e=o.n()).done;){var a=e.value,r=a.polyStr,l=a.opacity,h=document.createElement("path");h.setAttribute("fill","transparent"),h.setAttribute("stroke",s),h.setAttribute("stroke-width",c),h.setAttribute("opacity",l),h.setAttribute("d",r),n.appendChild(h)}}catch(u){o.e(u)}finally{o.f()}})),[e,i]}}]),r}(i.tracks.HorizontalLine1DPixiTrack),c=arguments.length,h=new Array(c>1?c-1:0),u=1;u<c;u++)h[u-1]=arguments[u];return Object(S.a)(s,h)};ft.config={type:"1d-arcs",datatype:["arcs","bedlike"],orientation:"1d",name:"Arcs1D",thumbnail:(new DOMParser).parseFromString('<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M4 2.1L.5 3.5v12l5-2 5 2 5-2v-12l-5 2-3.17-1.268" fill="none" stroke="currentColor"/><path d="M10.5 3.5v12" fill="none" stroke="currentColor" stroke-opacity=".33" stroke-dasharray="1,2,0,0"/><path d="M5.5 13.5V6" fill="none" stroke="currentColor" stroke-opacity=".33" stroke-width=".9969299999999999" stroke-dasharray="1.71,3.43,0,0"/><path d="M9.03 5l.053.003.054.006.054.008.054.012.052.015.052.017.05.02.05.024 4 2 .048.026.048.03.046.03.044.034.042.037.04.04.037.04.036.042.032.045.03.047.028.048.025.05.022.05.02.053.016.053.014.055.01.055.007.055.005.055v.056l-.002.056-.005.055-.008.055-.01.055-.015.054-.017.054-.02.052-.023.05-.026.05-.028.048-.03.046-.035.044-.035.043-.038.04-4 4-.04.037-.04.036-.044.032-.045.03-.046.03-.048.024-.05.023-.05.02-.052.016-.052.015-.053.012-.054.01-.054.005-.055.003H8.97l-.053-.003-.054-.006-.054-.008-.054-.012-.052-.015-.052-.017-.05-.02-.05-.024-4-2-.048-.026-.048-.03-.046-.03-.044-.034-.042-.037-.04-.04-.037-.04-.036-.042-.032-.045-.03-.047-.028-.048-.025-.05-.022-.05-.02-.053-.016-.053-.014-.055-.01-.055-.007-.055L4 10.05v-.056l.002-.056.005-.055.008-.055.01-.055.015-.054.017-.054.02-.052.023-.05.026-.05.028-.048.03-.046.035-.044.035-.043.038-.04 4-4 .04-.037.04-.036.044-.032.045-.03.046-.03.048-.024.05-.023.05-.02.052-.016.052-.015.053-.012.054-.01.054-.005L8.976 5h.054zM5 10l4 2 4-4-4-2-4 4z" fill="currentColor"/><path d="M7.124 0C7.884 0 8.5.616 8.5 1.376v3.748c0 .76-.616 1.376-1.376 1.376H3.876c-.76 0-1.376-.616-1.376-1.376V1.376C2.5.616 3.116 0 3.876 0h3.248zm.56 5.295L5.965 1H5.05L3.375 5.295h.92l.354-.976h1.716l.375.975h.945zm-1.596-1.7l-.592-1.593-.58 1.594h1.172z" fill="currentColor"/></svg>',"text/xml").documentElement,availableOptions:["arcStyle","flip1D","labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","strokeColor","strokeWidth","trackBorderWidth","trackBorderColor"],defaultOptions:{arcStyle:"ellipse",flip1D:"no",labelColor:"black",labelPosition:"hidden",strokeColor:"black",strokeWidth:1,trackBorderWidth:0,trackBorderColor:"black"},optionsInfo:{arcStyle:{name:"Arc Style",inlineOptions:{circle:{name:"Circle",value:"circle"},ellipse:{name:"Ellipse",value:"ellipse"}}}}};var vt=ft,gt=function t(i){if(!(this instanceof t?this.constructor:void 0))throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');for(var e=i.libraries.d3Array.range,o=i.libraries.d3Scale.scaleBand,a=i.services.tileProxy,r=i.utils.colorToHex,n=function(t){Object(F.a)(n,t);var i=Object(D.a)(n);function n(){return Object(O.a)(this,n),i.apply(this,arguments)}return Object(T.a)(n,[{key:"setValueScale",value:function(){if(this.valueScale=null,this.options&&this.options.valueColumn){var t=this.options.colorEncodingRange?+this.options.colorEncodingRange[0]:this.minVisibleValueInTiles(+this.options.valueColumn),i=this.options.colorEncodingRange?+this.options.colorEncodingRange[1]:this.maxVisibleValueInTiles(+this.options.valueColumn);if(this.options.valueColumn){var e=this.makeValueScale(t,this.calculateMedianVisibleValue(+this.options.valueColumn),i,2),o=Object(l.a)(e,1);this.valueScale=o[0]}}}},{key:"finalDotYPos",value:function(t,i){return Math.max(i,Math.min(this.dimensions[1]-i,t))}},{key:"drawPoly",value:function(t,i,e,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=[i,o,e,o,e,this.dimensions[1],i,this.dimensions[1]],n=Math.max(2,e-i),s=n*(1+2*a);return t.rectGraphics.drawCircle(i,this.finalDotYPos(o,n),s),r}},{key:"renderRows",value:function(t,i,a,n,s,l){var c=this,h=+t.tileId.split(".")[0];this.initialize();for(var u=o().domain(e(a)).range([n,s]).paddingInner(0),d=this.options.focusRegion||[1/0,1/0],p=[],m=[],f=0;f<i.length;f++){for(var v=0;v<i[f].length;v++){var g=i[f][v].value,_=g.fields,y=+g.chrOffset,b=+_[1]+y,C=+_[2]+y,k=u(f)+u.step()/2;this.valueScale&&(k=this.valueScale(+_[+this.options.valueColumn-1]));var S=k,x=this._xScale(b),E=this._xScale(C);if(!(h in this.drawnRects)||!(g.uid in this.drawnRects[h])){this.drawnRects[h]||(this.drawnRects[h]={});var O=[x,E,S,g,b,C];b<=d[1]&&C>=d[0]?m.push(O):p.push(O)}}t.rectGraphics.lineStyle(0),t.rectGraphics.beginFill(16777215),p.forEach((function(i){c.drawPoly(t,i[0],i[1],i[2],!0)}));var T=this.options.markColor||"black",M=this.options.fillOpacity||.3;t.rectGraphics.lineStyle(1,r(T),M),t.rectGraphics.beginFill(r(T),M),p.forEach((function(i){var e=c.drawPoly(t,i[0],i[1],i[2]);c.drawnRects[h][i[4].uid]=[e,{start:i[4],end:i[5],value:i[3],tile:t,fill:l},t.tileId]})),T=this.options.markColorFocus||"red",M=this.options.markOpacityFocus||.6,t.rectGraphics.lineStyle(1,r(T),M),t.rectGraphics.beginFill(r(T),M),m.forEach((function(i){var e=c.drawPoly(t,i[0],i[1],i[2]);c.drawnRects[h][i[4].uid]=[e,{start:i[4],end:i[5],value:i[3],tile:t,fill:l},t.tileId]})),t.rectGraphics.endFill()}t.rectGraphics.interactive=!0,t.rectGraphics.buttonMode=!0,t.rectGraphics.mouseup=function(t){c.hoveringSnp&&c.pubSub.publish("app.click",{type:"snp",event:t,payload:c.hoveringSnp})}}},{key:"getMouseOverHtml",value:function(t,i){var e=this;if(this.hoveringSnp=void 0,!this.tilesetInfo&&!this.options.toolTip)return"";var o=this.calculateZoomLevel(),r=a.calculateTileWidth(this.tilesetInfo,o,this.tilesetInfo.tile_size),n=this._xScale.invert(t)/r,s=Math.floor(n),l=this.tileToLocalId([o,s]),c=this.fetchedTiles[l];if(!c)return"";var h=3;if(c.tileData.forEach((function(i){var o=Math.abs(e._xScale(i.xStart)-t);o<h&&(e.hoveringSnp=i,h=o)})),!this.hoveringSnp)return"";var u=this.finalDotYPos(this.valueScale(this.hoveringSnp.importance),2);if(Math.abs(u-(i-1))>6)return"";var d=this.hoveringSnp.fields[this.options.toolTip.name.field],p=(+this.hoveringSnp.fields[this.options.toolTip.value.field]).toFixed(this.options.toolTip.value.numDecimals||2),m="";return this.options.toolTip.other&&(this.options.toolTip.other.forEach((function(t){var i=t.label||"",o=(+e.hoveringSnp.fields[t.field]).toFixed(t.numDecimals||2);m+="".concat(i,": ").concat(o,";")})),m=" (".concat(m.substr(0,m.length-1),")")),"<div><strong>".concat(d,":</strong> ").concat(p).concat(m,"</div>")}},{key:"exportSVG",value:function(){var t=this,i=null,e=null,o=Object(M.a)(Object(w.a)(n.prototype),"superSVG",this).call(this),a=Object(l.a)(o,2);e=a[0],i=a[1],e.setAttribute("class","exported-arcs-track");var r=document.createElement("g");i.appendChild(r),r.setAttribute("transform","translate(".concat(this.position[0],",").concat(this.position[1],")"));var s=this.options.strokeColor?this.options.strokeColor:"blue",c=this.options.strokeWidth?this.options.strokeWidth:2;return this.visibleAndFetchedTiles().forEach((function(i){t.polys=[],t.drawTile(i,!0);var e,o=Object(x.a)(t.polys);try{for(o.s();!(e=o.n()).done;){var a=e.value,n=a.polyStr,l=a.opacity,h=document.createElement("path");h.setAttribute("fill","transparent"),h.setAttribute("stroke",s),h.setAttribute("stroke-width",c),h.setAttribute("opacity",l),h.setAttribute("d",n),r.appendChild(h)}}catch(u){o.e(u)}finally{o.f()}})),[e,i]}}]),n}(i.tracks.BedLikeTrack),s=arguments.length,c=new Array(s>1?s-1:0),h=1;h<s;h++)c[h-1]=arguments[h];return Object(S.a)(n,c)};gt.config={type:"point-annotation",datatype:["arcs","bedlike"],orientation:"1d",name:"Arcs1D",thumbnail:(new DOMParser).parseFromString('<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M4 2.1L.5 3.5v12l5-2 5 2 5-2v-12l-5 2-3.17-1.268" fill="none" stroke="currentColor"/><path d="M10.5 3.5v12" fill="none" stroke="currentColor" stroke-opacity=".33" stroke-dasharray="1,2,0,0"/><path d="M5.5 13.5V6" fill="none" stroke="currentColor" stroke-opacity=".33" stroke-width=".9969299999999999" stroke-dasharray="1.71,3.43,0,0"/><path d="M9.03 5l.053.003.054.006.054.008.054.012.052.015.052.017.05.02.05.024 4 2 .048.026.048.03.046.03.044.034.042.037.04.04.037.04.036.042.032.045.03.047.028.048.025.05.022.05.02.053.016.053.014.055.01.055.007.055.005.055v.056l-.002.056-.005.055-.008.055-.01.055-.015.054-.017.054-.02.052-.023.05-.026.05-.028.048-.03.046-.035.044-.035.043-.038.04-4 4-.04.037-.04.036-.044.032-.045.03-.046.03-.048.024-.05.023-.05.02-.052.016-.052.015-.053.012-.054.01-.054.005-.055.003H8.97l-.053-.003-.054-.006-.054-.008-.054-.012-.052-.015-.052-.017-.05-.02-.05-.024-4-2-.048-.026-.048-.03-.046-.03-.044-.034-.042-.037-.04-.04-.037-.04-.036-.042-.032-.045-.03-.047-.028-.048-.025-.05-.022-.05-.02-.053-.016-.053-.014-.055-.01-.055-.007-.055L4 10.05v-.056l.002-.056.005-.055.008-.055.01-.055.015-.054.017-.054.02-.052.023-.05.026-.05.028-.048.03-.046.035-.044.035-.043.038-.04 4-4 .04-.037.04-.036.044-.032.045-.03.046-.03.048-.024.05-.023.05-.02.052-.016.052-.015.053-.012.054-.01.054-.005L8.976 5h.054zM5 10l4 2 4-4-4-2-4 4z" fill="currentColor"/><path d="M7.124 0C7.884 0 8.5.616 8.5 1.376v3.748c0 .76-.616 1.376-1.376 1.376H3.876c-.76 0-1.376-.616-1.376-1.376V1.376C2.5.616 3.116 0 3.876 0h3.248zm.56 5.295L5.965 1H5.05L3.375 5.295h.92l.354-.976h1.716l.375.975h.945zm-1.596-1.7l-.592-1.593-.58 1.594h1.172z" fill="currentColor"/></svg>',"text/xml").documentElement,availableOptions:["arcStyle","flip1D","labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","strokeColor","strokeWidth","trackBorderWidth","trackBorderColor"],defaultOptions:{arcStyle:"ellipse",flip1D:"no",labelColor:"black",labelPosition:"hidden",strokeColor:"black",strokeWidth:1,trackBorderWidth:0,trackBorderColor:"black"},optionsInfo:{arcStyle:{name:"Arc Style",inlineOptions:{circle:{name:"Circle",value:"circle"},ellipse:{name:"Ellipse",value:"ellipse"}}}}};var _t=gt,yt="\nprecision mediump float;\nattribute vec2 aPosition;\nattribute float aColorIdx;\nattribute float aFocused;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform sampler2D uColorMapTex;\nuniform float uColorMapTexRes;\nuniform sampler2D uColorMapFocusTex;\nuniform float uColorMapFocusTexRes;\n\nvarying vec4 vColor;\nvarying vec4 vColorFocused;\nvarying float vFocused;\n\nvoid main(void)\n{\n  // Half a texel (i.e., pixel in texture coordinates)\n  float eps = 0.5 / uColorMapTexRes;\n  float colorRowIndex = floor((aColorIdx + eps) / uColorMapTexRes);\n  vec2 colorTexIndex = vec2(\n    (aColorIdx / uColorMapTexRes) - colorRowIndex + eps,\n    (colorRowIndex / uColorMapTexRes) + eps\n  );\n  vColor = texture2D(uColorMapTex, colorTexIndex);\n\n  float eps2 = 0.5 / uColorMapFocusTexRes;\n  float colorRowIndex2 = floor((aColorIdx + eps2) / uColorMapFocusTexRes);\n  vec2 colorTexIndex2 = vec2(\n    (aColorIdx / uColorMapFocusTexRes) - colorRowIndex2 + eps2,\n    (colorRowIndex2 / uColorMapFocusTexRes) + eps2\n  );\n  vColorFocused = texture2D(uColorMapFocusTex, colorTexIndex2);\n\n  vFocused = aFocused;\n\n  gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aPosition, 1.0)).xy, 0.0, 1.0);\n}\n",bt="\n  precision mediump float;\n\n  varying vec4 vColor;\n  varying vec4 vColorFocused;\n  varying float vFocused;\n\n  void main() {\n    float isNotFocused = 1.0 - vFocused;\n\n    float r = vColor.r * isNotFocused + vColorFocused.r * vFocused;\n    float g = vColor.g * isNotFocused + vColorFocused.g * vFocused;\n    float b = vColor.b * isNotFocused + vColorFocused.b * vFocused;\n\n    gl_FragColor = vec4(r, g, b, 1.0);\n  }\n",Ct=["#c76526","#dca237","#eee462","#469b76","#3170ad","#6fb2e4","#000000","#999999"],kt=["#a65420","#b7872e","#9f9841","#3a8162","#295d90","#4a7798","#000000","#666666"],St=["#f6e5db","#f9f0de","#fcfbe5","#e0eee8","#dde7f1","#e7f2fb","#d5d5d5","#ffffff"],xt=function(t){return t.tileData.length&&void 0!==t.tileData[0].yStart},Et=function(t){return t.xStart},Ot=function(t){return t.xStart+(t.xEnd-t.xStart)/2},Tt=function(t){return t.xEnd},Mt=function(t){return t.yStart+(t.yEnd-t.yStart)/2},wt=function(t){return t.reduce((function(t,i){return Math.max(t,i.histogramMax)}),0)},Ft=function(t,i,e){var o=(e.domain()[1]-e.domain()[0])/(i.domain()[1]-i.domain()[0]),a=i.domain().map(e)[0];t.scale.x=o,t.position.x=-a*o},Dt=function(t){return[t.xStart,t.yStart,t.xEnd,t.yStart,t.xEnd,t.yEnd,t.xStart,t.yStart,t.xStart,t.yEnd,t.xEnd,t.yEnd]},At=function(t){return[t.colorIdx,t.colorIdx,t.colorIdx,t.colorIdx,t.colorIdx,t.colorIdx]},Pt=function(t){return[t.focused,t.focused,t.focused,t.focused,t.focused,t.focused]},Rt=function t(i){if(!(this instanceof t?this.constructor:void 0))throw new Error('Uncaught TypeError: Class constructor cannot be invoked without "new"');for(var e=i.libraries.PIXI,o=i.libraries.d3Scale,a=o.scaleLinear,r=o.scaleLog,n=i.services.tileProxy,s=i.utils.colorToHex,c=r().domain([1,10]).range([.1,1]).clamp(!0),h=function(t){return i.utils.colorToRgba(t).slice(0,3).map((function(t){return Math.min(1,Math.max(0,t/255))}))},u=function(t){Object(F.a)(o,t);var i=Object(D.a)(o);function o(t,e){var a;return Object(O.a)(this,o),(a=i.call(this,t,e)).updateOptions(),a}return Object(T.a)(o,[{key:"initTile",value:function(t){var i=xt(t),e=i?Ot:Et,o=i?Mt:Tt;t.tileData.forEach((function(t){t.start=e(t),t.end=o(t),t.isLeftToRight=t.start<t.end})),t.histogramMax=0,this.updateTileFocusMap(t)}},{key:"updateTileHistogram",value:function(t){var i=this,e=this.getTilePosAndDimensions(t.tileData.zoomLevel,t.tileData.tilePos),o=e.tileX,a=e.tileWidth/this.numBins;t.binXPos=new Float32Array(this.numBins+1),t.histogram1d=new Float32Array(this.numBins),t.histogram2d=new Float32Array(this.numBins*this.numGroups);for(var r=0,n=0;n<=this.numBins;n++)t.binXPos[n]=o+a*n;t.tileData.forEach((function(e){for(var n=i.categoryToGroup.get(e.fields[i.categoryField].toLowerCase()),s=i.numBins-1,l=Math.max(0,Math.min(s,Math.round((e.xStart-o)/a))),c=Math.max(0,Math.min(s,Math.round((e.xEnd-o)/a))),h=Math.abs(c-l),u=i.getImportance(e),d=n*i.numBins,p=0;p<=h;p++){var m=l+p,f=d+m;t.histogram2d[f]+=u,t.histogram1d[m]+=u,r=Math.max(r,t.histogram1d[m])}})),t.histogramMax=r}},{key:"updateHistograms",value:function(){Object.values(this.fetchedTiles).forEach(this.updateTileHistogram.bind(this))}},{key:"updateTileFocusMap",value:function(t){t.focusMap=new Float32Array(this.numBins);var i=this.getTilePosAndDimensions(t.tileData.zoomLevel,t.tileData.tilePos),e=i.tileX,o=i.tileWidth;if(e<=this.focusRegion[1]&&e+o>=this.focusRegion[0])for(var a=o/this.numBins,r=Math.max(0,Math.round((this.focusRegion[0]-e)/a)),n=Math.min(this.numBins-1,Math.round((this.focusRegion[1]-e)/a)),s=Math.abs(n-r),l=0;l<=s;l++)t.focusMap[l]=1}},{key:"updateFocusMap",value:function(){Object.values(this.fetchedTiles).forEach(this.updateTileFocusMap.bind(this))}},{key:"updateStratificationOption",value:function(){var t=this;if(!this.options.stratification)return this.categoryField=void 0,this.categoryToGroup=void 0,this.groupToColor=void 0,this.numGroups=0,this.numCategories=0,void(this.groupLabels=[]);this.categoryField=this.options.stratification.categoryField,this.categoryToGroup=new Map,this.categoryToY=new Map,this.groupToColor=new Map,this.numGroups=this.options.stratification.groups.length,this.groupSizes=this.options.stratification.groups.map((function(t){return t.categories.length})),this.numCategories=this.groupSizes.reduce((function(t,i){return t+i}),0),this.groupLabels=this.options.stratification.groups.map((function(t,i){return t.label||"Group ".concat(i)}));var i=0;this.options.stratification.groups.forEach((function(e,o){t.groupToColor.set(o,[s(e.color||Ct[o%Ct.length]),s(e.backgroundColor||St[o%St.length])]),e.categories.forEach((function(e,a){t.categoryToGroup.set(e.toLowerCase(),o),t.categoryToY.set(e.toLowerCase(),i+a)})),i+=e.categories.length})),this.groupLabelsPixiText=this.groupLabels.map((function(i,o){return new e.Text(i,{fontSize:t.labelSize,align:"right"===t.axisAlign?"right":"left",fill:s(t.options.stratification.groups[o].axisLabelColor||kt[o%kt.length])})}))}},{key:"updateOptions",value:function(){var t=this;this.axisAlign=this.options.axisAlign||"left",this.labelColor=s(this.options.labelColor||"black"),this.labelSize=this.options.labelSize||12,this.colorMap=this.options.colorMap||[].concat(Ct),this.colorMapRgbNorm=this.colorMap.map(h);var i=v(e,this.colorMapRgbNorm),o=Object(l.a)(i,2);this.colorMapTex=o[0],this.colorMapTexRes=o[1],this.colorMapFocus=this.options.colorMapFocus||[].concat(kt),this.colorMapFocusRgbNorm=this.colorMapFocus.map(h);var r=v(e,this.colorMapFocusRgbNorm),n=Object(l.a)(r,2);this.colorMapFocusTex=n[0],this.colorMapFocusTexRes=n[1],this.markColor=s(this.options.markColor||"black"),this.markColorRgbNorm=this.options.markColor?h(this.options.markColor):[0,0,0],this.markOpacity=Number.isNaN(+this.options.markOpacity)?1:Math.min(1,Math.max(0,+this.options.markOpacity)),this.markSize=this.options.markSize||2,this.markColorFocus=s(this.options.markColorFocus||"red"),this.markColorFocusRgbNorm=this.options.markColorFocus?h(this.options.markColorFocus):[1,0,0],this.markOpacityFocus=Number.isNaN(+this.options.markOpacityFocus)?this.markOpacity:Math.min(1,Math.max(0,+this.options.markOpacityFocus)),this.markSizeFocus=this.options.markSizeFocus||this.markSize,this.binSize=this.options.binSize||8,this.numBins=this.tilesetInfo?Math.round(this.tilesetInfo.tile_size/this.binSize):1024/this.binSize,this.getImportance=this.options.importanceField?function(i){return+i.fields[t.options.importanceField]}:function(){return 1};var u=this.options.importanceDomain||[1e3,1],d=a().domain(u).range([1,10]);this.opacityScale=function(t){return c(d(t))},this.focusRegion=this.options.focusRegion?this.options.focusRegion:[1/0,1/0],this.focusGene=this.options.focusGene?this.options.focusGene.toLowerCase():void 0,this.getGene=this.options.geneField?function(i){return i.fields[t.options.geneField].toLowerCase()}:void 0,this.minImportance=this.options.minImportance||0,this.updateStratificationOption(),this.updateFocusMap(),this.updateHistograms(),this.updateScales()}},{key:"refreshTiles",value:function(){for(var t,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];if((t=Object(M.a)(Object(w.a)(o.prototype),"refreshTiles",this)).call.apply(t,[this].concat(e)),this.tilesetInfo){var r=this.numBins;this.numBins=Math.round(this.tilesetInfo.tile_size/this.binSize),r!==this.numBins&&(this.updateHistograms(),this.updateScales())}}},{key:"rerender",value:function(t){this.options=t,this.updateOptions(),this.updateExistingGraphics()}},{key:"updateScales",value:function(){var t=Object.values(this.fetchedTiles);if(t.length){var i=Object(l.a)(this.dimensions,2)[1];this.histMax=wt(t),this.heightScale=a().domain([0,this.histMax]).range([i,0]),this.valueScale=this.heightScale,this.valueScaleInverted=a().domain([0,this.histMax]).range([0,i])}}},{key:"itemToPoint",value:function(t){return{xStart:this._xScale(t.start),xEnd:this._xScale(t.start),yStart:this.heightScale(this.categoryToY.get(t.fields[this.categoryField].toLowerCase())),yEnd:function(){},opacity:this.opacityScale(this.getImportance(t)),focused:t.xStart<=this.focusRegion[1]&&t.xEnd>=this.focusRegion[0]}}},{key:"histToSegments",value:function(t){for(var i=[],e=0;e<this.numBins;e++){var o=0;if(t.histogram1d[e]>0)for(var a=0;a<this.numGroups;a++){var r=t.histogram2d[a*this.numBins+e];r&&(i.push({xStart:this._xScale(t.binXPos[e]),xEnd:this._xScale(t.binXPos[e+1]),yStart:this.heightScale(o),yEnd:this.heightScale(o+r),colorIdx:a%this.colorMap.length,focused:t.focusMap[e]}),o+=r)}}return i}},{key:"renderStackedBars",value:function(){this.drawnAtScale=a().domain(Object(E.a)(this.xScale().domain())).range(Object(E.a)(this.xScale().range()));var t=Object.values(this.fetchedTiles).flatMap(this.histToSegments.bind(this)),i=new Float32Array(t.flatMap(Dt)),o=new Float32Array(t.flatMap(At)),r=new Float32Array(t.flatMap(Pt)),n=new e.UniformGroup({uColorMapTex:this.colorMapTex,uColorMapTexRes:this.colorMapTexRes,uColorMapFocus:this.colorMapFocusTex,uColorMapFocusTexRes:this.colorMapFocusTexRes}),s=e.Shader.from(yt,bt,n),l=new e.Geometry;l.addAttribute("aPosition",i,2),l.addAttribute("aColorIdx",o,1),l.addAttribute("aFocused",r,1);var c=new e.Mesh(l,s,new e.State,e.DRAW_MODES.TRIANGLES),h=new e.Graphics;h.addChild(c),this.pMain.x=this.position[0],this.indicatorPointGraphics&&this.pMain.removeChild(this.indicatorPointGraphics),this.pMain.addChild(h),this.indicatorPointGraphics=h,Ft(this.indicatorPointGraphics,this._xScale,this.drawnAtScale),this.draw(),this.animate()}},{key:"renderTrack",value:function(){this.drawAxis(this.valueScaleInverted),this.renderStackedBars()}},{key:"updateExistingGraphics",value:function(){this.updateHistograms(),this.updateScales(),this.renderTrack()}},{key:"getMouseOverHtml",value:function(t,i){if(!this.tilesetInfo)return"";var e=this.calculateZoomLevel(),o=n.calculateTileWidth(this.tilesetInfo,e,this.tilesetInfo.tile_size),a=this._xScale.invert(t)/o,r=Math.floor(a),s=this.tileToLocalId([e,r]),c=this.fetchedTiles[s];if(!c)return"";for(var h=a-r,u=Math.floor(this.numBins*h),d=[],p=0,m=0;m<this.numGroups;m++)p+=c.histogram2d[m*this.numBins+u],d.push(p);var f=this.heightScale.invert(i),v=d.findIndex((function(t){return t>f}));if(v>=0){var g=this.groupToColor.get(v),_=Object(l.a)(g,2),y=_[0],b=_[1],C="#".concat(y.toString(16)),k="#".concat(b.toString(16)),S=d[v].toFixed(2);return'<div style="margin: 0 -0.25rem; padding: 0 0.25rem; background: '.concat(k,'"><strong style="color: ').concat(C,';">').concat(this.groupLabels[v],":</strong> ").concat(S,"</div>")}return""}},{key:"setPosition",value:function(t){Object(M.a)(Object(w.a)(o.prototype),"setPosition",this).call(this,t);var i=Object(l.a)(this.position,2);this.pMain.position.x=i[0],this.pMain.position.y=i[1]}},{key:"zoomed",value:function(t,i){this.xScale(t),this.yScale(i),this.indicatorPointGraphics&&Ft(this.indicatorPointGraphics,t,this.drawnAtScale),this.refreshTiles(),this.draw()}},{key:"exportSVG",value:function(){var t=this,i=null,e=null,a=Object(M.a)(Object(w.a)(o.prototype),"superSVG",this).call(this),r=Object(l.a)(a,2);e=r[0],i=r[1],e.setAttribute("class","exported-arcs-track");var n=document.createElement("g");i.appendChild(n),n.setAttribute("transform","translate(".concat(this.position[0],",").concat(this.position[1],")"));var s=this.options.strokeColor?this.options.strokeColor:"blue",c=this.options.strokeWidth?this.options.strokeWidth:2;return this.visibleAndFetchedTiles().forEach((function(i){t.polys=[],t.drawTile(i,!0);var e,o=Object(x.a)(t.polys);try{for(o.s();!(e=o.n()).done;){var a=e.value,r=a.polyStr,l=a.opacity,h=document.createElement("path");h.setAttribute("fill","transparent"),h.setAttribute("stroke",s),h.setAttribute("stroke-width",c),h.setAttribute("opacity",l),h.setAttribute("d",r),n.appendChild(h)}}catch(u){o.e(u)}finally{o.f()}})),[e,i]}}]),o}(i.tracks.HorizontalLine1DPixiTrack),d=arguments.length,p=new Array(d>1?d-1:0),m=1;m<d;m++)p[m-1]=arguments[m];return Object(S.a)(u,p)};Rt.config={type:"stacked-bar",datatype:["bedlike"],orientation:"1d",name:"Arcs1D",thumbnail:(new DOMParser).parseFromString('<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M4 2.1L.5 3.5v12l5-2 5 2 5-2v-12l-5 2-3.17-1.268" fill="none" stroke="currentColor"/><path d="M10.5 3.5v12" fill="none" stroke="currentColor" stroke-opacity=".33" stroke-dasharray="1,2,0,0"/><path d="M5.5 13.5V6" fill="none" stroke="currentColor" stroke-opacity=".33" stroke-width=".9969299999999999" stroke-dasharray="1.71,3.43,0,0"/><path d="M9.03 5l.053.003.054.006.054.008.054.012.052.015.052.017.05.02.05.024 4 2 .048.026.048.03.046.03.044.034.042.037.04.04.037.04.036.042.032.045.03.047.028.048.025.05.022.05.02.053.016.053.014.055.01.055.007.055.005.055v.056l-.002.056-.005.055-.008.055-.01.055-.015.054-.017.054-.02.052-.023.05-.026.05-.028.048-.03.046-.035.044-.035.043-.038.04-4 4-.04.037-.04.036-.044.032-.045.03-.046.03-.048.024-.05.023-.05.02-.052.016-.052.015-.053.012-.054.01-.054.005-.055.003H8.97l-.053-.003-.054-.006-.054-.008-.054-.012-.052-.015-.052-.017-.05-.02-.05-.024-4-2-.048-.026-.048-.03-.046-.03-.044-.034-.042-.037-.04-.04-.037-.04-.036-.042-.032-.045-.03-.047-.028-.048-.025-.05-.022-.05-.02-.053-.016-.053-.014-.055-.01-.055-.007-.055L4 10.05v-.056l.002-.056.005-.055.008-.055.01-.055.015-.054.017-.054.02-.052.023-.05.026-.05.028-.048.03-.046.035-.044.035-.043.038-.04 4-4 .04-.037.04-.036.044-.032.045-.03.046-.03.048-.024.05-.023.05-.02.052-.016.052-.015.053-.012.054-.01.054-.005L8.976 5h.054zM5 10l4 2 4-4-4-2-4 4z" fill="currentColor"/><path d="M7.124 0C7.884 0 8.5.616 8.5 1.376v3.748c0 .76-.616 1.376-1.376 1.376H3.876c-.76 0-1.376-.616-1.376-1.376V1.376C2.5.616 3.116 0 3.876 0h3.248zm.56 5.295L5.965 1H5.05L3.375 5.295h.92l.354-.976h1.716l.375.975h.945zm-1.596-1.7l-.592-1.593-.58 1.594h1.172z" fill="currentColor"/></svg>',"text/xml").documentElement,availableOptions:["arcStyle","flip1D","labelPosition","labelColor","labelTextOpacity","labelBackgroundOpacity","strokeColor","strokeWidth","trackBorderWidth","trackBorderColor"],defaultOptions:{arcStyle:"ellipse",flip1D:"no",labelColor:"black",labelPosition:"hidden",strokeColor:"black",strokeWidth:1,trackBorderWidth:0,trackBorderColor:"black"},optionsInfo:{arcStyle:{name:"Arc Style",inlineOptions:{circle:{name:"Circle",value:"circle"},ellipse:{name:"Ellipse",value:"ellipse"}}}}};var Nt=Rt;Object(o.a)({name:"ScalableArcs1dTrack",track:vt,config:vt.config}),Object(o.a)({name:"BedMatrixTrack",track:$,config:$.config}),Object(o.a)({name:"SnpTrack",track:_t,config:_t.config}),Object(o.a)({name:"StackedBarTrack",track:Nt,config:Nt.config}),s.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[120,1,2]]]);
//# sourceMappingURL=main.1e938424.chunk.js.map